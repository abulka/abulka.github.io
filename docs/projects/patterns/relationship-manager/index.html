<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.74.3" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Relationship Manager - Design Pattern | Andy Bulka - Blog</title><meta property="og:title" content="Relationship Manager - Design Pattern" />
<meta property="og:description" content="A central mediating class which records all the one-to-one, one-to-many and many-to-many relationships between a group of selected classes. Basically a cheap object relational database.
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://abulka.github.io/projects/patterns/relationship-manager/" />
<meta property="article:published_time" content="2001-08-04T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-10-09T18:13:46+11:00" />
<meta itemprop="name" content="Relationship Manager - Design Pattern">
<meta itemprop="description" content="A central mediating class which records all the one-to-one, one-to-many and many-to-many relationships between a group of selected classes. Basically a cheap object relational database.
">
<meta itemprop="datePublished" content="2001-08-04T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-10-09T18:13:46+11:00" />
<meta itemprop="wordCount" content="4698">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Relationship Manager - Design Pattern"/>
<meta name="twitter:description" content="A central mediating class which records all the one-to-one, one-to-many and many-to-many relationships between a group of selected classes. Basically a cheap object relational database.
"/>





<link rel="preload" href="/scss/main.min.8319f0938bf5d5a33ffa5c494577715b7ca46c3afe1a7bcdff6a598eb9c2bff1.css" as="style">
<link href="/scss/main.min.8319f0938bf5d5a33ffa5c494577715b7ca46c3afe1a7bcdff6a598eb9c2bff1.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>




  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zM197.0804 232.033c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zM197.0839 232.0372c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zM197.0839 232.0372c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zM197.0804 177.6188c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zM197.0839 177.623c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zM197.0839 177.623c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zM197.5309 286.4723c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zM197.5344 286.4765c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zM197.5344 286.4765c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zM197.0804 340.5784c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zM197.0839 340.5826c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zM197.0839 340.5826c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Andy Bulka - Blog</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/about/" ><span>About</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/blog/" ><span>Blog</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/projects/" ><span class="active">Projects</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.174e8b673a2353560c0d01a9966270f6e6dd33694f0affee73d8a178df053eab9911570defab0e2d7373a91b80226d06ea2018732781c407a7576cf5f55b958b.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.174e8b673a2353560c0d01a9966270f6e6dd33694f0affee73d8a178df053eab9911570defab0e2d7373a91b80226d06ea2018732781c407a7576cf5f55b958b.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/projects/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Projects</a>
  </li>
  <ul>
    <li class="collapse show" id="projects">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/projects/patterns/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Design Patterns</a>
  </li>
  <ul>
    <li class="collapse show" id="projectspatterns">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-projectspatternsmvca-pattern" href="/projects/patterns/mvca-pattern/">MVC-App Pattern</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-projectspatternstransformation-interface" href="/projects/patterns/transformation-interface/">Transformation Interface</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-projectspatternsdesign-pattern-automation" href="/projects/patterns/design-pattern-automation/">Design Pattern Automation</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-projectspatternsrelationship-manager" href="/projects/patterns/relationship-manager/">Relationship Manager</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/projects/misc/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Misc</a>
  </li>
  <ul>
    <li class="collapse " id="projectsmisc">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            <p>andy top of toc</p>







<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">








</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#abstract">Abstract</a></li>
    <li><a href="#the-official-pattern">The Official Pattern</a></li>
    <li><a href="#usage-and-theory">Usage and Theory</a>
      <ul>
        <li><a href="#its-a-object-relational-database">Its a Object Relational Database</a></li>
        <li><a href="#whats-it-good-for">What&rsquo;s it good for?</a></li>
        <li><a href="#modelling-relationships">Modelling relationships</a></li>
      </ul>
    </li>
    <li><a href="#documentation">Documentation</a>
      <ul>
        <li><a href="#c-and-java-api">C# and Java API</a></li>
        <li><a href="#abstract-api">Abstract API</a></li>
        <li><a href="#enforcing-relationships">Enforcing Relationships</a></li>
        <li><a href="#finding-just-one-object">Finding just one object</a></li>
        <li><a href="#relationship-id">Relationship Id</a></li>
      </ul>
    </li>
    <li><a href="#table-of-templates">Table of Templates</a>
      <ul>
        <li><a href="#classic-relationship-scenarios">Classic &ldquo;relationship scenarios&rdquo;</a></li>
        <li><a href="#table">Table</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#one-to-one">One to one</a>
      <ul>
        <li><a href="#methods-on-class-x">Methods on class X</a></li>
        <li><a href="#methods-on-class-y">Methods on class Y</a></li>
        <li><a href="#notes">Notes:</a></li>
      </ul>
    </li>
    <li><a href="#one-to-one-with-back-pointer">One to one, with back pointer</a>
      <ul>
        <li><a href="#methods-on-class-x-1">Methods on class X</a></li>
        <li><a href="#methods-on-class-y-1">Methods on class Y</a></li>
        <li><a href="#notes-1">Notes:</a></li>
        <li><a href="#discussion-on-back-pointers">Discussion on back pointers</a></li>
      </ul>
    </li>
    <li><a href="#one-to-many">One to many</a>
      <ul>
        <li><a href="#methods-on-class-x-2">Methods on class X</a></li>
        <li><a href="#methods-on-class-y-2">Methods on class Y</a></li>
        <li><a href="#notes-2">Notes:</a></li>
      </ul>
    </li>
    <li><a href="#one-to-many-with-back-pointers">One to many, with back pointers</a>
      <ul>
        <li><a href="#methods-on-class-x-3">Methods on class X</a></li>
        <li><a href="#methods-on-class-y-3">Methods on class Y</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#all-possible-relationship-scenarios">All possible relationship scenarios?</a></li>
        <li><a href="#interesting-addendem">Interesting Addendem</a></li>
        <li><a href="#bi-directional-implementations-of-directional-relationships">Bi-directional implementations of directional relationships</a></li>
        <li><a href="#more-on-directionality-and-backpointers">More on Directionality and Backpointers</a></li>
        <li><a href="#more-on-backpointers">More on Backpointers</a></li>
        <li><a href="#before-and-after---modeling-composite-design-pattern-in-python">Before and After - Modeling Composite Design Pattern  in Python</a></li>
      </ul>
    </li>
    <li><a href="#a-concrete-example">A concrete example</a>
      <ul>
        <li><a href="#future-directions">Future Directions</a></li>
      </ul>
    </li>
    <li><a href="#resources">Resources</a></li>
  </ul>
</nav>



<p>andy bottom of toc</p>

            
          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://abulka.github.io/projects/">Projects</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://abulka.github.io/projects/patterns/">Design Patterns</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://abulka.github.io/projects/patterns/relationship-manager/">Relationship Manager</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Relationship Manager - Design Pattern</h1>
    <div class="lead">A central mediating class which records all the one-to-one, one-to-many and many-to-many relationships between a group of selected classes. Basically a cheap object relational database.</div>
	       
	<p><img src="http://www.andypatterns.com/files/62371233035718bgDSC1367.jpg" alt=""></p>
<h2 id="abstract">Abstract</h2>
<p>A central mediating class which records all the one-to-one, one-to-many and many-to-many relationships between a group of selected classes. Classes that use a Relationship Manager to implement their relationship properties and methods have a consistent metaphor and trivial implementation code (one line calls). In contrast - traditional &ldquo;pointer&rdquo; and &ldquo;arraylist&rdquo; techniques of implementing relationships are fully flexible but often require a reasonable amount of non-trivial code which can be tricky to get working correctly and are almost always a pain to maintain due to the detailed coding and coupling between classes involved.</p>
<h2 id="the-official-pattern">The Official Pattern</h2>
<iframe src="/files/andybulkarelationshipmanagerpattern.html" name="frame1" scrolling="yes" frameborder="yes" align="center" height = "842px" width = "800">
</iframe>
<h2 id="usage-and-theory">Usage and Theory</h2>
<p>Relationship Manager - Usage and Theory</p>
<p>This page documents how to use my implementations of the Relationship Manager pattern. RM Relationship Manager has been implemented in Python, Boo (.net), C# (.net) and Java.</p>
<p>Included are examples of how to code using relationship manager, covering all possible modelling scenarios (e.g. one to one, one to many etc.).  See also the Boo implementation page for a fully worked out example of a person and order class.  The Java download also has a real world example implemented.</p>
<p>I also spend some time describing, in more theoretical terms, the scope of the relationship manager approach, in other words - what are all the possible relationships between objects and how RM can model them.</p>
<h3 id="its-a-object-relational-database">Its a Object Relational Database</h3>
<p>In a sense, an <a href="https://en.wikipedia.org/wiki/Object_database">Object Database</a> is an implementation of the RM pattern.
The <em>intent</em> of the RM pattern is lighter weight, to replace the wirings between objects
rather than acting as a huge central database.</p>
<p>Here is a very simple implementation of RM in Python:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">RelationshipManager</span><span style="color:#000;font-weight:bold">:</span>
  <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
      <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Relationships</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[]</span>
  <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">AddRelationship</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">From</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">To</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">RelId</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">):</span>
      <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FindObjects</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">From</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">To</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">RelId</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Relationships</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">append</span><span style="color:#000;font-weight:bold">(</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">From</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">To</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">RelId</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">)</span> <span style="color:#8f5902;font-style:italic"># assoc obj</span>
  <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">RemoveRelationships</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">From</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">To</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">RelId</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">):</span>
      <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#000">From</span> <span style="color:#204a87;font-weight:bold">or</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#000">To</span><span style="color:#000;font-weight:bold">:</span>
          <span style="color:#204a87;font-weight:bold">return</span>
      <span style="color:#000">lzt</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FindObjects</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">From</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">To</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">RelId</span><span style="color:#000;font-weight:bold">)</span>
      <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">lzt</span><span style="color:#000;font-weight:bold">:</span>
          <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">association</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">lzt</span><span style="color:#000;font-weight:bold">:</span>
              <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Relationships</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">remove</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">association</span><span style="color:#000;font-weight:bold">)</span>
  <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">FindObjects</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">From</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">To</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">RelId</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">):</span>
      <span style="color:#000">resultlist</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[]</span>
      <span style="color:#000">match</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">lambda</span> <span style="color:#000">obj</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87">list</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">index</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000">obj</span><span style="color:#ce5c00;font-weight:bold">==</span><span style="color:#204a87">list</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">index</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#204a87;font-weight:bold">or</span> <span style="color:#000">obj</span><span style="color:#ce5c00;font-weight:bold">==</span><span style="color:#3465a4">None</span>
      <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">association</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Relationships</span><span style="color:#000;font-weight:bold">:</span>
          <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">match</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">From</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">association</span><span style="color:#000;font-weight:bold">,</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">and</span> <span style="color:#000">match</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">To</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">association</span><span style="color:#000;font-weight:bold">,</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">and</span> <span style="color:#000">RelId</span><span style="color:#ce5c00;font-weight:bold">==</span><span style="color:#000">association</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">]:</span>
              <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">From</span><span style="color:#ce5c00;font-weight:bold">==</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">:</span>
                  <span style="color:#000">resultlist</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">append</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">association</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">])</span>
              <span style="color:#204a87;font-weight:bold">elif</span> <span style="color:#000">To</span><span style="color:#ce5c00;font-weight:bold">==</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">:</span>
                  <span style="color:#000">resultlist</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">append</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">association</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">])</span> 
              <span style="color:#204a87;font-weight:bold">else</span><span style="color:#000;font-weight:bold">:</span>
                  <span style="color:#000">resultlist</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">append</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">association</span><span style="color:#000;font-weight:bold">)</span>
      <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">resultlist</span>
  <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">FindObject</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">From</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">To</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">RelId</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">):</span>
      <span style="color:#000">lzt</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FindObjects</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">From</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">To</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">RelId</span><span style="color:#000;font-weight:bold">)</span>
      <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">lzt</span><span style="color:#000;font-weight:bold">:</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">lzt</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">]</span>
      <span style="color:#204a87;font-weight:bold">else</span><span style="color:#000;font-weight:bold">:</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#3465a4">None</span>
  <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">Clear</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
      <span style="color:#204a87;font-weight:bold">del</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Relationships</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">:]</span>
</code></pre></div><p>and you could use it like this:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">unittest</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">random</span>

<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">TestCase00</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">unittest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">TestCase</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">setUp</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rm</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">RelationshipManager</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">checkBasic00</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rm</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">AddRelationship</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;a&#39;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#4e9a06">&#39;b&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rm</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">AddRelationship</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;a&#39;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#4e9a06">&#39;c&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#204a87;font-weight:bold">assert</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rm</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FindObjects</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;a&#39;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;b&#39;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#4e9a06">&#39;c&#39;</span><span style="color:#000;font-weight:bold">]</span>
        <span style="color:#204a87;font-weight:bold">assert</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rm</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FindObjects</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">,</span><span style="color:#4e9a06">&#39;a&#39;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#000;font-weight:bold">[]</span>
        <span style="color:#204a87;font-weight:bold">assert</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rm</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FindObjects</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">,</span><span style="color:#4e9a06">&#39;b&#39;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;a&#39;</span><span style="color:#000;font-weight:bold">]</span>
        <span style="color:#204a87;font-weight:bold">assert</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rm</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FindObjects</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">,</span><span style="color:#4e9a06">&#39;c&#39;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;a&#39;</span><span style="color:#000;font-weight:bold">]</span>
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">checkBasic01Singular</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rm</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">AddRelationship</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;a&#39;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#4e9a06">&#39;b&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rm</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">AddRelationship</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;a&#39;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#4e9a06">&#39;c&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#204a87;font-weight:bold">assert</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rm</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FindObject</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">,</span><span style="color:#4e9a06">&#39;b&#39;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#39;a&#39;</span>
        <span style="color:#204a87;font-weight:bold">assert</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rm</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FindObject</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">,</span><span style="color:#4e9a06">&#39;c&#39;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#39;a&#39;</span>
        <span style="color:#204a87;font-weight:bold">assert</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">rm</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FindObject</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;a&#39;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#3465a4">None</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#39;b&#39;</span> <span style="color:#8f5902;font-style:italic"># could have been &#39;c&#39; - arbitrary</span>
</code></pre></div><p>For the full Python 3 implementation see
<a href="https://github.com/abulka/relationship-manager">https://github.com/abulka/relationship-manager</a></p>
<p>Hoping to get a <code>pip</code> package sometime soon.</p>
<h3 id="whats-it-good-for">What&rsquo;s it good for?</h3>
<p>What is Relationship Manager good for?</p>
<blockquote>
<p>I&rsquo;d appreciate an &lsquo;how to use&rsquo; example to get a quick / better idea on what it&rsquo;s useful for when programming</p>
</blockquote>
<p>The basic idea with relationship manager is that it is like a dictionary, which maps relationships between two things, be they object references or strings or whatever. In my examples I usually use strings, though object references are commonly used too, in order to<br>
map relationships between object instances.</p>
<p>The benefit over a dictionary is that you can have multiple mappings<br>
e.g.</p>
<pre><code>a -&gt; 1  
a -&gt; 2  
a -&gt; 3
</code></pre><p>Then you can ask what &lsquo;a&rsquo; points to and get the result <code>[1, 2, 3]</code>.
You can also ask what is pointing to 3, and get the result <code>a</code>.</p>
<p>One common use of this technology is to do all your wiring between objects using a relationship manager, thereby saving yourself having to implement your own one to many lists and having to maintain fiddly backpointer logic etc. So you still have e.g. an <code>AddOrder(o)</code> method on your e.g. <code>Person</code> class&hellip;its just that you implement the method using a one line call to the relationship manager - simple!  e.g.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Person</span><span style="color:#000;font-weight:bold">:</span>  
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">AddOrder</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">o</span><span style="color:#000;font-weight:bold">):</span>  
        <span style="color:#000">RM</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">addRelationship</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">o</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;personToOrderRelationship&#39;</span><span style="color:#000;font-weight:bold">)</span>  
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">GetOrders</span><span style="color:#000;font-weight:bold">():</span>  
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">RM</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">findObjectsPointedToByMe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span><span style="color:#4e9a06">&#39;personToOrderRelationship&#39;</span><span style="color:#000;font-weight:bold">)</span> 
</code></pre></div><p>There is a bit more of a tutorial code sample in the post <a href="http://tinyurl.com/9xz5m">http://tinyurl.com/9xz5m</a></p>
<h3 id="modelling-relationships">Modelling relationships</h3>
<p>What methods do I put where when modelling relationships?</p>
<p>I recommend that you use the <a href="#UsageTemplates">templates</a> table to figuring out what methods to put where for each type of classic relationship you want to model.  For example, to implement a <strong>one to many</strong> relationship between two classes X and Y, you would use template 4 or 5 (use the latter if you want bidirectionality)</p>
<h2 id="documentation">Documentation</h2>
<p>Note that the C# and Java implementations have a slightly cleaner set of methods and a few extra methods - and also use a nice interface to talk to.  The method names are substantially the same though.</p>
<h3 id="c-and-java-api">C# and Java API</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">enum</span> <span style="color:#000">Cardinality</span>  
<span style="color:#ce5c00;font-weight:bold">{</span>  
    <span style="color:#000">OneToOne</span><span style="color:#ce5c00;font-weight:bold">,</span>  
    <span style="color:#000">OneToMany</span><span style="color:#ce5c00;font-weight:bold">,</span>  
    <span style="color:#000">ManyToOne</span><span style="color:#ce5c00;font-weight:bold">,</span>  
    <span style="color:#000">ManyToMany</span>  
<span style="color:#ce5c00;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">enum</span> <span style="color:#000">Directionality</span>  
<span style="color:#ce5c00;font-weight:bold">{</span>  
    <span style="color:#000">UniDirectional</span><span style="color:#ce5c00;font-weight:bold">,</span>  
    <span style="color:#000">DirectionalWithBackPointer</span><span style="color:#ce5c00;font-weight:bold">,</span>  
    <span style="color:#000">DoubleDirectional</span>  
<span style="color:#ce5c00;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">interface</span> <span style="color:#000">IRelationshipManager</span> <span style="color:#ce5c00;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">AddRelationship</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">object</span> <span style="color:#000">fromObj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">object</span> <span style="color:#000">toObj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">string</span> <span style="color:#000">relId</span><span style="color:#ce5c00;font-weight:bold">);</span>  
  <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">AddRelationship</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">object</span> <span style="color:#000">fromObj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">object</span> <span style="color:#000">toObj</span><span style="color:#ce5c00;font-weight:bold">);</span>  
  <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">EnforceRelationship</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">string</span> <span style="color:#000">relId</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">Cardinality</span> <span style="color:#000">cardinality</span><span style="color:#ce5c00;font-weight:bold">);</span>  
  <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">EnforceRelationship</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">string</span> <span style="color:#000">relId</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">Cardinality</span> <span style="color:#000">cardinality</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">Directionality</span> <span style="color:#000">directionality</span><span style="color:#ce5c00;font-weight:bold">);</span>  
  <span style="color:#000">IList</span> <span style="color:#000">FindObjectsPointedToByMe</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">object</span> <span style="color:#000">fromObj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">string</span> <span style="color:#000">relId</span><span style="color:#ce5c00;font-weight:bold">);</span>  
  <span style="color:#000">object</span> <span style="color:#000">FindObjectPointedToByMe</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">object</span> <span style="color:#000">fromObj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">string</span> <span style="color:#000">relId</span><span style="color:#ce5c00;font-weight:bold">);</span>  
   <span style="color:#000">IList</span> <span style="color:#000">FindObjectsPointingToMe</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">object</span> <span style="color:#000">toObj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">string</span> <span style="color:#000">relId</span><span style="color:#ce5c00;font-weight:bold">);</span>  
  <span style="color:#000">object</span> <span style="color:#000">FindObjectPointingToMe</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">object</span> <span style="color:#000">toObj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">string</span> <span style="color:#000">relId</span><span style="color:#ce5c00;font-weight:bold">);</span>  
  <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">RemoveRelationship</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">object</span> <span style="color:#000">fromObj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">object</span> <span style="color:#000">toObj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">string</span> <span style="color:#000">relId</span><span style="color:#ce5c00;font-weight:bold">);</span>  
  <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">RemoveAllRelationshipsInvolving</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">object</span> <span style="color:#000">obj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">string</span> <span style="color:#000">relId</span><span style="color:#ce5c00;font-weight:bold">);</span>  
  <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">Count</span><span style="color:#ce5c00;font-weight:bold">();</span>  
  <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">CountRelationships</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">string</span> <span style="color:#000">relId</span><span style="color:#ce5c00;font-weight:bold">);</span>  
  <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">Clear</span><span style="color:#ce5c00;font-weight:bold">();</span>  
  <span style="color:#000">bool</span> <span style="color:#000">DoesRelIdExistBetween</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">object</span> <span style="color:#000">fromObj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">object</span> <span style="color:#000">toObj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">string</span> <span style="color:#000">relId</span><span style="color:#ce5c00;font-weight:bold">);</span>  
  <span style="color:#000">IList</span> <span style="color:#000">FindRelIdsBetween</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">object</span> <span style="color:#000">fromObj</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">object</span> <span style="color:#000">toObj</span><span style="color:#ce5c00;font-weight:bold">);</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><h3 id="abstract-api">Abstract API</h3>
<table>
<thead>
<tr>
<th>Return Type</th>
<th>Function Name</th>
<th>Short-hand</th>
</tr>
</thead>
<tbody>
<tr>
<td>void</td>
<td>addRelationship(from, to, id)</td>
<td>R(f,t)</td>
</tr>
<tr>
<td>void</td>
<td>removeRelationship(from, to, id)</td>
<td>NR(f,t)</td>
</tr>
<tr>
<td>List</td>
<td>findObjectsPointedToByMe(from, id)</td>
<td>PS(f)</td>
</tr>
<tr>
<td>List</td>
<td>findObjectsPointingToMe(to, id)</td>
<td>BS(t)</td>
</tr>
<tr>
<td>void</td>
<td>EnforceRelationship(id, cardinality, bidirectionality)</td>
<td>ER(id, c, bi)</td>
</tr>
<tr>
<td>Object</td>
<td>findObjectPointedToByMe(fromMe, id, cast)</td>
<td>P(f)</td>
</tr>
<tr>
<td>Object</td>
<td>findObjectPointingToMe(toMe, id, cast)</td>
<td>B(t)</td>
</tr>
<tr>
<td>void</td>
<td>removeAllRelationshipsInvolving(object, id)</td>
<td>NRS(o)</td>
</tr>
</tbody>
</table>
<p>For example <code>Object</code> is just one of <em>your</em> objects which you added with <code>addRelationship()</code>.</p>
<p>Re <code>cast</code> that&rsquo;s just in case you need to cast to a type. This might have been possible in the <a href="http://boo-language.github.io/">boo language</a> for .NET (which is now dead). Please adapt to your language as needed. Dynamic languages don&rsquo;t need casting.</p>
<h3 id="enforcing-relationships">Enforcing Relationships</h3>
<p>You can enforce relationships. For example EnforceRelationship() works like this:</p>
<pre><code>ER(&quot;xtoy&quot;, &quot;onetoone&quot;, &quot;directional&quot;)
</code></pre><p>The relationship is registered as being one to one and directional, so that e.g. when you add a second relationship between the same two objects the first relationship is automatically removed - ensuring the relationship is always one to one. Alternatively, the implementation could raise an exception (go into the source and change it if this is what you need).</p>
<h3 id="finding-just-one-object">Finding just one object</h3>
<p>The pair of find methods <code>FindObjectPointedToByMe()</code> and <code>FindObjectPointedToByMe()</code> only find <em>one</em> object (even though there may be more), and cast it to the appropriate type.  This is a commonly used convenience method - the more painful way would be to use <code>FindObjectsPointingToMe()</code> and just grab the first object from the returned list.
Exactly which object is found is undefined, but would typically be the first one added.</p>
<h3 id="relationship-id">Relationship Id</h3>
<p>What to use as the Relationship Id?</p>
<p>This is either an integer or a string.  I have chosen to use a string in the C# and Java implementations, since you can describe relationships easily in this way rather than having to map from an integer back to some meaningful description.</p>
<pre><code>RM.addRelationship(fromObject, toObject, relationshipId)
</code></pre><p>will raise an exception if relationshipId is an empty string.  </p>
<p>All other functions (except for addRelationship) can pass either an empty string or &ldquo;*&rdquo; as the relationshipId, which means you are searching for any relationship at all.  You would usually only want to do this if there is only <em>one</em> relationship between class X and class Y, then your P and NR calls can specify &ldquo;*&rdquo; as the relationshipId in order to match any relationship between these two objects.  Alternatively, you can use relationship manager&rsquo;s overloaded versions of all its routines (except for addRelationship) which don&rsquo;t take a relationshipId where relationshipId defaults to &ldquo;*&rdquo;.</p>
<h2 id="table-of-templates">Table of Templates</h2>
<h3 id="classic-relationship-scenarios">Classic &ldquo;relationship scenarios&rdquo;</h3>
<p>How to implement relationships using sets of Relationship Manager methods</p>
<p>Here is a list of classic &ldquo;relationship scenarios&rdquo; (e.g. one to one, one to many etc.) and how to implement them using the Relationship Manager API.</p>
<p>The right hand side of the below table shows python code using calls to RM (relationship manager) using the shorthand notation for the function names.  For long hand names just substitute in the appropriate name e.g. instead of RM.R() you would call rm.AddRelationship().</p>
<p>Note: The method names below are just suggestions. Normally you would use better method names that pertain to your application domain.</p>
<ul>
<li>Instead of <code>.addY(y)</code> you might have <code>addOrder(order)</code>.</li>
<li>Instead of <code>.getX()</code> you might have <code>getCustomer()</code>.</li>
<li>Instead of <code>getAllY()</code> you might have <code>.getOrders()</code> etc.</li>
</ul>
<h3 id="table">Table</h3>
<p>This table uses the <a href="#abstract-api">Shortened API</a> calls for brevity. E.g. <code>RM.ER</code> means call <code>EnforceRelationship</code> on your Relationship Manager instance.</p>
<table cellspacing="1" cellpadding="9">
    <tbody>
        <tr>
            <th></th>
            <th>Relationship Scenario</th>
            <th>Example Python Implementation</th>
        </tr>


        

        <tr>
            <td colspan="3">
                <h3>Implementing <b>one</b> to <b>one</b> relationships between class X and Y</h3>
            </td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>#1.</td>
            <td>
                <p><i>1 → 1, directional, all methods on X</i></p>
                <pre>
  Singular API             No API
 ______________        ______________
|       X      |      |       Y      |
|______________|      |______________|
|              |      |              |
|void  setY(y) |1    1|              |
|Y     getY()  |⎯⎯⎯⎯⎯⎯⎯⎯⎯→|              |
|void  clearY()|      |              |
|______________|      |______________|
				</pre>
            </td>
            <td>
                <pre>
class X:
  def __init__(self): 
    RM.ER("xtoy", "onetoone", "directional")
	
  def setY(self, y): 
    RM.R(self, y, "xtoy")
	
  def getY(self): 
    return RM.P(self, "xtoy")
	
  def clearY(self): 
    RM.NR(self, self.getY(), "xtoy")
				</pre>
                <pre>
class Y:
  pass
				</pre>
            </td>
        </tr>




        <tr>
            <td>#2.</td>
            <td>
                <p><i>1 → 1, directional, all methods on Y</i></p>
                <pre>
    No API              Singular API
 ______________        ______________
|       X      |      |       Y      |
|______________|      |______________|
|              |      |              |
|              |1    1| setX(x)      |
|              |⎯⎯⎯⎯⎯⎯⎯⎯→ | getX()       |
|              |      | clearX()     |
|______________|      |______________|
				</pre>
            </td>
            <td>
                <pre>
class X:
  pass
				</pre>
                <pre>
class Y:
  def __init__(self): 
    RM.ER("xtoy", "onetoone", "directional")

  def setX(self, x):
    RM.R(x, self, "xtoy")

  def getX(self):
    return RM.B(self, "xtoy")

  def clearX(self):
    RM.NR(self.getX(), self, "xtoy")
				</pre>
            </td>
        </tr>




        <tr>
            <td>#3.</td>
            <td>
                <p><i>1 ←→ 1, bi-directional, methods on both X and Y</i></p>

                <pre>
   Singular API         Singular API
 ______________        ______________
|       X      |      |       Y      |
|______________|      |______________|
|              |      |              |
|void  setY(y) |1    1| setX(x)      |
|Y     getY()  | ←⎯⎯⎯⎯→ | getX()       |
|void  clearY()|      | clearX()     |
|______________|      |______________|
				</pre>
            </td>
            <td>
                <pre>
class X:                    
  def __init__(self):
    RM.ER("xy", "onetoone", "bidirectional")
  
  def setY(self, y):
    RM.R(self, y, "xy")
  
  def getY(self):
    return RM.P(self, "xy")
  
  def clearY(self):
    RM.NR(self, self.getY(), "xy")
				</pre>
                <pre>
class Y:
  def __init__(self):
    RM.ER("xy", "onetoone", "bidirectional")

  def setX(self, x):
    RM.R(self, x, "xy")

  def getX(self):
    return RM.P(self, "xy")

  def clearX(self):
    RM.NR(self, self.getX(), "xy")
				</pre>
            </td>
        </tr>




        <tr>
            <td>#3A.</td>
            <td>
                <p><i>1 → 1, directional, all methods on X, back pointer</i></p>
                <pre>
            Singular API
        ___________________
       |       X           |&lt;-------,
       |___________________| 1      |
     1 |                   |        |
  |---→| void  _setX(x)    |        |
  |    | X     _getX(x)    |        |
  |____| X     _getBack()  |........|
back   |___________________|    x
				</pre>
                <p>This is the
                    <a href="https://en.wikipedia.org/wiki/Composite_pattern">Composite Design Pattern</a> - good for representing trees etc.
                </p>
                <p>
                    <span style="font-size: small;">See backpointer discussion
                        <a href="#backpointers">below</a> which includes a fully
                        worked out example of case 3A, in Python.
                    </span>
                </p>

            </td>
            <td>
                <pre>
class X:
  def __init__(self):
    RM.ER("xtox", "onetoone", "directional")

  def _setX(self, x):
    RM.R(self, thing, "xtox")

  def _getX(self):
    return RM.P(self, "xtox")

  def _getBack(self):
    return RM.B(self, "xtox")

				</pre>
                <pre>
x = property(_getThing, _setThing)

back = property(_getBack)
				</pre>
            </td>
        </tr>


        


        <tr>
            <td colspan="3">
                <h3>Implementing <b>one</b> to <b>many</b> relationships between class X and Y</h3>
            </td>
            <td></td>
            <td></td>
        </tr>


        <tr>
            <td>#4.</td>
            <td>
                <p><i>1 → *, directional, all methods on X</i></p>


                <pre>
  Plural  API             No API
 _____________        ______________
|      X      |      |       Y      |
|_____________|      |______________|
|             |      |              |
|addY(y)      |1    *|              |
|getAllY()    | ⎯⎯⎯⎯⎯⎯→ |              |
|removeY(y)   |      |              |
|_____________|      |______________|
				</pre>
            </td>
            <td>
                <pre>
class X:
  def __init__(self):
    RM.ER("xtoy", "onetomany", "directional")

  def addY(self, y):
    RM.R(self, y, "xtoy")

  def getAllY(self):
    return RM.PS(self, "xtoy")

  def removeY(self, y):
    RM.NR(self, y, "xtoy")
				</pre>
                <pre>
class Y:
  pass
				</pre>
            </td>
        </tr>




        <tr>
            <td>#5.</td>
            <td>
                <p><i>1 ←→ *, bi-directional, methods on both X and Y</i></p>

                <pre>
  Plural  API          Singular API
 _____________        ______________
|      X      |      |       Y      |
|_____________|      |______________|
|             |      |              |
|addY(y)      |1    *| setX(x)      |
|getAllY()    | ←⎯⎯⎯⎯→ | getX()       |
|removeY(y)   |      | clearX()     |
|_____________|      |______________|
				</pre>
            </td>
            <td>
                <pre>
class X:
  def __init__(self):
    RM.ER("xtoy", "onetomany", "bidirectional")

  def addY(self, y):
    RM.R(self, y, "xtoy")

  def getAllY(self):
    return RM.PS(self, "xtoy")

  def removeY(self, y):
    RM.NR(self, y, "xtoy")
				</pre>
                <pre>
class Y:
  def setX(self, x):
    RM.R(x, self, "xtoy")

  def getX(self):
    return RM.P(self, "xtoy")

  def clearX(self):
    RM.NR(self, self.getX(), "xtoy")
				</pre>
            </td>
        </tr>


        


        <tr>
            <td colspan="3">
                <h3>Implementing <b>many</b> to <b>one</b> relationships between class X and Y</h3>
            </td>
            <td></td>
            <td></td>
        </tr>


        <tr>
            <td>#6.</td>
            <td>
                <p><i>* → 1, directional, all methods on Y</i></p>
                <pre>
    No API              Plural  API
 ______________        ______________
|     X        |      |       Y      |
|______________|      |______________|
|              |      |              |
|              |*    1|addX(x)       |
|              | ⎯⎯⎯⎯⎯⎯→ |getAllX()     |
|              |      |removeX(x)    |
|______________|      |______________|
				</pre>
            </td>
            <td>
                <p>DRAFT API (not tested)</p>
                <pre>
class X:
  pass
				</pre>
                <pre>
class Y:
  def addX(x) -> None:
    RM.R(x, this, "xtoy")

  def getAllX() -> List:
    return RM.BS(this, "xtoy")

  def removeX(x) -> None:
    RM.NR(x, this, "xtoy")
				</pre>
                <p></p>
            </td>
        </tr>




        <tr>
            <td>#7.</td>
            <td>
                <p><i>* ←→ 1, bi-directional, methods on both X and Y</i></p>




                <pre>
  Singular API          Plural  API
 ______________        ______________
|     X        |      |       Y      |
|______________|      |______________|
|              |      |              |
|void  setY(y) |*    1|addX(x)       |
|Y     getY()  | ←⎯⎯⎯⎯→ |getAllX()     |
|void  clearY()|      |removeX(x)    |
|______________|      |______________|
				</pre>
            </td>
            <td>
                <p>DRAFT API (not tested)</p>
                <pre>
class X:
  def setY(y) -> None:
    RM.R(this, y, "xtoy")

  def getY() -> Y:
    RM.P(this, "xtoy")

  def clearY() -> None:
    RM.NR(this, getY(), "xtoy")
				</pre>
                <pre>
class Y:
  def addX(x) -> None:
    RM.R(x, this, "xtoy")

  def getAllX() -> List:
    RM.BS(this, "xtoy")

  def removeX(x) -> None:
    RM.NR(x, this, "xtoy")
				</pre>
                <p></p>
            </td>
        </tr>




        


        <tr>
            <td colspan="3">
                <h3>Implementing <b>many</b> to <b>many</b> relationships between class X and Y</h3>
            </td>
            <td></td>
            <td></td>
        </tr>


        <tr>
            <td>#8.</td>
            <td>
                <p><i>* → *, directional, all methods on X</i></p>
                <pre>
  Plural  API              No API
 _____________        ______________
|      X      |      |       Y      |
|_____________|      |______________|
|             |      |              |
|addY(y)      |*    *|              |
|getAllY()    | ⎯⎯⎯⎯⎯⎯→ |              |
|removeY(y)   |      |              |
|_____________|      |______________|
				</pre>
            </td>
            <td>
                <p>DRAFT API (TODO, not tested)</p>
            </td>
        </tr>




        <tr>
            <td>#9.</td>
            <td>
                <p><i>* → *, directional, all methods on Y</i></p>

                <pre>
      No API            Plural  API
 ______________        ______________
|     X        |      |       Y      |
|______________|      |______________|
|              |      |              |
|              |*    *|addX(x)       |
|              | ⎯⎯⎯⎯⎯⎯→ |getAllX()     |
|              |      |removeX(x)    |
|______________|      |______________|
				</pre>
            </td>
            <td>
                <p>DRAFT API (TODO, not tested)</p>
            </td>
        </tr>





        <tr>
            <td>#10.</td>
            <td>
                <p><i>* ←→ *, bi-directional, methods on both X and Y</i></p>

                <pre>
   Plural  API          Plural  API
 ______________        ______________
|     X        |      |       Y      |
|______________|      |______________|
|              |      |              |
| addY(y)      |*    *| addX(x)      |
| getAllY()    | ←⎯⎯⎯⎯→ | getAllX()    |
| removeY(y)   |      | removeX(x)   |
|______________|      |______________|
				</pre>
            </td>
            <td>
                <p>DRAFT API (TODO, not tested)</p>
            </td>
        </tr>
    </tbody>
</table>
<p>Code which supports the ideas in the theory above is provided in this <a href="http://www.atug.com/downloads/pythonRmProof.zip">python program</a> or simply view the code and results as a <a href="http://www.atug.com/downloads/pythonRmProof.pdf">pdf</a>.</p>
<h1 id="more-detail-on-each-template">More Detail on each template</h1>
<p>Here are some further notes on using each template.  I don&rsquo;t cover each variation, so see the above table for the complete list of possibilites.  I also use slightly different method names here just in case you don&rsquo;t like the <code>setX</code> and <code>setY</code> syntax I have been using.</p>
<h2 id="one-to-one">One to one</h2>
<p><img src="http://www.atug.com/andypatterns/images/rm_the1.gif" alt=""></p>
<p>Class X points to class Y.</p>
<h3 id="methods-on-class-x">Methods on class X</h3>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Example method name</th>
<th>Implementation in RM</th>
</tr>
</thead>
<tbody>
<tr>
<td>void</td>
<td>setPointer(y)</td>
<td><code>R(x, y, &quot;xtoy&quot;)</code></td>
</tr>
<tr>
<td>Y</td>
<td>getPointer()</td>
<td><code>P(x, &quot;xtoy&quot;)</code></td>
</tr>
<tr>
<td>void</td>
<td>clearPointer()</td>
<td><code>NR(x, y, &quot;xtoy&quot;)</code></td>
</tr>
</tbody>
</table>
<h3 id="methods-on-class-y">Methods on class Y</h3>
<p>None.</p>
<h3 id="notes">Notes:</h3>
<ol>
<li>The clearPointer() implementation needs to get a reference to <strong>y</strong> in order to call <code>NR(x,**y**,...)</code>.  The implementation can either call its own <code>getPointer()</code> method to get a reference to <strong>y</strong>, e.g. clearPointer() would be implemented as <code>NR(x, getPointer() ,&quot;xtoy&quot;)</code>.  Alternatively the getPointer() implementation can make a second call to relationship manager itself e.g.  <code>clearPointer()</code> would be implemented as <code>NR(x, P(x,&quot;xtoy&quot;),&quot;xtoy&quot;)</code>.</li>
<li>If there is only <em>one</em> relationship between class X and class Y, then your P and NR calls can specify &ldquo;*&rdquo; as the relationshipId in order to match any relationship between these two objects.  Alternatively, you can use the overloaded P and NR calls which don&rsquo;t take a relationshipId at all. <em>[not sure if this note on overloaded methods is relevant to the latest C# and Java implementations]</em></li>
</ol>
<p><img src="http://www.atug.com/andypatterns/_themes/canvas/acnvrule.gif" alt=""></p>
<h2 id="one-to-one-with-back-pointer">One to one, with back pointer</h2>
<p><img src="http://www.atug.com/andypatterns/images/rm_the2.jpg" alt=""></p>
<p>Class X points to class Y. <br>
Class Y can deduce a back pointer to class X.</p>
<h3 id="methods-on-class-x-1">Methods on class X</h3>
<p>Same as one to one, i.e.</p>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Example method name</th>
<th>Implementation in RM</th>
</tr>
</thead>
<tbody>
<tr>
<td>void</td>
<td>setPointer(y)</td>
<td><code>R(x, y, &quot;xtoy&quot;)</code></td>
</tr>
<tr>
<td>Y</td>
<td>getPointer()</td>
<td><code>P(x, &quot;xtoy&quot;)</code></td>
</tr>
<tr>
<td>void</td>
<td>clearPointer()</td>
<td><code>NR(x, y, &quot;xtoy&quot;)</code></td>
</tr>
</tbody>
</table>
<h3 id="methods-on-class-y-1">Methods on class Y</h3>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Example method name</th>
<th>Implementation in RM</th>
</tr>
</thead>
<tbody>
<tr>
<td>X</td>
<td>getBackPointer()</td>
<td>B(y, &ldquo;xtoy&rdquo;)</td>
</tr>
</tbody>
</table>
<p><em>and optionally setter methods &hellip;</em></p>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Example method name</th>
<th>Implementation in RM</th>
</tr>
</thead>
<tbody>
<tr>
<td>void</td>
<td>setBackPointer(x)</td>
<td><code>R(x, y, &quot;xtoy&quot;)</code><br> <em>or simply call <code>x.setPointer(this)</code></em></td>
</tr>
<tr>
<td>void</td>
<td>clearBackPointer()</td>
<td><code>NR(x, y, &quot;xtoy&quot;)</code><br>_or simply call <code>x._clearPointer()</code>_</td>
</tr>
</tbody>
</table>
<h3 id="notes-1">Notes:</h3>
<ol>
<li>An implicit back-pointer (i.e. a back reference) is always deducible, when using a relationship manager, thus instead of wiring up an explicit pointer relationship as a back-pointer , you can implement a back-pointer using an implicit back reference on an existing relationship (in this case the &ldquo;xtoy&rdquo; relationship) instead. i.e. see  <code>getBackPointer()</code> on class Y.</li>
<li>Notice all the relationshipId&rsquo;s in this example (in both classes) are the same viz. &ldquo;xtoy&rdquo;</li>
<li>In implementing X methods, whenever you need a reference to <strong>y</strong>, just call this.<code>getPointer()</code>.  Similarly, in implementing Y methods, whenever you need a reference to <strong>x</strong>, just call this.getBackPointer().  See discussion on this <em>above</em>.</li>
<li>If you chose to have backpointer setter methods on class Y, you need not necessarily call the wrapping methods on X in order to implement them e.g. <code>setBackPointer(x)</code> is implemented by simply calling <code>x.setPointer(this)</code> (although it is recommended that you do, since X is the &lsquo;controlling&rsquo; class for the relationship - see <a href="https://martinfowler.com/books/refactoring.html">Martin Fowler &lsquo;Refactorings&rsquo;</a> p. 197 &ldquo;Change Unidirectional Association to Bidirectional&rdquo;).  You could alternatively call the relationship manager directly, thus setBackPointer(x) becomes a call to <code>R(x, y, &quot;xtoy&quot;)</code> and <code>clearBackPointer()</code>  becomes a call to <code>NR(x, y, &quot;xtoy&quot;)</code>.</li>
<li>If you are trying to enforce a one to one relationship, then you should stricltly speaking, remove any exising relationship between a1 and b1 before creating a relationship between a2 and b1.  However relationship manager will remove the previous relationship for you automatically. See discussion on this behaviour. </li>
</ol>
<h3 id="discussion-on-back-pointers">Discussion on back pointers</h3>
<p>One of the benefits of the relationship manager pattern is that <em>you don&rsquo;t have to explicitly wire up and maintain back-pointers</em>.  Once you add a pointer relationship, you get the back pointer relationship available, for free.  And once you delete the pointer relationship, the back-pointer relationship goes away automatically too.</p>
<p>However if you want to delete or change the back-pointer relationship (from Y&rsquo;s perspective) then you must talk to the relationship manager in terms of the relationship &ldquo;xtoy&rdquo;.  If you imlplement  the back-pointer relationship as a different relationship, with a different relationshipId, then you will fall prey to the same out of synch problems that traditional spaghetti wiring techniques often fall prey to.  The trick is to treat the relationship as two sides of the <em>one relationshipId</em>.</p>
<p><img src="http://www.atug.com/andypatterns/_themes/canvas/acnvrule.gif" alt=""></p>
<h2 id="one-to-many">One to many</h2>
<p> <img src="http://www.atug.com/andypatterns/images/rm_the3.gif" alt=""></p>
<p>Class X points to many instances of class Y.</p>
<h3 id="methods-on-class-x-2">Methods on class X</h3>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Example method name</th>
<th>Implementation in RM</th>
</tr>
</thead>
<tbody>
<tr>
<td>void</td>
<td>add(y)</td>
<td><code>R(x, y, &quot;xtoy*&quot;)</code></td>
</tr>
<tr>
<td>list</td>
<td>getAll()</td>
<td><code>PS(x, &quot;xtoy*&quot;)</code></td>
</tr>
<tr>
<td>void</td>
<td>remove(y)</td>
<td><code>NR(x, y, &quot;xtoy*&quot;)</code></td>
</tr>
</tbody>
</table>
<h3 id="methods-on-class-y-2">Methods on class Y</h3>
<p>None.</p>
<h3 id="notes-2">Notes:</h3>
<ol>
<li>Notice that the relationshipId has a <code>*</code> symbol in it.  This means that you can add multiple relationships of that type without the relationship manager removing the prior relationship. Not sure which of my Relationship Manager implementations auto-support this - its been so long ago&hellip;</li>
</ol>
<h2 id="one-to-many-with-back-pointers">One to many, with back pointers</h2>
<p><img src="http://www.atug.com/andypatterns/images/rm_the4.gif" alt=""></p>
<h3 id="methods-on-class-x-3">Methods on class X</h3>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Example method name</th>
<th>Implementation in RM</th>
</tr>
</thead>
<tbody>
<tr>
<td>void</td>
<td>add(y)</td>
<td><code>R(x, y, &quot;xtoy*&quot;)</code></td>
</tr>
<tr>
<td>list</td>
<td>getAll()</td>
<td><code>PS(x, &quot;xtoy*&quot;)</code></td>
</tr>
<tr>
<td>void</td>
<td>remove(y)</td>
<td><code>NR(x, y, &quot;xtoy*&quot;)</code></td>
</tr>
</tbody>
</table>
<h3 id="methods-on-class-y-3">Methods on class Y</h3>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Example method name</th>
<th>Implementation in RM</th>
</tr>
</thead>
<tbody>
<tr>
<td>X</td>
<td>getBackPointer()</td>
<td><code>B(y, &quot;xtoy*&quot;)</code></td>
</tr>
</tbody>
</table>
<p><em>and optionally setter methods &hellip;</em></p>
<table>
<thead>
<tr>
<th>Returns</th>
<th>Example method name</th>
<th>Implementation in RM</th>
</tr>
</thead>
<tbody>
<tr>
<td>void</td>
<td>setBackPointer(x)</td>
<td><code>R(x, y, &quot;xtoy*&quot;)</code><br> <em>or simply call <code>x.setPointer(this)</code></em></td>
</tr>
<tr>
<td>void</td>
<td>clearBackPointer()</td>
<td><code>NR(x, y, &quot;xtoy*&quot;)</code><br>_or simply call <code>x._clearPointer()</code>_</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="some-more-deep-theory">Some More Deep Theory</h1>
<p>Skip this section if you just want to get on with coding&hellip; 😉</p>
<h3 id="all-possible-relationship-scenarios">All possible relationship scenarios?</h3>
<p>When looking at all the possibiliteis of relationships between two classes, you get <strong>one to one, one to many, many to one</strong> and <strong>many to many</strong>.  You have the variations generated by whether the relationships are <strong>directional</strong> or **bi-directional. ** Finally, you have variations of whether you put methods on one class or the other - for example, you could omit methods on e.g. the rhs. class, or you could go to the other extreme and provide a full range of methods on the rhs. class. </p>
<p>Note that some combinatorial possibilities do not make sense and are left out of the table below. </p>
<ul>
<li><code>S</code> means <strong>singular</strong> <strong>API</strong> - this makes sense for one to one relationships, or the many side (ironically) of one to many relationships.  It consists of methods like <strong>get, set, clear</strong>.</li>
<li><code>P</code> means <strong>plural</strong> <strong>API</strong>- this makes sense where you are dealing with collections, a <em>many</em> concept.  It consists of methods like <strong>add, remove, getall</strong>.</li>
<li><code>-</code>   means no methods relating to the relationship have been implemented on that class.</li>
</ul>
<p>Blank cells mean &ldquo;not applicable&rdquo;.</p>
<table>
<thead>
<tr>
<th><a href="#UsageTemplates">Scenario</a> (see above)</th>
<th>directional</th>
<th>bi-directional</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>_one to one_<br><code>1 --&gt; 1</code></td>
<td>_one to one_<br><code>1 &lt;--&gt; 1</code></td>
</tr>
<tr>
<td>#1.</td>
<td>S       -</td>
<td> </td>
</tr>
<tr>
<td>#2.</td>
<td>-       S</td>
<td> </td>
</tr>
<tr>
<td>#3.</td>
<td> </td>
<td>S        S</td>
</tr>
<tr>
<td>#3A.<br> (composite, pointing to self)</td>
<td>S</td>
<td></td>
</tr>
<tr>
<td></td>
<td>_one to many_<br><code>1 --&gt; *</code></td>
<td>_one to many_<br><code>1 &lt;--&gt; *</code></td>
</tr>
<tr>
<td>#4.</td>
<td>P      -</td>
<td> </td>
</tr>
<tr>
<td>#5.</td>
<td> </td>
<td>P       S</td>
</tr>
<tr>
<td></td>
<td>_many to one_<br><code>* --&gt; 1</code></td>
<td>_many to one_<br><code>* &lt;--&gt; 1</code></td>
</tr>
<tr>
<td>#6.</td>
<td>-       P</td>
<td> </td>
</tr>
<tr>
<td>#7.</td>
<td> </td>
<td>S         P</td>
</tr>
<tr>
<td></td>
<td>_many to many_<br><code>* --&gt; *</code></td>
<td>_many to many_<br><code>* &lt;--&gt; *</code></td>
</tr>
<tr>
<td>#8.</td>
<td>P      -</td>
<td></td>
</tr>
<tr>
<td>#9.</td>
<td>-      P</td>
<td> </td>
</tr>
<tr>
<td>#10.</td>
<td> </td>
<td>P       P</td>
</tr>
</tbody>
</table>
<p><em>An attempt at mapping the theoretical relationship possibilities</em></p>
<p>The above table shows all the possible relationship scenarios between two classes.  It indicates various possibilities as to the methods you can add to either class.  For example a one to many relationship where the &ldquo;many&rdquo; side has no need of any methods to see who is pointing at it, would use template 4.</p>
<h3 id="interesting-addendem">Interesting Addendem</h3>
<iframe src="/files/rm-one to one and many maps 01.html" name="frame1" scrolling="yes" frameborder="yes" align="center" height = "842px" width = "800">
</iframe>
<h3 id="bi-directional-implementations-of-directional-relationships">Bi-directional implementations of directional relationships</h3>
<p>We must distinguish between a relationship that in its meaning, goes both ways, and a relationship which goes one way only.  And furthermore, implementationally, you can have RM methods on one class only, on the other class only, or on both classes.  The meaning of the relationship and the implementation (methods to create and look up those relationships) are two different things!</p>
<p>Thus when you put an API (relationship manager methods) on both classes this might seem to imply that you are implementing bi-directionality.  However this does not mean that the &ldquo;relationship&rdquo; points in both directions.  The meaning of the relationship is often in one direction only, and the existence of methods on both classes merely gives you a convenient way of querying the relationships that exist.</p>
<p>Thus the same relationship id should be used in both classes e.g. <code>&quot;xtoy&quot;</code> (notice the sense of directionality is built into the name of the relationship!), even though it is a bidirectional relationship in the sense that there is an API on both classes allowing each class to find the other class.  In the following implementation of a one to many relationship between class X and class Y, notice the same relationship id <code>&quot;xtoy&quot;</code> must be used in both classes.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">X</span><span style="color:#000;font-weight:bold">:</span>  
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">__init__</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>        <span style="color:#000">RM</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">ER</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;xtoy&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;onetomany&#34;</span><span style="color:#000;font-weight:bold">,</span>   
                                     <span style="color:#4e9a06">&#34;bidirectional&#34;</span><span style="color:#000;font-weight:bold">)</span>  
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">addY</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">y</span><span style="color:#000;font-weight:bold">):</span> <span style="color:#000">RM</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">R</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">y</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;xtoy&#34;</span><span style="color:#000;font-weight:bold">)</span>  
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">getAllY</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>  <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">RM</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">PS</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;xtoy&#34;</span><span style="color:#000;font-weight:bold">)</span>  
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">removeY</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">y</span><span style="color:#000;font-weight:bold">):</span>      <span style="color:#000">RM</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">NR</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">y</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;xtoy&#34;</span><span style="color:#000;font-weight:bold">)</span>  
    

<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Y</span><span style="color:#000;font-weight:bold">:</span>  
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">setX</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">x</span><span style="color:#000;font-weight:bold">):</span> <span style="color:#000">RM</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">R</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">x</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;xtoy&#34;</span><span style="color:#000;font-weight:bold">)</span>  
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">getX</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>     <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">RM</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">P</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;xtoy&#34;</span><span style="color:#000;font-weight:bold">)</span>  
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">clearX</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>          <span style="color:#000">RM</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">NR</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">getX</span><span style="color:#000;font-weight:bold">(),</span> <span style="color:#4e9a06">&#34;xtoy&#34;</span><span style="color:#000;font-weight:bold">)</span>  
</code></pre></div><h3 id="more-on-directionality-and-backpointers">More on Directionality and Backpointers</h3>
<p>Relationships are here considered directional.  So when you add a relationship with R(a,b) then <strong>a</strong> points to <strong>b</strong>.</p>
<p>Using a relationship manager you can get it deduce who is pointing at you, which means you get &lsquo;back-references&rsquo; for free.  However being able to determine a back-reference doesn&rsquo;t mean that the model you are building <em>officially</em> has this pointer connection.  Thus we must distinguish official pointers from deducible back references / back pointers. </p>
<p>To find what <strong>a</strong> points to, use P(a).  To find out what is pointing at <strong>b</strong>, use B(b).  </p>
<table>
<thead>
<tr>
<th align="center">API Short-hand</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">P(a)</td>
<td>Find Pointer From</td>
</tr>
<tr>
<td align="center">B(b)</td>
<td>Find Back Reference To</td>
</tr>
</tbody>
</table>
<p>Thus, just because you point at something doesn&rsquo;t mean it is officially pointing back at you. But, using a relationship manager you can deduce who is pointing at you.</p>
<p>So if&hellip;</p>
<table>
<thead>
<tr>
<th align="center">API Short-hand</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">R(a,b)</td>
<td>if you make <strong>a</strong> point to <strong>b</strong></td>
</tr>
</tbody>
</table>
<p>then&hellip;</p>
<table>
<thead>
<tr>
<th align="center">API Short-hand</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">P(a) == b</td>
<td><strong>a</strong> points to <strong>b</strong></td>
</tr>
<tr>
<td align="center">B(b) == a</td>
<td>the thing pointing at <strong>b</strong> is <strong>a</strong></td>
</tr>
<tr>
<td align="center">P(b) == null</td>
<td><strong>b</strong> doesn&rsquo;t point at anything<br> <em>(crucial distinction - see above line).</em></td>
</tr>
<tr>
<td align="center">B(a) == null</td>
<td>nothing is pointing back at <strong>a</strong></td>
</tr>
</tbody>
</table>
<h3 id="more-on-backpointers">More on Backpointers</h3>
<p>Backpointers are pointers on the &ldquo;receiving end&rdquo; of a relationship, so that the receiving object knows who is pointing at it.  For example when a Customer places an Order, it might be convenient for any particular order instance to know which customer ordered it.  I think you can choose to conceive of the backpointer in a few different ways:</p>
<ul>
<li>as an extra, separate relationship or</li>
<li>as part of the one bidirectional relationship or</li>
<li>merely a convenience method in the implementation in the r.h.s. class</li>
</ul>
<p>The easiest way of implementing this backpointer without using relationship manager is to follow the Martin Fowler refactoring technique - see Martin Fowler &lsquo;Refactorings&rsquo; p. 197 &ldquo;Change Unidirectional Association to Bidirectional&rdquo; - this will ensure you get the wiring correct.  In this refactoring, you decide which class is the master and which is the slave etc.  See the before and after python pdf below for an example of the correct wiring.</p>
<p>The way of implementing a backpointer using relationship manager is simply to call the <strong>findObjectPointingToMe(toMe, id)</strong> method.  Since a RM holds all relationships, it can answer lots of questions for free - just like SQL queries to a database.  See the before and after python pdf below for an example of using findObjectPointingToMe().</p>
<h3 id="before-and-after---modeling-composite-design-pattern-in-python">Before and After - Modeling Composite Design Pattern  in Python</h3>
<p>The following <a href="http://www.atug.com/andypatterns/code/proxydecorator01.zip">code</a> is a good example of how the use of RM saves you from having to explicitly maintain backpointers. P.S. To run the code you also need the support files found <a href="http://www.atug.com/downloads/pythonRmProof.zip">here</a>.  View the code below (requires the flash plugin) - showing an implementation of a Composite Pattern, with back pointer - or simply read the <a href="http://www.atug.com/downloads/rm_annotation_by_ANDY_01.PDF">pdf</a> directly.</p>
<iframe src="/files/rm_annotation_by_ANDY_01.html" name="frame1" scrolling="yes" frameborder="yes" align="center" height = "842px" width = "800">
</iframe>
<h2 id="a-concrete-example">A concrete example</h2>
<p>This example uses the Boo .NET assembly, which is quite usable from other .NET langauges like C# and VB.NET etc.  Alternatively you can adapt this example to use the pure C# implementation assembly (something I should publish here at some stage).</p>
<p>Say you want to model a Person class which has one or more Orders.  The Orders class has a backpointer back to the Person owning it.</p>
<p><img src="http://www.atug.com/andypatterns/images/PersonToOrderUsingRM001.gif" alt=""></p>
<p>Instead of hand coding and reinventing techniques for doing all the AddOrder() methods and GetOrders() methods etc. using ArrayLists and whatever, we can do it using the relationship manager object instead, which turns out to be simpler and faster and less error prone. </p>
<p>The RM (relationship manager) is implemented in this particular example as a static member of the base BO (business object) class.  Thus in this situation all business objects will be using the same relationship manager.</p>
<p>Here is the c# code to implement the above UML:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c#" data-lang="c#"><span style="color:#204a87;font-weight:bold">using</span> <span style="color:#000">System</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#204a87;font-weight:bold">using</span> <span style="color:#000">System.Collections</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#204a87;font-weight:bold">using</span> <span style="color:#000">RelationshipManager55</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#204a87;font-weight:bold">namespace</span> <span style="color:#000">WindowsApplicationUsing</span><span style="color:#a40000">\</span><span style="color:#000">_RelationshipManagerDllTest001</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#8f5902;font-style:italic">///   
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// BO is the base Business Object class which holds a single static reference  
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// to a relationship manager. This one relationship manager is  
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// used for managing all the relationships between Business Objects.  
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///   
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">BO</span> <span style="color:#8f5902;font-style:italic">// Base business object  
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#204a87;font-weight:bold">protected</span> <span style="color:#000">RM1</span> <span style="color:#000">RM</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">RM1</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#000;font-weight:bold">}</span>

  <span style="color:#8f5902;font-style:italic">///   
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Person class points to one or more orders.  
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Implemented using a relationship manager rather   
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// than via pointers and arraylists etc.  
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///   
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Person</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">BO</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#000">Person</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">RM</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ER</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;p-&gt;o&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;onetomany&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;bidirectional&#34;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Person</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">string</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">name</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#000">ToString</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#4e9a06">&#34;Person: &#34;</span> <span style="color:#000;font-weight:bold">+</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">name</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">AddOrder</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Order</span> <span style="color:#000">o</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">RM</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">R</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">o</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;p-&gt;o&#34;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">RemoveOrder</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Order</span> <span style="color:#000">o</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">RM</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NR</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">o</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;p-&gt;o&#34;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">IList</span> <span style="color:#000">GetOrders</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">RM</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">PS</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;p-&gt;o&#34;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">}</span>

  <span style="color:#8f5902;font-style:italic">///   
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Order class points back to the person holding the order.  
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Implemented using a relationship manager rather             /// than via pointers and arraylists etc.  
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///   
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Order</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">BO</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#000">description</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Order</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">string</span> <span style="color:#000">description</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">description</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000">description</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">override</span> <span style="color:#204a87;font-weight:bold">string</span> <span style="color:#000">ToString</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#4e9a06">&#34;Order Description: &#34;</span> <span style="color:#000;font-weight:bold">+</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">description</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">SetPerson</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Person</span> <span style="color:#000">p</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">RM</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">R</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">p</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;p-&gt;o&#34;</span><span style="color:#000;font-weight:bold">);</span> <span style="color:#8f5902;font-style:italic">// though mapping is bidirectional,  
</span><span style="color:#8f5902;font-style:italic"></span>      <span style="color:#000">there</span> <span style="color:#204a87;font-weight:bold">is</span> <span style="color:#000">still</span> <span style="color:#000">a</span> <span style="color:#000">primary</span> <span style="color:#000">relationship</span> <span style="color:#000">direction</span> <span style="color:#000;font-weight:bold">!</span>

    <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#000">Person</span> <span style="color:#000">GetPerson</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">Person</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000">RM</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">P</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;p-&gt;o&#34;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">ClearPerson</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">RM</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">NR</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">GetPerson</span><span style="color:#000;font-weight:bold">(),</span> <span style="color:#4e9a06">&#34;p-&gt;o&#34;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">}</span>

<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p>Here is the project source code <a href="http://www.atug.com/downloads/RmBooNet/WindowsApplicationUsing%20RelationshipManagerDllTest001.rar">WindowsApplicationUsing RelationshipManagerDllTest001.rar</a> </p>
<h3 id="future-directions">Future Directions</h3>
<p>A generics version of relationship manager would be cool - that way no casting would be required. Presently all calls to relationship manager return objects - which you have to cast to the specific type you actually have stored.</p>
<h2 id="resources">Resources</h2>
<p>See <a href="http://www.andypatterns.com/index.php?cID=44">original andypatterns page</a></p>

	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://github.com/USERNAME/REPOSITORY/issues/new">tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="https://github.com/USERNAME/REPOSITORY/issues/new">tell us how we can improve</a>.
</p>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified October 9, 2020: <a  href="https://github.com/google/docsy-example/commit/195fdf35a56919da4e67d4cf63ee58803a63c91d">moved patterns articles into projects not blog (195fdf3)</a>
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User mailing list" aria-label="User mailing list">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://example.org/mail">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://example.org/twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://example.org/stack">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://github.com/google/docsy">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://example.org/slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Developer mailing list" aria-label="Developer mailing list">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://example.org/mail">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2020 The Docsy Authors All Rights Reserved</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank">Privacy Policy</a></small>
	
		<p class="mt-2"><a href="/about/">About Goldydocs</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>













<script src="/js/main.min.460c8ae21829f9b330823a08f34ac961d7d0daa8874c8c9eba7ea0484bb42a79.js" integrity="sha256-RgyK4hgp&#43;bMwgjoI80rJYdfQ2qiHTIyeun6gSEu0Knk=" crossorigin="anonymous"></script>



  </body>
</html>