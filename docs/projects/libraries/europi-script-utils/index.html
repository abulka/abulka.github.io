<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>EuroPi - Andy&#39;s Utility Classes | Andy Bulka</title>
<meta name="description" content="Introduction My Trigger to Gate script for EuroPi uses some utility functions I developed, that might be useful for other EuroPi scripts:
KnobWithHysteresis KnobWithPassThrough Scheduler Rather than each EuroPi script inventing its own hyseresis mitigation and knob pass-through logic etc., these utility classes can be used by any EuroPi script that needs them.
You can install them into the lib/contrib/experimental directory of the EuroPi software, or in a separate lib/contrib/utils directory.">
<meta property="og:url" content="https://abulka.github.io/projects/libraries/europi-script-utils/">
  <meta property="og:site_name" content="Andy Bulka">
  <meta property="og:title" content="EuroPi - Andy&#39;s Utility Classes">
  <meta property="og:description" content="Introduction My Trigger to Gate script for EuroPi uses some utility functions I developed, that might be useful for other EuroPi scripts:
KnobWithHysteresis KnobWithPassThrough Scheduler Rather than each EuroPi script inventing its own hyseresis mitigation and knob pass-through logic etc., these utility classes can be used by any EuroPi script that needs them.
You can install them into the lib/contrib/experimental directory of the EuroPi software, or in a separate lib/contrib/utils directory.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="projects">
    <meta property="article:modified_time" content="2024-06-03T10:19:40+10:00">
    <meta property="article:tag" content="Software Product">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Eurorack">
    <meta property="article:tag" content="Raspberry Pi">

  <meta itemprop="name" content="EuroPi - Andy&#39;s Utility Classes">
  <meta itemprop="description" content="Introduction My Trigger to Gate script for EuroPi uses some utility functions I developed, that might be useful for other EuroPi scripts:
KnobWithHysteresis KnobWithPassThrough Scheduler Rather than each EuroPi script inventing its own hyseresis mitigation and knob pass-through logic etc., these utility classes can be used by any EuroPi script that needs them.
You can install them into the lib/contrib/experimental directory of the EuroPi software, or in a separate lib/contrib/utils directory.">
  <meta itemprop="dateModified" content="2024-06-03T10:19:40+10:00">
  <meta itemprop="wordCount" content="2379">
  <meta itemprop="keywords" content="Software Product,Python,Eurorack,Raspberry Pi">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="EuroPi - Andy&#39;s Utility Classes">
  <meta name="twitter:description" content="Introduction My Trigger to Gate script for EuroPi uses some utility functions I developed, that might be useful for other EuroPi scripts:
KnobWithHysteresis KnobWithPassThrough Scheduler Rather than each EuroPi script inventing its own hyseresis mitigation and knob pass-through logic etc., these utility classes can be used by any EuroPi script that needs them.
You can install them into the lib/contrib/experimental directory of the EuroPi software, or in a separate lib/contrib/utils directory.">




<link rel="preload" href="/scss/main.min.14fa15fc58c12d37d276ddf7a238d2028bfd61a7cc9685a90604de3b79d28104.css" as="style">
<link href="/scss/main.min.14fa15fc58c12d37d276ddf7a238d2028bfd61a7cc9685a90604de3b79d28104.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X0GNQ7330T"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-X0GNQ7330T');
}
</script>
  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">Andy Bulka</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/blog/"><span>Blog</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/projects/"><span>Projects</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/patterns/"><span>My Design Patterns</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/about/"><span>About</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.d4f2aec8b481c67e19b943056bc15724.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.d4f2aec8b481c67e19b943056bc15724.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-projects-li">
  <a href="/projects/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-projects"><span class="">Projects</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-projectsapps-li">
  <a href="/projects/apps/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-projectsapps"><span class="">Apps</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectsappspynsource-li">
  <a href="/projects/apps/pynsource/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectsappspynsource"><span class="">Pynsource</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectsappsai-images-manager-li">
  <a href="/projects/apps/ai-images-manager/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectsappsai-images-manager"><span class="">AI Image Browser</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectsappsbrew-moments-li">
  <a href="/projects/apps/brew-moments/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectsappsbrew-moments"><span class="">Brew Moments</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectsappsprint42-li">
  <a href="/projects/apps/print42/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectsappsprint42"><span class="">Print42</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectsappsprophet-6-librarian-li">
  <a href="/projects/apps/prophet-6-librarian/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectsappsprophet-6-librarian"><span class="">Prophet 6 Librarian</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-projectsbig-ideas-li">
  <a href="/projects/big-ideas/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-projectsbig-ideas"><span class="">Big Ideas</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectsbig-ideaslcodemaps-li">
  <a href="/projects/big-ideas/lcodemaps/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectsbig-ideaslcodemaps"><span class="">Literate Code Mapping</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectsbig-ideasmedium-articles-li">
  <a href="/projects/big-ideas/medium-articles/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectsbig-ideasmedium-articles"><span class="">Medium Articles</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-projectslibraries-li">
  <a href="/projects/libraries/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-projectslibraries"><span class="">Libraries &amp; Tools</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectslibrariesdedent-dart-li">
  <a href="/projects/libraries/dedent-dart/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectslibrariesdedent-dart"><span class="">Dedent for Dart</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectslibrarieselectron-flask-app-gen-li">
  <a href="/projects/libraries/electron-flask-app-gen/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectslibrarieselectron-flask-app-gen"><span class="">Electron-Flask App Generator</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectslibrarieseuropi-trigger-to-gate-li">
  <a href="/projects/libraries/europi-trigger-to-gate/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectslibrarieseuropi-trigger-to-gate"><span class="">EuroPi - Trigger to Gate</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-projectslibrarieseuropi-script-utils-li">
  <a href="/projects/libraries/europi-script-utils/" title="EuroPi - Andy&#39;s Utility Classes" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-projectslibrarieseuropi-script-utils"><span class="td-sidebar-nav-active-item">EuroPi - Utility Classes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectslibrariesimage-presenter-li">
  <a href="/projects/libraries/image-presenter/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectslibrariesimage-presenter"><span class="">Image Presenter</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectslibrariesjupyter-notebook-tools-li">
  <a href="/projects/libraries/jupyter-notebook-tools/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectslibrariesjupyter-notebook-tools"><span class="">Jupyter Notebook Tools</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectslibrariesrelationship-manager-li">
  <a href="/projects/libraries/relationship-manager/" title="Relationship Manager for Python 3" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectslibrariesrelationship-manager"><span class="">Relationship Manager</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectslibrariessnippet-creator-li">
  <a href="/projects/libraries/snippet-creator/" title="Snippet Creator" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectslibrariessnippet-creator"><span class="">Snippet Creator - Vscode</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectslibrariessnippets-explorer-li">
  <a href="/projects/libraries/snippets-explorer/" title="Snippets Explorer" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectslibrariessnippets-explorer"><span class="">Snippets Explorer - Vscode</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-projectswebsites-li">
  <a href="/projects/websites/" title="Websites" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-projectswebsites"><span class="">Web Apps</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectswebsiteschordjammer-li">
  <a href="/projects/websites/chordjammer/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectswebsiteschordjammer"><span class="">Chord Jammer</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectswebsitesgituml-li">
  <a href="/projects/websites/gituml/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectswebsitesgituml"><span class="">GitUML</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectswebsitesrpn-calcs-li">
  <a href="/projects/websites/rpn-calcs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectswebsitesrpn-calcs"><span class="">Javascript RPN calculators</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectswebsitespyrpn-li">
  <a href="/projects/websites/pyrpn/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectswebsitespyrpn"><span class="">Python to RPN</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectswebsitesrationale-li">
  <a href="/projects/websites/rationale/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectswebsitesrationale"><span class="">Rationale</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-projectswebsitestoolback-li">
  <a href="/projects/websites/toolback/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-projectswebsitestoolback"><span class="">Toolback</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/abulka/abulka.github.io/tree/main/content/projects/libraries/europi-script-utils.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/abulka/abulka.github.io/edit/main/content/projects/libraries/europi-script-utils.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/abulka/abulka.github.io/new/main/content/projects/libraries?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/abulka/abulka.github.io/issues/new?title=EuroPi%20-%20Andy%27s%20Utility%20Classes" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/abulka/abulka.github.io/issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  
</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#introduction">Introduction</a></li>
        <li><a href="#class-knobwithhysteresis">class KnobWithHysteresis</a></li>
        <li><a href="#class-knobwithpassthrough">class KnobWithPassThrough</a></li>
        <li><a href="#class-scheduler">class Scheduler</a></li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            <div class="taxonomy taxonomy-terms-cloud taxo-tags">
      <h5 class="taxonomy-title">Tag Cloud</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/ai/" data-taxonomy-term="ai"><span class="taxonomy-label">AI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/argument-mapping/" data-taxonomy-term="argument-mapping"><span class="taxonomy-label">Argument Mapping</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/async/" data-taxonomy-term="async"><span class="taxonomy-label">Async</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/calculators/" data-taxonomy-term="calculators"><span class="taxonomy-label">Calculators</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/chords/" data-taxonomy-term="chords"><span class="taxonomy-label">Chords</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/code-translation/" data-taxonomy-term="code-translation"><span class="taxonomy-label">Code Translation</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/composition/" data-taxonomy-term="composition"><span class="taxonomy-label">Composition</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/controllers/" data-taxonomy-term="controllers"><span class="taxonomy-label">Controllers</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/dart/" data-taxonomy-term="dart"><span class="taxonomy-label">Dart</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/design-patterns/" data-taxonomy-term="design-patterns"><span class="taxonomy-label">Design Patterns</span><span class="taxonomy-count">23</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/dev-ops/" data-taxonomy-term="dev-ops"><span class="taxonomy-label">Dev Ops</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/diagramming/" data-taxonomy-term="diagramming"><span class="taxonomy-label">Diagramming</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/django/" data-taxonomy-term="django"><span class="taxonomy-label">Django</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/electron/" data-taxonomy-term="electron"><span class="taxonomy-label">Electron</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/eurorack/" data-taxonomy-term="eurorack"><span class="taxonomy-label">Eurorack</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/flask/" data-taxonomy-term="flask"><span class="taxonomy-label">Flask</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/flutter/" data-taxonomy-term="flutter"><span class="taxonomy-label">Flutter</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/fultter/" data-taxonomy-term="fultter"><span class="taxonomy-label">Fultter</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/google-colab/" data-taxonomy-term="google-colab"><span class="taxonomy-label">Google Colab</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/gui/" data-taxonomy-term="gui"><span class="taxonomy-label">GUI</span><span class="taxonomy-count">10</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/image-presentation/" data-taxonomy-term="image-presentation"><span class="taxonomy-label">Image Presentation</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/java/" data-taxonomy-term="java"><span class="taxonomy-label">Java</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/javascript/" data-taxonomy-term="javascript"><span class="taxonomy-label">Javascript</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/jupyter/" data-taxonomy-term="jupyter"><span class="taxonomy-label">Jupyter</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/jupyter-notebook/" data-taxonomy-term="jupyter-notebook"><span class="taxonomy-label">Jupyter Notebook</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/libraries/" data-taxonomy-term="libraries"><span class="taxonomy-label">Libraries</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/midi/" data-taxonomy-term="midi"><span class="taxonomy-label">MIDI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/mind-mapping/" data-taxonomy-term="mind-mapping"><span class="taxonomy-label">Mind Mapping</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/music/" data-taxonomy-term="music"><span class="taxonomy-label">Music</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/mvc/" data-taxonomy-term="mvc"><span class="taxonomy-label">MVC</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/narrative/" data-taxonomy-term="narrative"><span class="taxonomy-label">Narrative</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/notation/" data-taxonomy-term="notation"><span class="taxonomy-label">Notation</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/object-database/" data-taxonomy-term="object-database"><span class="taxonomy-label">Object Database</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/observer/" data-taxonomy-term="observer"><span class="taxonomy-label">Observer</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/orm/" data-taxonomy-term="orm"><span class="taxonomy-label">ORM</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/philosophy/" data-taxonomy-term="philosophy"><span class="taxonomy-label">Philosophy</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/programmable/" data-taxonomy-term="programmable"><span class="taxonomy-label">Programmable</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/python/" data-taxonomy-term="python"><span class="taxonomy-label">Python</span><span class="taxonomy-count">22</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/raspberry-pi/" data-taxonomy-term="raspberry-pi"><span class="taxonomy-label">Raspberry Pi</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/reasoning/" data-taxonomy-term="reasoning"><span class="taxonomy-label">Reasoning</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/refactoring/" data-taxonomy-term="refactoring"><span class="taxonomy-label">Refactoring</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/ruby/" data-taxonomy-term="ruby"><span class="taxonomy-label">Ruby</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/software-product/" data-taxonomy-term="software-product"><span class="taxonomy-label">Software Product</span><span class="taxonomy-count">21</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/sql/" data-taxonomy-term="sql"><span class="taxonomy-label">SQL</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/string-manipulation/" data-taxonomy-term="string-manipulation"><span class="taxonomy-label">String Manipulation</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/thoughts/" data-taxonomy-term="thoughts"><span class="taxonomy-label">Thoughts</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/tools/" data-taxonomy-term="tools"><span class="taxonomy-label">Tools</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/ubuntu/" data-taxonomy-term="ubuntu"><span class="taxonomy-label">Ubuntu</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/ui-widgets/" data-taxonomy-term="ui-widgets"><span class="taxonomy-label">UI Widgets</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/uml/" data-taxonomy-term="uml"><span class="taxonomy-label">UML</span><span class="taxonomy-count">10</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/vscode-extension/" data-taxonomy-term="vscode-extension"><span class="taxonomy-label">Vscode Extension</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/vuejs/" data-taxonomy-term="vuejs"><span class="taxonomy-label">Vuejs</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/wxpython/" data-taxonomy-term="wxpython"><span class="taxonomy-label">WxPython</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/yeoman-generator/" data-taxonomy-term="yeoman-generator"><span class="taxonomy-label">Yeoman Generator</span><span class="taxonomy-count">1</span></a></li>
        </ul>
    </div>
  
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/projects/">Projects</a></li>
  <li class="breadcrumb-item">
    <a href="/projects/libraries/">Libraries &amp; Tools</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    EuroPi - Utility Classes</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>EuroPi - Andy&#39;s Utility Classes</h1>
	
	<header class="article-meta">
		<div class="taxonomy taxonomy-terms-article taxo-tags">
  <h5 class="taxonomy-title">Tags:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/software-product/" data-taxonomy-term="software-product"><span class="taxonomy-label">Software Product</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/python/" data-taxonomy-term="python"><span class="taxonomy-label">Python</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/eurorack/" data-taxonomy-term="eurorack"><span class="taxonomy-label">Eurorack</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/raspberry-pi/" data-taxonomy-term="raspberry-pi"><span class="taxonomy-label">Raspberry Pi</span></a></li>
    </ul>
</div>

  </header>
	<h3 id="introduction">Introduction</h3>
<p>My <a href="/projects/libraries/europi-trigger-to-gate">Trigger to Gate</a> script for <a href="https://github.com/Allen-Synthesis/EuroPi">EuroPi</a> uses some utility functions I developed, that might be useful for other EuroPi scripts:</p>
<ul>
<li>KnobWithHysteresis</li>
<li>KnobWithPassThrough</li>
<li>Scheduler</li>
</ul>
<p>Rather than each EuroPi script inventing its own hyseresis mitigation and knob pass-through logic etc., these utility classes can be used by any EuroPi script that needs them.</p>
<p>You can install them into the <code>lib/contrib/experimental</code> directory of the EuroPi software, or in a separate <code>lib/contrib/utils</code> directory. Indeed, you can put them wherever you want - even copy and paste the classes into the body of the EuroPi script you are developing.</p>
<h4 id="the-problems-these-utility-classes-solve">The problems these utility classes solve</h4>
<p><strong>Hysteresis Mitigation</strong></p>
<p>The term <a href="https://electronics.stackexchange.com/questions/266608/stable-output-from-a-potentiometer">hysteresis</a> refers to the problem of the knob value flickering when
the knob is not being turned. This is a common problem with rotary encoders and
can be mitigated by only accepting new values when the knob has been turned by a
certain amount. This is especially useful when you have a knob that is used to
set a value that is displayed on a screen, as in the Trigger to Gate script.</p>
<p>The knobs in my <a href="/projects/libraries/europi-trigger-to-gate">Trigger to Gate</a>
script use hysteresis mitigation which prevents the values flickering, even
though you are not turning the knob. There is a 1 second timeout when you can
dial in the exact value you want, then the knob value will &ldquo;lock&rdquo;. To unlock the
knob value, turn the knob past the threshold again.</p>
<p><strong>Pass-through knob values</strong></p>
<p>The term &ldquo;pass-through&rdquo; refers to the technique of enabling a parameter&rsquo;s value
only when the knob physical position passes through the existing value, which
prevents sudden jumps in values when you switch screen modes.</p>
<p>If knobs are used in two different modes, as they are in my <a href="/projects/libraries/europi-trigger-to-gate">Trigger to
Gate</a> script, we run into the
problem of the physical knob position not matching the last value of that mode,
when you switch between modes (between trigger to gate mode and clock mode, for
example). To solve this, the knobs use &ldquo;pass-through&rdquo; logic, which you may be
familiar with when loading presets into a hardware synthesiser.</p>
<p>If turning a knob doesn&rsquo;t change the value, it&rsquo;s because the knob is not yet
&ldquo;passed-through&rdquo; the current value. Simply turn the knob until it does change. For example,
if the existing value is 0 and your physical knob position is at &ldquo;5 o&rsquo;clock&rdquo; then you need to
turn the physical knob counter-clockwise until it passes through 0 and then clockwise again
to your required value.</p>
<p><strong>Scheduler</strong></p>
<p>When writing a EuroPi script, you may need to run tasks at a given time in the
future. For example, you may want to turn off a gate after a certain time, or
run a task every second. Most EuroPi scripts will have a simple while loop that
runs continuously, with various ad-hoc flags and variables managing the
behaviour inside the loop. This can get messy and hard to understand.</p>
<p>My scheduler class offers a more organised way of looping and scheduling tasks
to run at a given time in the future. A task is a function that you want to run
at a given time in the future, thus instead of having a while loop and global
variables, you have a function per task and a time to run it.</p>
<blockquote>
<p>Another potentially interesting way of managing tasks is to use a game inspired
<strong>Entity Component System</strong> loop, as I describe in my article <a href="/blog/2020/05/18/todomvc-implemented-using-a-game-architecture-ecs/">TodoMVC
implemented using a game architecture —
ECS</a>. I
leave that as an exercise for the future.</p>
</blockquote>
<p><u>Slow screen updates in EuroPi</u></p>
<p>Screen updates in EuroPi are a blocking operation and take a long time relative
to the <em>millisecond</em> level of activity of signals and interrupts. This means
incoming triggers can easily be missed and interrupts won&rsquo;t fire. The scheduler
class can help with this problem. For example, you can schedule to update the
screen at a regular interval, rather than updating the screen every time you
change a value. Even better, you can use the scheduler to update the screen only
when the value has changed, rather than every time through the loop. This is
accomplished by scheduling the screen update task only when needed, and ensure
that the screen update task function does not reschedule itself.</p>
<p>If you are not using the Scheduler class, you should use a flag to
indicate when the screen needs updating and only update the screen when the flag
is set.</p>
<blockquote>
<p><strong>NOTE:</strong> MicroPython async is supported on the Raspberry Pi Pico, and can
help with task management. However even when using async, there is only one
thread involved so you still need to be careful with blocking operations like
writing to the EuroPi screen.</p>
</blockquote>
<blockquote>
<p>Yes, there is a second thread available on the
Raspberry Pi Pico but MicroPython support for this feature is unreliable but
will hopefully will improve in the future (we have been hoping for this for a
long time though 2021-2024 and it is still a problem).</p>
</blockquote>
<p>The utility classes presented here do not use async, nor do they use the second
thread.</p>
<p>Here are the utility classes:</p>
<h3 id="class-knobwithhysteresis">class KnobWithHysteresis</h3>
<p>This is a class to cure the hysteresis problem with the rotary encoder knobs k1
and k2 of the EuroPi.</p>
<p>It is easy to use because you just wrap the knob in the class and it will
automatically mitigate the hysteresis problem. The knob will only change value
when you turn it by a certain amount, which you can set with the <code>tolerance</code>.</p>
<h5 id="usage">Usage</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">from</span> europi <span style="color:#ff79c6">import</span> k1, k2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>k1 <span style="color:#ff79c6">=</span> KnobWithHysteresis(k1)  <span style="color:#6272a4"># backwards compatible, no hyteresis mitigation</span>
</span></span><span style="display:flex;"><span>k1 <span style="color:#ff79c6">=</span> KnobWithHysteresis(k1, tolerance<span style="color:#ff79c6">=</span><span style="color:#bd93f9">2</span>)  <span style="color:#6272a4"># set tolerance to 2, hysteresis mitigation</span>
</span></span></code></pre></div><p>You can set any value within the <code>lock_delay</code> time period (an additional
constructor parameter that defaults to 1000ms) and it will be accepted but once
the <code>lock_delay</code> time period expires the value returned will be locked and you
have to move the knob by at least <code>tolerance</code> to change the value, at which
point the time period before re-locking is extended by <code>lock_delay</code> time
(defaults to 1s).</p>
<p>Starts locked on the first value it sees, to avoid jittery beginning values.</p>
<h5 id="code">Code:</h5>
<p>You can include this class in your EuroPi script to cure the hysteresis problem with the rotary encoder.
You can put the code in a separate file and import it into your script. e.g. <code>from knob_with_hysteresis import KnobWithHysteresis</code> where your <code>knob_with_hysteresis.py</code> file contains the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> utime
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">KnobWithHysteresis</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f1fa8c">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    This is a class to cure the hysteresis problem with the rotary encoder.
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, knob, tolerance<span style="color:#ff79c6">=</span><span style="color:#bd93f9">0</span>, lock_delay<span style="color:#ff79c6">=</span><span style="color:#bd93f9">1000</span>, name<span style="color:#ff79c6">=</span><span style="color:#ff79c6">None</span>) <span style="color:#ff79c6">-&gt;</span> <span style="color:#ff79c6">None</span>:
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>knob <span style="color:#ff79c6">=</span> knob
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>tolerance <span style="color:#ff79c6">=</span> tolerance
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>lock_delay <span style="color:#ff79c6">=</span> lock_delay
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>lock_time <span style="color:#ff79c6">=</span> utime<span style="color:#ff79c6">.</span>ticks_ms() <span style="color:#6272a4"># initially locked</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>name <span style="color:#ff79c6">=</span> name <span style="color:#ff79c6">if</span> name <span style="color:#ff79c6">else</span> <span style="color:#f1fa8c">&#34;unnamed&#34;</span> <span style="color:#6272a4"># for debugging</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>value <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>  <span style="color:#6272a4"># cached value when locked, when None the first reading is used even when locked</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @property
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">locked</span>(self):
</span></span><span style="display:flex;"><span>        now <span style="color:#ff79c6">=</span> utime<span style="color:#ff79c6">.</span>ticks_ms()
</span></span><span style="display:flex;"><span>        time_left <span style="color:#ff79c6">=</span> utime<span style="color:#ff79c6">.</span>ticks_diff(self<span style="color:#ff79c6">.</span>lock_time, now) <span style="color:#6272a4"># lock_time - now</span>
</span></span><span style="display:flex;"><span>        _time_expired <span style="color:#ff79c6">=</span> time_left <span style="color:#ff79c6">&lt;=</span> <span style="color:#bd93f9">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> _time_expired
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">_update_value_if_allowed</span>(self, new_value):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> self<span style="color:#ff79c6">.</span>value <span style="color:#ff79c6">is</span> <span style="color:#ff79c6">None</span> <span style="color:#ff79c6">or</span> self<span style="color:#ff79c6">.</span>_allow(self<span style="color:#ff79c6">.</span>value, new_value):
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>value <span style="color:#ff79c6">=</span> new_value
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> self<span style="color:#ff79c6">.</span>value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">_allow</span>(self, old_value, new_value):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> self<span style="color:#ff79c6">.</span>tolerance <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">0</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">True</span>  <span style="color:#6272a4"># backwards compatibility</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">not</span> self<span style="color:#ff79c6">.</span>locked:
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">True</span>  <span style="color:#6272a4"># allow any value to get in</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4"># at this point the lock_time has expired</span>
</span></span><span style="display:flex;"><span>        big_enough_change <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">abs</span>(old_value <span style="color:#ff79c6">-</span> new_value) <span style="color:#ff79c6">&gt;=</span> self<span style="color:#ff79c6">.</span>tolerance
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> big_enough_change:
</span></span><span style="display:flex;"><span>            now <span style="color:#ff79c6">=</span> utime<span style="color:#ff79c6">.</span>ticks_ms()
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>lock_time <span style="color:#ff79c6">=</span> now <span style="color:#ff79c6">+</span> self<span style="color:#ff79c6">.</span>lock_delay
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>locked_msg_shown_debug <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">False</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">choice</span>(self, <span style="color:#ff79c6">*</span>args):
</span></span><span style="display:flex;"><span>        new_value <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>knob<span style="color:#ff79c6">.</span>choice(<span style="color:#ff79c6">*</span>args)
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> self<span style="color:#ff79c6">.</span>_update_value_if_allowed(new_value)
</span></span></code></pre></div><blockquote>
<p>This class is a wrapper around the EuroPi Knob class (rather than inheriting), so if you need to call additional
<code>Knob</code> methods, or the methods of its superclass <code>AnalogueReader</code>, you can do so by declaring those methods here and
forwarding the calls to the wrapped Knob instance. Alternatively you can simply call the methods directly on the wrapped
<code>knob</code> instance. e.g. <code>k1_wrapped.knob.xxxxx</code>.</p>
</blockquote>
<h4 id="example">Example</h4>
<p>Wrapping a EuroPi k1 knob with the <code>KnobWithHysteresis</code> class:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#6272a4"># Wrap knobs in KnobWithHysteresis to avoid jitter.</span>
</span></span><span style="display:flex;"><span>self<span style="color:#ff79c6">.</span>k1_gate_length <span style="color:#ff79c6">=</span> KnobWithHysteresis(k1, tolerance<span style="color:#ff79c6">=</span><span style="color:#bd93f9">2</span>, name<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;k1_gate_length&#34;</span>)
</span></span><span style="display:flex;"><span>self<span style="color:#ff79c6">.</span>k2_gate_delay <span style="color:#ff79c6">=</span> KnobWithHysteresis(k2, tolerance<span style="color:#ff79c6">=</span><span style="color:#bd93f9">2</span>, name<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;k2_gate_delay&#34;</span>)
</span></span></code></pre></div><h3 id="class-knobwithpassthrough">class KnobWithPassThrough</h3>
<p>Disable changing value till knob is moved and &ldquo;passes-through&rdquo; the current cached value.
Useful for when you have a knob that is used in two different modes and you don&rsquo;t want
the value to jump when you switch modes (think recalling presets on a hardware synth).</p>
<p>The knob passthrough feature is also useful when you turn on your hardware
module and you want the knob value to be in the same position as when you turned
it off, and the knob has physically moved slightly, so your sound is unfortunately, different.</p>
<p>The knob value will initiallly lock to the initial_value parameter, which defaults to 50.
Moving the underlying knob by any amount will overwrite that initial_value. If pass-through
is enabled, then you will have to move the underlying knob &ldquo;through&rdquo; the initial value to
begin changing it.</p>
<p>Its actually easier to use than to explain!</p>
<h5 id="usage-1">Usage</h5>
<p>Simplest usage is to wrap a knob with this class, passing the initial value e.g.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">from</span> europi <span style="color:#ff79c6">import</span> k1, k2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>choices <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">list</span>(<span style="color:#8be9fd;font-style:italic">range</span>(<span style="color:#bd93f9">0</span>, <span style="color:#bd93f9">200</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>k <span style="color:#ff79c6">=</span> KnobWithPassThrough(k1, initial<span style="color:#ff79c6">=</span><span style="color:#bd93f9">50</span>)
</span></span><span style="display:flex;"><span>val <span style="color:#ff79c6">=</span> k<span style="color:#ff79c6">.</span>choice(choices)  <span style="color:#6272a4"># val will remain 50 until k1 is moved</span>
</span></span></code></pre></div><p>If you want k1 to control two different values depending on a mode, you need to
create two instances of this class, wrapping the same knob e.g.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">from</span> europi <span style="color:#ff79c6">import</span> k1, k2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>k_mode1 <span style="color:#ff79c6">=</span> KnobWithPassThrough(k1, initial<span style="color:#ff79c6">=</span><span style="color:#bd93f9">50</span>)
</span></span><span style="display:flex;"><span>k_mode2 <span style="color:#ff79c6">=</span> KnobWithPassThrough(k1, initial<span style="color:#ff79c6">=</span><span style="color:#bd93f9">100</span>)
</span></span></code></pre></div><p>Pass through requirement is initially turned off, and only activated when you have
&ldquo;switched modes&rdquo; and need the same knob to drive different values. You switch modes by
calling <code>mode_changed()</code> on the (KnobWithPassThrough) knob instance you are switching to.</p>
<p>When you switch modes e.g. as a result of a button press, you need to call <code>mode_changed()</code> on the
mode you are switching to, in order to tell it to use its cached value until physical knob
pass-through has ocurred e.g.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>@b2.handler_falling
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">def</span> <span style="color:#50fa7b">button_click</span>():
</span></span><span style="display:flex;"><span>    mode <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">if</span> mode <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">else</span> <span style="color:#bd93f9">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">if</span> mode <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">1</span>:
</span></span><span style="display:flex;"><span>        k_mode1<span style="color:#ff79c6">.</span>mode_changed()
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">elif</span> mode <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">2</span>:
</span></span><span style="display:flex;"><span>        k_mode2<span style="color:#ff79c6">.</span>mode_changed()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Read from the correct (KnobWithPassThrough) knob depending on mode</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Reading from the other modes&#39;s KnobWithPassThrough knob is undefined</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> mode <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">1</span>:
</span></span><span style="display:flex;"><span>    val <span style="color:#ff79c6">=</span> k_mode1<span style="color:#ff79c6">.</span>choice(choices)
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">elif</span> mode <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">2</span>:
</span></span><span style="display:flex;"><span>    val <span style="color:#ff79c6">=</span> k_mode2<span style="color:#ff79c6">.</span>choice(choices)
</span></span></code></pre></div><h5 id="code-1">Code:</h5>
<p>You can include this class in your EuroPi script to cure the knob pass-through problem with the rotary encoder.
You can put the code in a separate file and import it into your script. e.g. <code>from knob_with_pass_through import KnobWithPassThrough</code> where your <code>knob_with_pass_through.py</code> file contains the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">KnobWithPassThrough</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f1fa8c">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    Disable changing value till knob is moved and &#34;passes-through&#34; the current cached value.
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, knob, initial_value<span style="color:#ff79c6">=</span><span style="color:#bd93f9">50</span>) <span style="color:#ff79c6">-&gt;</span> <span style="color:#ff79c6">None</span>:
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>knob <span style="color:#ff79c6">=</span> knob
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>value <span style="color:#ff79c6">=</span> initial_value <span style="color:#6272a4"># cached value when locked</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>locked <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">False</span> <span style="color:#6272a4"># stay on value until the knob meets unlock condition</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>unlock_condition <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;any change&#39;</span>  <span style="color:#6272a4"># &#39;&lt;&#39; or &#39;&gt;&#39; or &#39;any change&#39;</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>locked_on_knob_value <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span> <span style="color:#6272a4"># remember knob value we initially locked on when setting to &#39;any change&#39;</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>recalc_pending <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">False</span> <span style="color:#6272a4"># unlock_condition needs recalculating</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">mode_changed</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4"># call this when switching to a new mode that uses the same underlying knob</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>recalc_pending <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">_recalc_pass_through_condition</span>(self, current_knob_value):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>locked <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>unlock_condition <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;&lt;&#39;</span> <span style="color:#ff79c6">if</span> current_knob_value <span style="color:#ff79c6">&gt;</span> self<span style="color:#ff79c6">.</span>value <span style="color:#ff79c6">else</span> <span style="color:#f1fa8c">&#39;&gt;&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">_has_passed_through</span>(self, value):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> self<span style="color:#ff79c6">.</span>unlock_condition <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;&lt;&#39;</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> value <span style="color:#ff79c6">&lt;=</span> self<span style="color:#ff79c6">.</span>value
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">elif</span> self<span style="color:#ff79c6">.</span>unlock_condition <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;&gt;&#39;</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> value <span style="color:#ff79c6">&gt;=</span> self<span style="color:#ff79c6">.</span>value
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">elif</span> self<span style="color:#ff79c6">.</span>unlock_condition <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;any change&#39;</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> value <span style="color:#ff79c6">!=</span> self<span style="color:#ff79c6">.</span>locked_on_knob_value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">_update_pass_through</span>(self, new_value):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> self<span style="color:#ff79c6">.</span>recalc_pending:
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>_recalc_pass_through_condition(new_value)
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>recalc_pending <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">False</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> self<span style="color:#ff79c6">.</span>locked_on_knob_value <span style="color:#ff79c6">is</span> <span style="color:#ff79c6">None</span>:
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>locked_on_knob_value <span style="color:#ff79c6">=</span> new_value
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>locked <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> self<span style="color:#ff79c6">.</span>value
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> self<span style="color:#ff79c6">.</span>locked <span style="color:#ff79c6">and</span> self<span style="color:#ff79c6">.</span>_has_passed_through(new_value):
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>locked <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> self<span style="color:#ff79c6">.</span>locked:
</span></span><span style="display:flex;"><span>            <span style="color:#6272a4"># return the cached value</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> self<span style="color:#ff79c6">.</span>value
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">else</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#6272a4"># pass through underlying knob new value, update cache</span>
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>value <span style="color:#ff79c6">=</span> new_value
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> self<span style="color:#ff79c6">.</span>value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">choice</span>(self, <span style="color:#ff79c6">*</span>args, <span style="color:#ff79c6">**</span>kwargs):
</span></span><span style="display:flex;"><span>        new_value <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>knob<span style="color:#ff79c6">.</span>choice(<span style="color:#ff79c6">*</span>args)
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> self<span style="color:#ff79c6">.</span>_update_pass_through(new_value)
</span></span></code></pre></div><h4 id="example-1">Example</h4>
<p>Wrapping a EuroPi k1 knob with the <code>KnobWithPassThrough</code> class:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#6272a4"># Wrap knobs in KnobWithPassThrough to prevent values jumping when toggling modes.</span>
</span></span><span style="display:flex;"><span>self<span style="color:#ff79c6">.</span>k1_gate_length <span style="color:#ff79c6">=</span> KnobWithPassThrough(k1, initial_value<span style="color:#ff79c6">=</span><span style="color:#bd93f9">200</span>)
</span></span><span style="display:flex;"><span>self<span style="color:#ff79c6">.</span>k2_gate_delay <span style="color:#ff79c6">=</span> KnobWithPassThrough(k2, initial_value<span style="color:#ff79c6">=</span><span style="color:#bd93f9">0</span>)
</span></span></code></pre></div><blockquote>
<p>Tip: You can wrap a knob with both <code>KnobWithHysteresis</code> and <code>KnobWithPassThrough</code> classes, if you need both features. E.g. <code>k1 = KnobWithHysteresis(KnobWithPassThrough(k1))</code>.</p>
</blockquote>
<h3 id="class-scheduler">class Scheduler</h3>
<p>A simple scheduler for running tasks at a given time in the future.</p>
<h5 id="usage-2">Usage</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> utime
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>s <span style="color:#ff79c6">=</span> Scheduler()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>s<span style="color:#ff79c6">.</span>schedule_task(some_function, ms<span style="color:#ff79c6">=</span><span style="color:#bd93f9">1000</span>)  <span style="color:#6272a4"># run some_function in 1 second</span>
</span></span><span style="display:flex;"><span>s<span style="color:#ff79c6">.</span>schedule_task(some_other_function, ms<span style="color:#ff79c6">=</span><span style="color:#bd93f9">2000</span>)  <span style="color:#6272a4"># run some_other_function in 2 seconds</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">while</span> s<span style="color:#ff79c6">.</span>enabled:
</span></span><span style="display:flex;"><span>    s<span style="color:#ff79c6">.</span>run_once()
</span></span><span style="display:flex;"><span>    utime<span style="color:#ff79c6">.</span>sleep_ms(<span style="color:#bd93f9">10</span>) <span style="color:#6272a4"># the lower this is, the more accurate the schedule will be</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">def</span> <span style="color:#50fa7b">some_function</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">print</span>(<span style="color:#f1fa8c">&#34;some_function called&#34;</span>)
</span></span><span style="display:flex;"><span>    s<span style="color:#ff79c6">.</span>schedule_task(some_function, ms<span style="color:#ff79c6">=</span><span style="color:#bd93f9">1000</span>)  <span style="color:#6272a4"># reschedule some_function to run in 1 second</span>
</span></span></code></pre></div><p>You can stop your loop using s.stop() which sets s.enabled to False,
or just interrupt it with Ctrl-C. Its really up to you how you implement the loop.</p>
<p>Callbacks can be any callable object, e.g. a function, a method, a lambda, etc.
No support for passing arguments to callbacks yet.</p>
<p>Implementation Note: MicroPython does not support methods having reference
equality (regular functions are ok) so we have to compare callbacks using the
callback&rsquo;s function name string rather than by the callback function object
itself.</p>
<h5 id="code-2">Code:</h5>
<p>You can include this class in your EuroPi script to run tasks at a given time in the future.
You can put the code in a separate file and import it into your script. e.g. <code>from scheduler import Scheduler</code> where your <code>scheduler.py</code> file contains the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> utime
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">Scheduler</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f1fa8c">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    A simple scheduler for running tasks at a given time in the future.
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>enabled <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>schedule <span style="color:#ff79c6">=</span> [] <span style="color:#6272a4"># list of tuples (time, callback, callback_func_name)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">add_task</span>(self, callback, ms:<span style="color:#8be9fd;font-style:italic">int</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">0</span>):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>schedule<span style="color:#ff79c6">.</span>append((utime<span style="color:#ff79c6">.</span>ticks_add(utime<span style="color:#ff79c6">.</span>ticks_ms(), ms), callback, callback<span style="color:#ff79c6">.</span>__name__))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">remove_task</span>(self, callback, must_be_found<span style="color:#ff79c6">=</span><span style="color:#ff79c6">False</span>):
</span></span><span style="display:flex;"><span>        to_remove <span style="color:#ff79c6">=</span> []
</span></span><span style="display:flex;"><span>        found <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">False</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">for</span> scheduled_time, cb, callback_func_name <span style="color:#ff79c6">in</span> self<span style="color:#ff79c6">.</span>schedule:
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">if</span> callback_func_name <span style="color:#ff79c6">==</span> callback<span style="color:#ff79c6">.</span>__name__:
</span></span><span style="display:flex;"><span>                to_remove<span style="color:#ff79c6">.</span>append((scheduled_time, cb, callback_func_name))
</span></span><span style="display:flex;"><span>                found <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">for</span> item <span style="color:#ff79c6">in</span> to_remove:
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>schedule<span style="color:#ff79c6">.</span>remove(item)
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> <span style="color:#ff79c6">not</span> found <span style="color:#ff79c6">and</span> must_be_found:
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd;font-style:italic">print</span>(<span style="color:#f1fa8c">f</span><span style="color:#f1fa8c">&#34;cannot remove task </span><span style="color:#f1fa8c">{</span>callback<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c"> viz. </span><span style="color:#f1fa8c">{</span>callback<span style="color:#ff79c6">.</span>__name__<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c"> from schedule&#34;</span>, <span style="color:#8be9fd;font-style:italic">len</span>(self<span style="color:#ff79c6">.</span>schedule), <span style="color:#f1fa8c">&#34;tasks in schedule&#34;</span>)
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>print_schedule()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">run_once</span>(self):
</span></span><span style="display:flex;"><span>        now <span style="color:#ff79c6">=</span> utime<span style="color:#ff79c6">.</span>ticks_ms()
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">for</span> scheduled_time, callback, _ <span style="color:#ff79c6">in</span> self<span style="color:#ff79c6">.</span>schedule:
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">if</span> utime<span style="color:#ff79c6">.</span>ticks_diff(scheduled_time, now) <span style="color:#ff79c6">&lt;=</span> <span style="color:#bd93f9">0</span>:
</span></span><span style="display:flex;"><span>                self<span style="color:#ff79c6">.</span>schedule<span style="color:#ff79c6">.</span>remove((scheduled_time, callback, _))
</span></span><span style="display:flex;"><span>                callback()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">stop</span>(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>enabled <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">print_schedule</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span>(<span style="color:#f1fa8c">&#39;  Schedule:&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">for</span> scheduled_time, callback, callback_func_name <span style="color:#ff79c6">in</span> self<span style="color:#ff79c6">.</span>schedule:
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd;font-style:italic">print</span>(<span style="color:#f1fa8c">f</span><span style="color:#f1fa8c">&#34;  </span><span style="color:#f1fa8c">{</span>callback_func_name<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c"> </span><span style="color:#f1fa8c">{</span>scheduled_time<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">&#34;</span>)
</span></span></code></pre></div><p>For fuller examples of how to use all these classes together, see my <a href="/projects/libraries/europi-trigger-to-gate">Trigger to Gate</a> script.</p>
<h3 id="summary">Summary</h3>
<ul>
<li><a href="/projects/libraries/europi-trigger-to-gate">Trigger to Gate</a> script, with gate delay feature and internal clock mode.</li>
<li><a href="/projects/libraries/europi-trigger-to-gate/#trigger-gate-delay">Trigger Gate Delay</a> script, without the clock mode functionality.</li>
<li><a href="/projects/libraries/europi-script-utils">Documentation</a> on my Scheduler, Hysteresis Mitigation and Knob Pass Through utility classes, which you can use in your own EuroPi scripts.</li>
</ul>

	<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div class="d-print-none">
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://github.com/abulka/abulka.github.io/issues/new">tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="https://github.com/abulka/abulka.github.io/issues/new">tell us how we can improve</a>.
</p>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof gtag !== 'function') return;
    gtag('event', 'page_helpful', {
      'event_category': 'Helpful',
      'event_label': window.location.pathname,
      'value': value
    });
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback( 100 );
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>
<br />
<div class="td-page-meta__lastmod">
  Last modified June 3, 2024: <a href="https://github.com/abulka/abulka.github.io/commit/6dc20279db83c206726ff7c0c934cc5635332364">europi table of variants (6dc2027)</a>
</div>

</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Twitter" aria-label="Twitter">
    <a target="_blank" rel="noopener" href="https://twitter.com/unjazz" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/abulka/abulka.github.io" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2025
    <span class="td-footer__authors">Andy Bulka</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span><span class="ms-2"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></span><p class="td-footer__about mt-2"><a href="/about/">About Andrew Bulka</a></p>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.69e2c1ae9320465ab10236d9ef752c6a4442c54b48b883b17c497b7c7d96a796.js" integrity="sha256-aeLBrpMgRlqxAjbZ73UsakRCxUtIuIOxfEl7fH2Wp5Y=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>