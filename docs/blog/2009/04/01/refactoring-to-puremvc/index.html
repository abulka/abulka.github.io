<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Refactoring to PureMVC | Andy Bulka</title>
<meta name="description" content="Let&amp;rsquo;s look at how to refactor an existing architecture to the PureMVC architecture. Your application requires that you display &amp;lsquo;model&amp;rsquo; data in some sort of UI &amp;lsquo;view&amp;rsquo;.
Introduction MVC Architectural Pattern I have long been fascinated by the MVC (Model View Controller) architectural pattern, first conceived in the 1960&amp;rsquo;s. What it promises, to those who can fathom its mysteries, is an orderly way of organising your application architecture. You define a de-coupled domain/business model that is oblivious to any GUI that might be displaying it.">
<meta property="og:url" content="https://abulka.github.io/blog/2009/04/01/refactoring-to-puremvc/">
  <meta property="og:site_name" content="Andy Bulka">
  <meta property="og:title" content="Refactoring to PureMVC">
  <meta property="og:description" content="Let’s look at how to refactor an existing architecture to the PureMVC architecture. Your application requires that you display ‘model’ data in some sort of UI ‘view’.
Introduction MVC Architectural Pattern I have long been fascinated by the MVC (Model View Controller) architectural pattern, first conceived in the 1960’s. What it promises, to those who can fathom its mysteries, is an orderly way of organising your application architecture. You define a de-coupled domain/business model that is oblivious to any GUI that might be displaying it.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2009-04-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2022-03-10T13:25:22+11:00">
    <meta property="article:tag" content="Design Patterns">
    <meta property="article:tag" content="GUI">
    <meta property="article:tag" content="MVC">
    <meta property="article:tag" content="Controllers">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="WxPython">

  <meta itemprop="name" content="Refactoring to PureMVC">
  <meta itemprop="description" content="Let’s look at how to refactor an existing architecture to the PureMVC architecture. Your application requires that you display ‘model’ data in some sort of UI ‘view’.
Introduction MVC Architectural Pattern I have long been fascinated by the MVC (Model View Controller) architectural pattern, first conceived in the 1960’s. What it promises, to those who can fathom its mysteries, is an orderly way of organising your application architecture. You define a de-coupled domain/business model that is oblivious to any GUI that might be displaying it.">
  <meta itemprop="datePublished" content="2009-04-01T00:00:00+00:00">
  <meta itemprop="dateModified" content="2022-03-10T13:25:22+11:00">
  <meta itemprop="wordCount" content="7014">
  <meta itemprop="keywords" content="Design Patterns,GUI,MVC,Controllers,Python,WxPython,Observer,Refactoring">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Refactoring to PureMVC">
  <meta name="twitter:description" content="Let’s look at how to refactor an existing architecture to the PureMVC architecture. Your application requires that you display ‘model’ data in some sort of UI ‘view’.
Introduction MVC Architectural Pattern I have long been fascinated by the MVC (Model View Controller) architectural pattern, first conceived in the 1960’s. What it promises, to those who can fathom its mysteries, is an orderly way of organising your application architecture. You define a de-coupled domain/business model that is oblivious to any GUI that might be displaying it.">




<link rel="preload" href="/scss/main.min.14fa15fc58c12d37d276ddf7a238d2028bfd61a7cc9685a90604de3b79d28104.css" as="style">
<link href="/scss/main.min.14fa15fc58c12d37d276ddf7a238d2028bfd61a7cc9685a90604de3b79d28104.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X0GNQ7330T"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-X0GNQ7330T');
}
</script>
  </head>
  <body class="td-page td-blog">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">Andy Bulka</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="/blog/"><span>Blog</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/projects/"><span>Projects</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/patterns/"><span>My Design Patterns</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/about/"><span>About</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.9f826bff6aa3fc74cd586360dec07dea.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.9f826bff6aa3fc74cd586360dec07dea.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-blog-li">
  <a href="/blog/" title="Andy&#39;s Blog" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-blog"><span class="">Blog</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20220211gui-showdown-li">
  <a href="/blog/2022/02/11/gui-showdown/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20220211gui-showdown"><span class="">GUI Showdown</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20220121history-of-this-blog-li">
  <a href="/blog/2022/01/21/history-of-this-blog/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20220121history-of-this-blog"><span class="">History of this Blog</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20200518todomvc-implemented-using-a-game-architecture-ecs-li">
  <a href="/blog/2020/05/18/todomvc-implemented-using-a-game-architecture-ecs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20200518todomvc-implemented-using-a-game-architecture-ecs"><span class="">TodoMVC implemented using a game architecture — ECS</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20200518todomvc-implemented-using-traditional-oo-controllers-and-events-li">
  <a href="/blog/2020/05/18/todomvc-implemented-using-traditional-oo-controllers-and-events/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20200518todomvc-implemented-using-traditional-oo-controllers-and-events"><span class="">TodoMVC implemented using traditional OO, Controllers and Events</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20190904django-view-logging-is-back-the-front-li">
  <a href="/blog/2019/09/04/django-view-logging-is-back-the-front/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20190904django-view-logging-is-back-the-front"><span class="">Django View logging is back-the-front</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20190406getting-wxpython-apps-into-the-ubuntu-app-store-li">
  <a href="/blog/2019/04/06/getting-wxpython-apps-into-the-ubuntu-app-store/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20190406getting-wxpython-apps-into-the-ubuntu-app-store"><span class="">Getting wxPython apps into the Ubuntu app store</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20190302asyncawait-for-wxpython-li">
  <a href="/blog/2019/03/02/async/await-for-wxpython/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20190302asyncawait-for-wxpython"><span class="">Async/await for wxPython</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20181003building-a-python-electron-app-li">
  <a href="/blog/2018/10/03/building-a-python-electron-app/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20181003building-a-python-electron-app"><span class="">Building a Python-Electron App</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20180601python-ast-parsing-li">
  <a href="/blog/2018/06/01/python-ast-parsing/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20180601python-ast-parsing"><span class="">Python AST Parsing</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20110406uml-layout-li">
  <a href="/blog/2011/04/06/uml-layout/" title="UML Layout" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20110406uml-layout"><span class="">UML Diagram Layout</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20110319mocking-in-ruby-li">
  <a href="/blog/2011/03/19/mocking-in-ruby/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20110319mocking-in-ruby"><span class="">Mocking in Ruby</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20110301cloning-directories-in-ruby-li">
  <a href="/blog/2011/03/01/cloning-directories-in-ruby/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20110301cloning-directories-in-ruby"><span class="">Cloning Directories in Ruby</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20101118ruby-vs-python-list-comprehensions-li">
  <a href="/blog/2010/11/18/ruby-vs-python-list-comprehensions/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20101118ruby-vs-python-list-comprehensions"><span class="">Ruby vs Python list comprehensions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-blog20090401refactoring-to-puremvc-li">
  <a href="/blog/2009/04/01/refactoring-to-puremvc/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-blog20090401refactoring-to-puremvc"><span class="td-sidebar-nav-active-item">Refactoring to PureMVC</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20090301puremvc-li">
  <a href="/blog/2009/03/01/puremvc/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20090301puremvc"><span class="">PureMVC</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20090212central-patterns-repository-li">
  <a href="/blog/2009/02/12/central-patterns-repository/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20090212central-patterns-repository"><span class="">Central Patterns Repository</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20090211netbeans-uml-li">
  <a href="/blog/2009/02/11/netbeans-uml/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20090211netbeans-uml"><span class="">Netbeans Uml</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20090122visualising-software-li">
  <a href="/blog/2009/01/22/visualising-software/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20090122visualising-software"><span class="">Visualising Software</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20080911state-pattern-in-flex-li">
  <a href="/blog/2008/09/11/state-pattern-in-flex/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20080911state-pattern-in-flex"><span class="">State Pattern in Flex</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20080305extract-composite-refactoring-li">
  <a href="/blog/2008/03/05/extract-composite-refactoring/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20080305extract-composite-refactoring"><span class="">Extract Composite Refactoring</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20071105thoughts-on-closures-li">
  <a href="/blog/2007/11/05/thoughts-on-closures/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20071105thoughts-on-closures"><span class="">Thoughts on Closures</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20070123teaching-23-patterns-li">
  <a href="/blog/2007/01/23/teaching-23-patterns/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20070123teaching-23-patterns"><span class="">Teaching 23 Patterns</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20060301tooled-composite-pattern-li">
  <a href="/blog/2006/03/01/tooled-composite-pattern/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20060301tooled-composite-pattern"><span class="">Tooled Composite Pattern</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20050701orm-pattern-li">
  <a href="/blog/2005/07/01/orm-pattern/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20050701orm-pattern"><span class="">ORM Pattern</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20050305swapping-implementations-li">
  <a href="/blog/2005/03/05/swapping-implementations/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20050305swapping-implementations"><span class="">Swapping Implementations</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20040805blackboard-pattern-li">
  <a href="/blog/2004/08/05/blackboard-pattern/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20040805blackboard-pattern"><span class="">Blackboard Pattern</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20021004null-object-pattern-li">
  <a href="/blog/2002/10/04/null-object-pattern/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20021004null-object-pattern"><span class="">Null Object Pattern</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20020904using-design-patterns-in-real-projects-li">
  <a href="/blog/2002/09/04/using-design-patterns-in-real-projects/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20020904using-design-patterns-in-real-projects"><span class="">Using Design Patterns in Real Projects</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-blog20000104patterns-modelmaker-beyond-li">
  <a href="/blog/2000/01/04/patterns-modelmaker-beyond/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-blog20000104patterns-modelmaker-beyond"><span class="">Patterns, ModelMaker &amp; Beyond</span></a>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/abulka/abulka.github.io/tree/main/content/blog/pure_mvc_refactoring.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/abulka/abulka.github.io/edit/main/content/blog/pure_mvc_refactoring.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/abulka/abulka.github.io/new/main/content/blog?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/abulka/abulka.github.io/issues/new?title=Refactoring%20to%20PureMVC" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/abulka/abulka.github.io/issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  
</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a>
      <ul>
        <li><a href="#mvc-architectural-pattern">MVC Architectural Pattern</a></li>
        <li><a href="#model-gui-mediator">Model Gui Mediator</a></li>
        <li><a href="#puremvc">PureMVC</a></li>
      </ul>
    </li>
    <li><a href="#rules-of-puremvc">Rules of PureMVC</a></li>
    <li><a href="#refactoring-to-puremvc">Refactoring to PureMVC</a>
      <ul>
        <li><a href="#1-starting-point">1. Starting Point</a></li>
        <li><a href="#2-add-a-mediator">2. Add a mediator</a></li>
        <li><a href="#3-command-class">3. Command class</a></li>
        <li><a href="#4-gui-access-logic">4. GUI access logic</a></li>
        <li><a href="#5-add-a-model">5. Add a Model</a></li>
      </ul>
    </li>
    <li><a href="#taking-stock">Taking Stock</a>
      <ul>
        <li><a href="#6-model-proxy">6. Model Proxy</a></li>
        <li><a href="#the-application-initialisation-sequence">The Application Initialisation Sequence</a></li>
        <li><a href="#7-startup-code">7. Startup code</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a>
      <ul>
        <li><a href="#too-much-complexity">Too much Complexity?</a></li>
      </ul>
    </li>
    <li><a href="#comments">Comments</a>
      <ul>
        <li><a href="#posted-by-arun-george-on-feb-15th-2012">Posted by Arun George on Feb 15th, 2012</a></li>
        <li><a href="#posted-by-byron-harris-on-may-25th-2012">Posted by Byron Harris on May 25th, 2012</a></li>
        <li><a href="#posted-by-tjaved-on-sep-25th-2012">Posted by T.Javed on Sep 25th, 2012</a></li>
        <li><a href="#posted-by-demolishun-on-oct-20th-2012">Posted by Demolishun on Oct 20th, 2012</a></li>
      </ul>
    </li>
    <li><a href="#java-example">Java Example</a>
      <ul>
        <li><a href="#1-starting-point-1">1. Starting Point</a></li>
        <li><a href="#2-add-a-mediator-1">2. Add a mediator</a></li>
        <li><a href="#3-command-class-1">3. Command class</a></li>
        <li><a href="#4-gui-access-logic-1">4. GUI Access Logic</a></li>
        <li><a href="#5-add-a-model-1">5. Add a Model</a></li>
        <li><a href="#6-model-proxy-1">6. Model Proxy</a></li>
        <li><a href="#7-startup-code-1">7. Startup code</a></li>
        <li><a href="#8-packaging">8. Packaging</a></li>
        <li><a href="#conclusion-java">Conclusion (Java)</a></li>
      </ul>
    </li>
    <li><a href="#resources">Resources</a></li>
  </ul>
</nav>
      </div>
    
            <div class="taxonomy taxonomy-terms-cloud taxo-tags">
      <h5 class="taxonomy-title">Tag Cloud</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/ai/" data-taxonomy-term="ai"><span class="taxonomy-label">AI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/argument-mapping/" data-taxonomy-term="argument-mapping"><span class="taxonomy-label">Argument Mapping</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/async/" data-taxonomy-term="async"><span class="taxonomy-label">Async</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/calculators/" data-taxonomy-term="calculators"><span class="taxonomy-label">Calculators</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/chords/" data-taxonomy-term="chords"><span class="taxonomy-label">Chords</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/code-translation/" data-taxonomy-term="code-translation"><span class="taxonomy-label">Code Translation</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/composition/" data-taxonomy-term="composition"><span class="taxonomy-label">Composition</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/controllers/" data-taxonomy-term="controllers"><span class="taxonomy-label">Controllers</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/dart/" data-taxonomy-term="dart"><span class="taxonomy-label">Dart</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/design-patterns/" data-taxonomy-term="design-patterns"><span class="taxonomy-label">Design Patterns</span><span class="taxonomy-count">23</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/dev-ops/" data-taxonomy-term="dev-ops"><span class="taxonomy-label">Dev Ops</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/diagramming/" data-taxonomy-term="diagramming"><span class="taxonomy-label">Diagramming</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/django/" data-taxonomy-term="django"><span class="taxonomy-label">Django</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/electron/" data-taxonomy-term="electron"><span class="taxonomy-label">Electron</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/eurorack/" data-taxonomy-term="eurorack"><span class="taxonomy-label">Eurorack</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/flask/" data-taxonomy-term="flask"><span class="taxonomy-label">Flask</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/flutter/" data-taxonomy-term="flutter"><span class="taxonomy-label">Flutter</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/fultter/" data-taxonomy-term="fultter"><span class="taxonomy-label">Fultter</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/google-colab/" data-taxonomy-term="google-colab"><span class="taxonomy-label">Google Colab</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/gui/" data-taxonomy-term="gui"><span class="taxonomy-label">GUI</span><span class="taxonomy-count">10</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/image-presentation/" data-taxonomy-term="image-presentation"><span class="taxonomy-label">Image Presentation</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/java/" data-taxonomy-term="java"><span class="taxonomy-label">Java</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/javascript/" data-taxonomy-term="javascript"><span class="taxonomy-label">Javascript</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/jupyter/" data-taxonomy-term="jupyter"><span class="taxonomy-label">Jupyter</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/jupyter-notebook/" data-taxonomy-term="jupyter-notebook"><span class="taxonomy-label">Jupyter Notebook</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/libraries/" data-taxonomy-term="libraries"><span class="taxonomy-label">Libraries</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/midi/" data-taxonomy-term="midi"><span class="taxonomy-label">MIDI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/mind-mapping/" data-taxonomy-term="mind-mapping"><span class="taxonomy-label">Mind Mapping</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/music/" data-taxonomy-term="music"><span class="taxonomy-label">Music</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/mvc/" data-taxonomy-term="mvc"><span class="taxonomy-label">MVC</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/narrative/" data-taxonomy-term="narrative"><span class="taxonomy-label">Narrative</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/object-database/" data-taxonomy-term="object-database"><span class="taxonomy-label">Object Database</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/observer/" data-taxonomy-term="observer"><span class="taxonomy-label">Observer</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/orm/" data-taxonomy-term="orm"><span class="taxonomy-label">ORM</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/philosophy/" data-taxonomy-term="philosophy"><span class="taxonomy-label">Philosophy</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/programmable/" data-taxonomy-term="programmable"><span class="taxonomy-label">Programmable</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/python/" data-taxonomy-term="python"><span class="taxonomy-label">Python</span><span class="taxonomy-count">22</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/raspberry-pi/" data-taxonomy-term="raspberry-pi"><span class="taxonomy-label">Raspberry Pi</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/reasoning/" data-taxonomy-term="reasoning"><span class="taxonomy-label">Reasoning</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/refactoring/" data-taxonomy-term="refactoring"><span class="taxonomy-label">Refactoring</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/ruby/" data-taxonomy-term="ruby"><span class="taxonomy-label">Ruby</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/software-product/" data-taxonomy-term="software-product"><span class="taxonomy-label">Software Product</span><span class="taxonomy-count">21</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/sql/" data-taxonomy-term="sql"><span class="taxonomy-label">SQL</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/string-manipulation/" data-taxonomy-term="string-manipulation"><span class="taxonomy-label">String Manipulation</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/thoughts/" data-taxonomy-term="thoughts"><span class="taxonomy-label">Thoughts</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/tools/" data-taxonomy-term="tools"><span class="taxonomy-label">Tools</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/ubuntu/" data-taxonomy-term="ubuntu"><span class="taxonomy-label">Ubuntu</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/ui-widgets/" data-taxonomy-term="ui-widgets"><span class="taxonomy-label">UI Widgets</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/uml/" data-taxonomy-term="uml"><span class="taxonomy-label">UML</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/vscode-extension/" data-taxonomy-term="vscode-extension"><span class="taxonomy-label">Vscode Extension</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/vuejs/" data-taxonomy-term="vuejs"><span class="taxonomy-label">Vuejs</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/wxpython/" data-taxonomy-term="wxpython"><span class="taxonomy-label">WxPython</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/yeoman-generator/" data-taxonomy-term="yeoman-generator"><span class="taxonomy-label">Yeoman Generator</span><span class="taxonomy-count">1</span></a></li>
        </ul>
    </div>
  
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5 pe-md-4" role="main">
            <a class="td-rss-button" title="RSS" href="/blog/index.xml" target="_blank" rel="noopener">
              <i class="fa-solid fa-rss" aria-hidden="true"></i>
            </a>
            
<div class="td-content">
	<h1>Refactoring to PureMVC</h1>
	
	<div class="td-byline mb-4">
		
		<time datetime="2009-04-01" class="text-body-secondary">Wednesday, April 01, 2009</time>
	</div>
	<header class="article-meta">
		<div class="taxonomy taxonomy-terms-article taxo-tags">
  <h5 class="taxonomy-title">Tags:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/design-patterns/" data-taxonomy-term="design-patterns"><span class="taxonomy-label">Design Patterns</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/gui/" data-taxonomy-term="gui"><span class="taxonomy-label">GUI</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/mvc/" data-taxonomy-term="mvc"><span class="taxonomy-label">MVC</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/controllers/" data-taxonomy-term="controllers"><span class="taxonomy-label">Controllers</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/python/" data-taxonomy-term="python"><span class="taxonomy-label">Python</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/wxpython/" data-taxonomy-term="wxpython"><span class="taxonomy-label">WxPython</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/observer/" data-taxonomy-term="observer"><span class="taxonomy-label">Observer</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/refactoring/" data-taxonomy-term="refactoring"><span class="taxonomy-label">Refactoring</span></a></li>
    </ul>
</div>

  </header>
	<p>Let&rsquo;s look at how to refactor an existing architecture to the PureMVC architecture. Your application requires that you display &lsquo;model&rsquo; data in some sort of UI &lsquo;view&rsquo;.</p>
<p><img src="/blog/images/puremvc20921233037638bgDSC9636.jpg" alt=""></p>
<h2 id="introduction">Introduction</h2>
<h3 id="mvc-architectural-pattern">MVC Architectural Pattern</h3>
<p>I have long been fascinated by the MVC (Model View Controller) architectural pattern, first conceived in the 1960&rsquo;s. What it promises, to those who can fathom its mysteries, is an orderly way of organising your application architecture. You define a de-coupled domain/business model that is oblivious to any GUI that might be displaying it. A mediating controller class usually looks after the dirty details of moving data between the model and GUI. You can even have multiple GUI representations of your single model e.g. a pie chart view and a bar chart view simultaneously displaying the same information out of the model.</p>
<p>There are many variants of MVC, and people use different terminology to mean the same thing, and conversely people use the same terminology to mean different things e.g. the view could be the GUI or it could be the mediating class looking after the GUI, which means it could actually end up meaning the controller&hellip;</p>
<h3 id="model-gui-mediator">Model Gui Mediator</h3>
<p>Some History.</p>
<p>I once wrote up a pattern called
<a href="https://abulka.github.io/patterns/mvca-pattern/">MGM (Model Gui Mediator)</a>
which describes a version of MVC that I thought made sense in today&rsquo;s modern programming age. Today, GUI views were usually comprised of sophisticated controls/widgets rather than laboriously handcrafted graphic code that needed custom controller code to handle the intricate details of interacting with the view/GUI. Most of that low level controller interaction is now built in to the off the shelf widgets/controls.</p>
<p>The controller is now just a mediator between model and view – hence the “M” in MGM (Model-Gui-Mediator). You might prefer to think of the mediator as the controller, so the pattern could well have been called MGC (Model-Gui-Controller). Many modern variants of MVC e.g. MVP (Model View Presenter) and PAC (Presentation Abstraction Controller) and others probably fit into the basic idea of MGM.</p>
<p><img src="/blog/images/puremvcfussMGM.png" alt=""></p>
<p>The behaviour of the MGM architecture is as follows:</p>
<p><img src="/blog/images/puremvcfussMGM_UMLsequence.png" alt=""></p>
<p><em>MGM pattern sequence diagram.<br>
M=Model (Data class) G=Gui (Form with an edit control on it) M=Mediator (Controller class)</em></p>
<p>What we have illustrated above are two use cases:</p>
<ul>
<li>
<p>In the first the user types some text into an edit field on a form, which causes the model to change – the model broadcasts the change and the GUI is updated (watch out for infinite loops here of course, which can be avoided by the gui update not triggering another change event).</p>
</li>
<li>
<p>The second use case is the model changing for some reason (e.g. being loaded from a file or some other part of the system altering the data) and the model broadcasting the change – again the Controller is observing and intercepts the broadcast and updates the GUI.</p>
</li>
</ul>
<p>What is interesting about MGM is that it shows how simple the MVC pattern really can be, when understood in terms of today&rsquo;s modern GUI components. It also serves as a way of contrasting what PureMVC is offering. Read on.</p>
<h3 id="puremvc">PureMVC</h3>
<p>Along comes PureMVC.</p>
<p>I&rsquo;ve since (2008-2009) become quite interested in the <a href="http://www.puremvc.org">PureMVC</a> framework because it adds a few things that were missing from MGM.</p>
<p><img src="/blog/images/puremvcfussCONCEPT1.png" alt=""></p>
<p><em>PureMVC Conceptual Architecture</em></p>
<p>Firstly PureMVC explicitly adds command classes – rather than just burying behaviour in controllers/mediators, we have an official way of organising behaviour. Sure, in MVC and MGM, any controller is free to delegate and invoke command classes to perform behaviour in a more organised way - but in PureMVC the details of this are a little more spelled out.</p>
<p>Secondly PureMVC adds service location, so that you end up with a nice de-coupled design – events are raised and anyone can register interest in an event/message. Thus the whole architecture becomes a lot more pluggable, flexible and neat.</p>
<p>Thirdly I believe PureMVC addresses scalability – for example it tells you exactly how to add multiple mediators to the system. Multiple commands and data proxies are also supported. You simply register all these classes and specify what noification messages are of interest to each of them.</p>
<h2 id="rules-of-puremvc">Rules of PureMVC</h2>
<p>The model notifies, but doesn&rsquo;t listen and ultimately knows nothing about anything else in the system. Mediators notify and listen to messages. Commands are invoked (cmd.execute()) automatically by certain messages and they send out messages if they want to.</p>
<p>The facade is the communication hub.</p>
<p>Mediators look after gui elements, and this forms the view. Commands forms the controller. Proxies wrap model elements and this forms the model.  <em>Note that in the above diagram, there is a one to many relationship between the View and the Mediators, and between the Controller and the Commands, and between the Model and the Proxies.</em></p>
<h2 id="refactoring-to-puremvc">Refactoring to PureMVC</h2>
<p>To show you just how useful and simple incorporating PureMVC can be, I have designed a step by step tutorial on how you introduce a PureMVC command driven, message notification driven architecture to your existing wxpython application.</p>
<p>We will start with a simple application that doesn&rsquo;t even have a model. We will first add a mediator, then a command class and then a proper model.</p>
<p>The application is a simple form which displays a textfield. When you hit ENTER, it converts anything you type into uppercase and displays it in the textfield. There is no “model” and no PureMVC architecture.</p>
<p><img src="/blog/images/puremvcfuss_pythonGui.gif" alt=""></p>
<p><em>Three screenshots of our simple wxPython application.<br>
We will use this as our starting point and refactor to PureMVC.</em></p>
<h3 id="1-starting-point">1. Starting Point</h3>
<p>Here is the code for our simple wxpython application illustrated above. It has no proper model and does not use PureMVC. This is our starting point.</p>
<p><img src="/blog/images/puremvcfussUMLstep0gui.png" alt=""></p>
<p><em>Starting point – a simple wxpython app - a single form with a textfield control.</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> wx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyForm</span>(wx<span style="color:#ff79c6">.</span>Panel):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, parent):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Panel<span style="color:#ff79c6">.</span>__init__(self,parent,<span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">3</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>inputFieldTxt <span style="color:#ff79c6">=</span> wx<span style="color:#ff79c6">.</span>TextCtrl(self, <span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>, size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">170</span>,<span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>), pos<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">5</span>, <span style="color:#bd93f9">10</span>), style<span style="color:#ff79c6">=</span>wx<span style="color:#ff79c6">.</span>TE_PROCESS_ENTER)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AppFrame</span>(wx<span style="color:#ff79c6">.</span>Frame):
</span></span><span style="display:flex;"><span>    myForm <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Frame<span style="color:#ff79c6">.</span>__init__(self,parent<span style="color:#ff79c6">=</span><span style="color:#ff79c6">None</span>, <span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=-</span><span style="color:#bd93f9">1</span>, title<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Refactoring to PureMVC&#34;</span>,size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">200</span>,<span style="color:#bd93f9">100</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>myForm <span style="color:#ff79c6">=</span> MyForm(self)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>myForm<span style="color:#ff79c6">.</span>Bind(wx<span style="color:#ff79c6">.</span>EVT_TEXT_ENTER, self<span style="color:#ff79c6">.</span>onSubmit, self<span style="color:#ff79c6">.</span>myForm<span style="color:#ff79c6">.</span>inputFieldTxt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">onSubmit</span>(self, evt):
</span></span><span style="display:flex;"><span>        mydata <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>myForm<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>GetValue()
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;got&#34;</span>, mydata
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>myForm<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>SetValue(mydata<span style="color:#ff79c6">.</span>upper())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">WxApp</span>(wx<span style="color:#ff79c6">.</span>App):
</span></span><span style="display:flex;"><span>    appFrame <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">OnInit</span>(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame <span style="color:#ff79c6">=</span> AppFrame()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame<span style="color:#ff79c6">.</span>Show()
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> __name__ <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    wxApp <span style="color:#ff79c6">=</span> WxApp(redirect<span style="color:#ff79c6">=</span><span style="color:#ff79c6">False</span>)
</span></span><span style="display:flex;"><span>    wxApp<span style="color:#ff79c6">.</span>MainLoop()
</span></span></code></pre></div><hr>
<h3 id="2-add-a-mediator">2. Add a mediator</h3>
<p>Import PureMVC and add a mediator.</p>
<p>Let&rsquo;s add a mediator and create a PureMVC “view”. Mediators in PureMVC are classes which look after a gui – e.g. a wxpython form. Mediators can be built that look after larger or smaller chunks of your gui – depending on your situation. In our case we will build a mediator to look after the one form and its single textfield.</p>
<p><img src="/blog/images/puremvcfussUMLstep2.png" alt=""></p>
<p><em>Step 2 – the Mediator now intercepts the ENTER key event<br>
and performs the uppercasing behaviour in its onSubmit() handler.</em></p>
<p><strong>Steps</strong>:</p>
<ol>
<li>
<p>Add the puremvc import statements</p>
</li>
<li>
<p>Add a Mediator class</p>
</li>
<li>
<p>Move the binding and onSubmit method out of the AppFrame and into the Mediator class</p>
</li>
<li>
<p>Have the AppFrame create a PureMVC facade and register a mediator instance with the facade</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> wx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.interfaces <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.mediator <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyForm</span>(wx<span style="color:#ff79c6">.</span>Panel):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, parent):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Panel<span style="color:#ff79c6">.</span>__init__(self,parent,<span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">3</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>inputFieldTxt <span style="color:#ff79c6">=</span> wx<span style="color:#ff79c6">.</span>TextCtrl(self, <span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>, size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">170</span>,<span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>), pos<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">5</span>, <span style="color:#bd93f9">10</span>), style<span style="color:#ff79c6">=</span>wx<span style="color:#ff79c6">.</span>TE_PROCESS_ENTER)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyFormMediator</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>mediator<span style="color:#ff79c6">.</span>Mediator, puremvc<span style="color:#ff79c6">.</span>interfaces<span style="color:#ff79c6">.</span>IMediator): <span style="color:#6272a4"># ADD THIS CLASS</span>
</span></span><span style="display:flex;"><span>    NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;MyFormMediator&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, viewComponent):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(MyFormMediator, self)<span style="color:#ff79c6">.</span>__init__(MyFormMediator<span style="color:#ff79c6">.</span>NAME, viewComponent)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>Bind(wx<span style="color:#ff79c6">.</span>EVT_TEXT_ENTER, self<span style="color:#ff79c6">.</span>onSubmit, self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">listNotificationInterests</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">handleNotification</span>(self, notification):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">onSubmit</span>(self, evt):
</span></span><span style="display:flex;"><span>        mydata <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>GetValue()
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;got (mediator)&#34;</span>, mydata
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>SetValue(mydata<span style="color:#ff79c6">.</span>upper())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AppFrame</span>(wx<span style="color:#ff79c6">.</span>Frame):
</span></span><span style="display:flex;"><span>    myForm <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Frame<span style="color:#ff79c6">.</span>__init__(self,parent<span style="color:#ff79c6">=</span><span style="color:#ff79c6">None</span>, <span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=-</span><span style="color:#bd93f9">1</span>, title<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Refactoring to PureMVC&#34;</span>,size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">200</span>,<span style="color:#bd93f9">100</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>myForm <span style="color:#ff79c6">=</span> MyForm(self)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade <span style="color:#ff79c6">=</span> puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>facade<span style="color:#ff79c6">.</span>Facade<span style="color:#ff79c6">.</span>getInstance()  <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade<span style="color:#ff79c6">.</span>registerMediator(MyFormMediator(self<span style="color:#ff79c6">.</span>myForm ))  <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4"># self.myForm.Bind(wx.EVT_TEXT_ENTER, self.onSubmit, self.myForm.inputFieldTxt) #DELETE</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4"># def onSubmit(self, evt):  #DELETE THIS METHOD</span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">#     mydata = self.myForm.inputFieldTxt.GetValue()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">#     print &#34;got&#34;, mydata</span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">#     self.myForm.inputFieldTxt.SetValue(mydata.upper())</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">WxApp</span>(wx<span style="color:#ff79c6">.</span>App):
</span></span><span style="display:flex;"><span>    appFrame <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">OnInit</span>(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame <span style="color:#ff79c6">=</span> AppFrame()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame<span style="color:#ff79c6">.</span>Show()
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> __name__ <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    wxApp <span style="color:#ff79c6">=</span> WxApp(redirect<span style="color:#ff79c6">=</span><span style="color:#ff79c6">False</span>)
</span></span><span style="display:flex;"><span>    wxApp<span style="color:#ff79c6">.</span>MainLoop()
</span></span></code></pre></div><p>So now, instead of our AppFrame class binding to the <code>ENTER</code> key event and handling it via an <code>onSubmit</code> method, the mediator now does this – binding to the <code>ENTER</code> event in the constructor of the mediator.</p>
<p>All the <code>AppFrame</code> does now is create a PureMVC facade and register a mediator instance with the facade. Notice that we pass the GUI object, in this case the form, to the mediator as a parameter to the mediator&rsquo;s constructor – the GUI object is referred to by the mediator as the viewComponent.</p>
<p>The application now behaves exactly as before, except we now get the following diagnostic message:</p>
<p><img src="/blog/images/puremvcfuss_step2mediator.png" alt=""></p>
<p>which proves the mediator is active. Of course this step doesn&rsquo;t really buy us any functionality yet, but at least we are on the road&hellip;</p>
<hr>
<h3 id="3-command-class">3. Command class</h3>
<p>Move the business logic into a Command class.</p>
<p>Let&rsquo;s now move the behaviour (changing text to uppercase) out of the mediator and into a proper command class. This makes the mediator dumber – which is good, as all we want the mediator to do is look after the GUI, not house application logic.</p>
<p><img src="/blog/images/puremvcfussUMLstep3cmd.png" alt=""></p>
<p><em>Step 3 – the uppercasing behaviour is moved to the command class.</em></p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p>Import the puremvc command import</p>
</li>
<li>
<p>Create a command class <strong>DataSubmittedCommand</strong> and implement execute</p>
</li>
<li>
<p>Move the logic for updating the GUI display with uppercase text - out of the mediator and into the command object&rsquo;s execute method. The mediator now simply raises a <code>DATA_SUBMITTED</code> notification</p>
</li>
<li>
<p>Define our own facade class called <strong>AppFacade</strong>and</p>
<ol>
<li>
<p>Define the <code>DATA_SUBMITTED</code> message</p>
</li>
<li>
<p>Override <code>getInstance()</code> to implement the singleton design pattern ( just return a new <code>AppFacade</code>)</p>
</li>
<li>
<p>Override <code>initializeController()</code> registering the <code>DataSubmittedCommand</code> class, associating it with the <code>DATA_SUBMITTED</code> message. In other words, whenever the <code>DATA_SUBMITTED</code> message is raised, DataSubmittedCommand.<code>execute()</code> is called.</p>
</li>
</ol>
</li>
<li>
<p>Use our new concrete Facade rather than the default Facade in the <code>AppFrame</code> class startup code.</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> wx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.interfaces
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.mediator
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.command <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyForm</span>(wx<span style="color:#ff79c6">.</span>Panel):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, parent):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Panel<span style="color:#ff79c6">.</span>__init__(self,parent,<span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">3</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>inputFieldTxt <span style="color:#ff79c6">=</span> wx<span style="color:#ff79c6">.</span>TextCtrl(self, <span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>, size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">170</span>,<span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>), pos<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">5</span>, <span style="color:#bd93f9">10</span>), style<span style="color:#ff79c6">=</span>wx<span style="color:#ff79c6">.</span>TE_PROCESS_ENTER)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyFormMediator</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>mediator<span style="color:#ff79c6">.</span>Mediator, puremvc<span style="color:#ff79c6">.</span>interfaces<span style="color:#ff79c6">.</span>IMediator):
</span></span><span style="display:flex;"><span>    NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;MyFormMediator&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, viewComponent):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(MyFormMediator, self)<span style="color:#ff79c6">.</span>__init__(MyFormMediator<span style="color:#ff79c6">.</span>NAME, viewComponent)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>Bind(wx<span style="color:#ff79c6">.</span>EVT_TEXT_ENTER, self<span style="color:#ff79c6">.</span>onSubmit, self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">listNotificationInterests</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">handleNotification</span>(self, notification):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">onSubmit</span>(self, evt):
</span></span><span style="display:flex;"><span>        mydata <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>GetValue()
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span><span style="color:#f1fa8c">&#34;got (mediator)&#34;</span>, mydata
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4"># self.viewComponent.inputFieldTxt.SetValue(mydata.upper()) # DELETE THIS LINE</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>sendNotification(AppFacade<span style="color:#ff79c6">.</span>DATA_SUBMITTED, mydata, self<span style="color:#ff79c6">.</span>viewComponent)  <span style="color:#6272a4">#ADD THIS LINE</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">DataSubmittedCommand</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>command<span style="color:#ff79c6">.</span>SimpleCommand, puremvc<span style="color:#ff79c6">.</span>interfaces<span style="color:#ff79c6">.</span>ICommand): <span style="color:#6272a4">#ADD CLASS</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">execute</span>(self, notification):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;execute (command)&#34;</span>, notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>        mydata <span style="color:#ff79c6">=</span> notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>        viewComponent <span style="color:#ff79c6">=</span> notification<span style="color:#ff79c6">.</span>getType()
</span></span><span style="display:flex;"><span>        viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>SetValue(mydata<span style="color:#ff79c6">.</span>upper())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AppFacade</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>facade<span style="color:#ff79c6">.</span>Facade): <span style="color:#6272a4">#ADD CLASS</span>
</span></span><span style="display:flex;"><span>    DATA_SUBMITTED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_SUBMITTED&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @staticmethod
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">getInstance</span>():
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> AppFacade()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">initializeController</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(AppFacade, self)<span style="color:#ff79c6">.</span>initializeController()
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(AppFacade, self)<span style="color:#ff79c6">.</span>registerCommand(AppFacade<span style="color:#ff79c6">.</span>DATA_SUBMITTED, DataSubmittedCommand)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AppFrame</span>(wx<span style="color:#ff79c6">.</span>Frame):
</span></span><span style="display:flex;"><span>    myForm <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>    mvcfacade <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>  <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Frame<span style="color:#ff79c6">.</span>__init__(self,parent<span style="color:#ff79c6">=</span><span style="color:#ff79c6">None</span>, <span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=-</span><span style="color:#bd93f9">1</span>, title<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Refactoring to PureMVC&#34;</span>,size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">200</span>,<span style="color:#bd93f9">100</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>myForm <span style="color:#ff79c6">=</span> MyForm(self)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4"># self.mvcfacade = puremvc.patterns.facade.Facade.getInstance() # DELETE THIS LINE</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade <span style="color:#ff79c6">=</span> AppFacade<span style="color:#ff79c6">.</span>getInstance()  <span style="color:#6272a4">#ADD THIS LINE</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade<span style="color:#ff79c6">.</span>registerMediator(MyFormMediator(self<span style="color:#ff79c6">.</span>myForm))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">WxApp</span>(wx<span style="color:#ff79c6">.</span>App):
</span></span><span style="display:flex;"><span>    appFrame <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">OnInit</span>(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame <span style="color:#ff79c6">=</span> AppFrame()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame<span style="color:#ff79c6">.</span>Show()
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> __name__ <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    wxApp <span style="color:#ff79c6">=</span> WxApp(redirect<span style="color:#ff79c6">=</span><span style="color:#ff79c6">False</span>)
</span></span><span style="display:flex;"><span>    wxApp<span style="color:#ff79c6">.</span>MainLoop()
</span></span></code></pre></div><p>Notice that we had to create our own concrete Facade class instead of merely creating an instance of the default Facade class that PureMVC provides. This is because we now want to start defining our own messages (e.g. <code>DATA_SUBMITTED</code>).</p>
<p>Also notice (and this is the crux of this refactoring step) that the mediator no longer performs the business logic of converting the text to uppercase. Now instead it simply raises a notification <code>DATA_SUBMITTED</code> which the command class then picks up and acts upon.</p>
<p>Again, as with any good refactoring step, the behaviour of the application is exactly the same as before except for our diagnostic message which now emits:</p>
<p><img src="/blog/images/puremvcfuss_step3command.png" alt=""></p>
<hr>
<h3 id="4-gui-access-logic">4. GUI access logic</h3>
<p>Move the ability to access the GUI out of the Command class.</p>
<p><strong>Hey - isn&rsquo;t the command class doing too much now?</strong> Notice, in the previous refactoring step, that the command class is not only converting the text to upercase (our simple business logic), but is also getting a bit too big for its boots – it is also stuffing the result back into the gui itself – altogether bypassing the meditor. We are actually encouraging this because we pass both the gui textfield data and a reference to the textfield as part of the notification message. This gives the command class direct access to the gui. The command class should really simply raise a notification and let the mediator do what it was designed to do, and stuff the uppercase text into the appropriate part of the GUI. Let&rsquo;s now do this.</p>
<p>Let&rsquo;s now have the command raise a notification message after it has done its work, and let the <em>mediator</em> look after putting the result back into the gui.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p>Create a new message type <code>DATA_CHANGED</code> in the facade - don&rsquo;t register it against a command since it is simply a message that will be listened for by the existing meditor. In PureMVC, message notifications can be associated with the triggering of commands or simply be listened for by mediators.</p>
</li>
<li>
<p>Add the message <code>DATA_CHANGED</code> to the list of messages the mediator is interested in viz.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">def</span> <span style="color:#50fa7b">listNotificationInterests</span>(self):
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">return</span> [ AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED ]
</span></span></code></pre></div></li>
<li>
<p>Inside the mediator&rsquo;s handleNotification method, check for the message matching <code>DATA_CHANGED</code> and move the logic that updates the gui in here.</p>
</li>
<li>
<p>We stop passing the meditor&rsquo;s view component as part of the message to the command – the command class doesn&rsquo;t need that reference to the gui anymore.</p>
</li>
</ol>
<p>Ironically the code that updates the GUI started in wxapp, then moved to the meditor, then into the command class, then end up now back in the meditor again! What sort of refactoring is this!?</p>
<p>Well the point is that we have separated two aspects of that code - the uppercase logic is now correctly in the command class and the updating of the GUI correctly in the mediator class. The roles are being performed by the correct classes. The meditor is the only one that knows about the intricacies of the GUI. And its all notification message driven and nicely de-coupled – the command class is triggered in response to an abstract notification <code>DATA_SUBMITTED</code> and sends the result back to the mediator using another abstract notification DATA_CHANGED. PureMVC is working as intended (though we don&rsquo;t have a proper model yet).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> wx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.interfaces
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.mediator
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.command
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyForm</span>(wx<span style="color:#ff79c6">.</span>Panel):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, parent):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Panel<span style="color:#ff79c6">.</span>__init__(self,parent,<span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">3</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>inputFieldTxt <span style="color:#ff79c6">=</span> wx<span style="color:#ff79c6">.</span>TextCtrl(self, <span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>, size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">170</span>,<span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>), pos<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">5</span>, <span style="color:#bd93f9">10</span>), style<span style="color:#ff79c6">=</span>wx<span style="color:#ff79c6">.</span>TE_PROCESS_ENTER)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyFormMediator</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>mediator<span style="color:#ff79c6">.</span>Mediator, puremvc<span style="color:#ff79c6">.</span>interfaces<span style="color:#ff79c6">.</span>IMediator):
</span></span><span style="display:flex;"><span>    NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;MyFormMediator&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, viewComponent):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(MyFormMediator, self)<span style="color:#ff79c6">.</span>__init__(MyFormMediator<span style="color:#ff79c6">.</span>NAME, viewComponent)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>Bind(wx<span style="color:#ff79c6">.</span>EVT_TEXT_ENTER, self<span style="color:#ff79c6">.</span>onSubmit, self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">listNotificationInterests</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> [ AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED ]   <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">handleNotification</span>(self, notification):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> notification<span style="color:#ff79c6">.</span>getName() <span style="color:#ff79c6">==</span> AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED:                  <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;handleNotification (mediator)&#34;</span>, notification<span style="color:#ff79c6">.</span>getBody()     <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>            mydata <span style="color:#ff79c6">=</span> notification<span style="color:#ff79c6">.</span>getBody()                                   <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>SetValue(mydata)                 <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">onSubmit</span>(self, evt):
</span></span><span style="display:flex;"><span>        mydata <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>GetValue()
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;got (mediator)&#34;</span>, mydata
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>sendNotification(AppFacade<span style="color:#ff79c6">.</span>DATA_SUBMITTED, mydata, self<span style="color:#ff79c6">.</span>viewComponent)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">DataSubmittedCommand</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>command<span style="color:#ff79c6">.</span>SimpleCommand, puremvc<span style="color:#ff79c6">.</span>interfaces<span style="color:#ff79c6">.</span>ICommand):
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">execute</span>(self, notification):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;execute (command)&#34;</span>, notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>        mydata <span style="color:#ff79c6">=</span> notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4"># viewComponent = notification.getType() # DELETE THIS LINE</span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4"># viewComponent.inputFieldTxt.SetValue(mydata.upper()) # DELETE THIS LINE</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>sendNotification(AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED, mydata<span style="color:#ff79c6">.</span>upper())   <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AppFacade</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>facade<span style="color:#ff79c6">.</span>Facade):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    DATA_SUBMITTED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_SUBMITTED&#34;</span>
</span></span><span style="display:flex;"><span>    DATA_CHANGED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_CHANGED&#34;</span>   <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @staticmethod
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">getInstance</span>():
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> AppFacade()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">initializeController</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(AppFacade, self)<span style="color:#ff79c6">.</span>initializeController()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(AppFacade, self)<span style="color:#ff79c6">.</span>registerCommand(AppFacade<span style="color:#ff79c6">.</span>DATA_SUBMITTED, DataSubmittedCommand)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AppFrame</span>(wx<span style="color:#ff79c6">.</span>Frame):
</span></span><span style="display:flex;"><span>    myForm <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>    mvcfacade <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Frame<span style="color:#ff79c6">.</span>__init__(self,parent<span style="color:#ff79c6">=</span><span style="color:#ff79c6">None</span>, <span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=-</span><span style="color:#bd93f9">1</span>, title<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Refactoring to PureMVC&#34;</span>,size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">200</span>,<span style="color:#bd93f9">100</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>myForm <span style="color:#ff79c6">=</span> MyForm(self)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade <span style="color:#ff79c6">=</span> AppFacade<span style="color:#ff79c6">.</span>getInstance()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade<span style="color:#ff79c6">.</span>registerMediator(MyFormMediator(self<span style="color:#ff79c6">.</span>myForm ))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">WxApp</span>(wx<span style="color:#ff79c6">.</span>App):
</span></span><span style="display:flex;"><span>    appFrame <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">OnInit</span>(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame <span style="color:#ff79c6">=</span> AppFrame()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame<span style="color:#ff79c6">.</span>Show()
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> __name__ <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    wxApp <span style="color:#ff79c6">=</span> WxApp(redirect<span style="color:#ff79c6">=</span><span style="color:#ff79c6">False</span>)
</span></span><span style="display:flex;"><span>    wxApp<span style="color:#ff79c6">.</span>MainLoop()
</span></span></code></pre></div><p>Our diagnostic now shows how the flow of execution moves from the GUI to the mediator, to the command, and then back to the mediator again.</p>
<p><img src="/blog/images/puremvcfuss_step4command.png" alt=""></p>
<hr>
<h3 id="5-add-a-model">5. Add a Model</h3>
<p>You&rsquo;ve been waiting for this step, I know. Let&rsquo;s add a proper model.</p>
<p><img src="/blog/images/puremvcfussUMLstep5model.png" alt=""></p>
<p><em>Adding a model to our architecture.</em></p>
<p>In the PureMVC framework&rsquo;s way of looking at things, the Model should be wrapped by a “Model Proxy” class. Just like the mediator wraps and looks after the GUI, the proxy wraps and looks after the model. In this refactoring step, we are going to add the Proxy class and use it as the model.</p>
<p>From the command class point of view, instead of putting the result of the business logic straight back into the GUI, the command class now writes the uppercase string to the model proxy. The model proxy then sends out a notification that the model data has changed - which the mediator picks up and acts on by updating the form inputfield control/widget. Basically we have a complete PureMVC architecture functioning now (see sequence diagram below).</p>
<p>Steps:</p>
<ol>
<li>
<p>Import the proxy namespace</p>
</li>
<li>
<p>Define a class <code>DataModelProxy</code> which will hold the data (the string we are entering in and upper-casing). The proxy class sends a notification whenever the data changes, enabling e.g. the mediator to update the gui.</p>
</li>
<li>
<p>Create and register the the Proxy class in the startup phase</p>
</li>
<li>
<p>Change the command so that it looks up the model proxy and updates it with the uppercase string.</p>
</li>
<li>
<p>Mediator is told about the data that changes by the model proxy raising a DATA_CHANGED message. In response, the meditor takes the data and puts it in the GUI.</p>
</li>
</ol>
<p>When the mediator has been notified by the model - how does the mediator get access to the model proxy data?</p>
<p>Well it can be given a reference to the data proxy so that it can get the data itself, or the notification message can contain the actual data (remember that notification messages have two additional parameters after the message name – <code>getBody()</code> and <code>getType()</code> and it is up to you what you put there. Finally, the Mediator is within its rights to look up the data proxy itself if it wants using the <code>self.facade.retrieveProxy(...)</code> lookup technique.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> wx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.interfaces
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.mediator
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.command
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.proxy <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyForm</span>(wx<span style="color:#ff79c6">.</span>Panel):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, parent):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Panel<span style="color:#ff79c6">.</span>__init__(self,parent,<span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">3</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>inputFieldTxt <span style="color:#ff79c6">=</span> wx<span style="color:#ff79c6">.</span>TextCtrl(self, <span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>, size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">170</span>,<span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>), pos<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">5</span>, <span style="color:#bd93f9">10</span>), style<span style="color:#ff79c6">=</span>wx<span style="color:#ff79c6">.</span>TE_PROCESS_ENTER)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyFormMediator</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>mediator<span style="color:#ff79c6">.</span>Mediator, puremvc<span style="color:#ff79c6">.</span>interfaces<span style="color:#ff79c6">.</span>IMediator):
</span></span><span style="display:flex;"><span>    NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;MyFormMediator&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, viewComponent):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(MyFormMediator, self)<span style="color:#ff79c6">.</span>__init__(MyFormMediator<span style="color:#ff79c6">.</span>NAME, viewComponent)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>Bind(wx<span style="color:#ff79c6">.</span>EVT_TEXT_ENTER, self<span style="color:#ff79c6">.</span>onSubmit, self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">listNotificationInterests</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> [ AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED ]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">handleNotification</span>(self, notification):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> notification<span style="color:#ff79c6">.</span>getName() <span style="color:#ff79c6">==</span> AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED:
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;handleNotification (mediator)&#34;</span>, notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>            mydata <span style="color:#ff79c6">=</span> notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>SetValue(mydata)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">onSubmit</span>(self, evt):
</span></span><span style="display:flex;"><span>        mydata <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>GetValue()
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;got (mediator)&#34;</span>, mydata
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>sendNotification(AppFacade<span style="color:#ff79c6">.</span>DATA_SUBMITTED, mydata, self<span style="color:#ff79c6">.</span>viewComponent)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">DataSubmittedCommand</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>command<span style="color:#ff79c6">.</span>SimpleCommand, puremvc<span style="color:#ff79c6">.</span>interfaces<span style="color:#ff79c6">.</span>ICommand):
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">execute</span>(self, notification):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;execute (command)&#34;</span>, notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>        mydata <span style="color:#ff79c6">=</span> notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4"># self.sendNotification(AppFacade.DATA_CHANGED, mydata.upper())  # DELETE LINE</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>datamodelProxy <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>facade<span style="color:#ff79c6">.</span>retrieveProxy(DataModelProxy<span style="color:#ff79c6">.</span>NAME)  <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>datamodelProxy<span style="color:#ff79c6">.</span>setData(mydata<span style="color:#ff79c6">.</span>upper())                           <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">DataModelProxy</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>proxy<span style="color:#ff79c6">.</span>Proxy): <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DataModelProxy&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(DataModelProxy, self)<span style="color:#ff79c6">.</span>__init__(DataModelProxy<span style="color:#ff79c6">.</span>NAME, [])
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>data <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">setData</span>(self, data):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>data <span style="color:#ff79c6">=</span> data
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;setData (model)&#34;</span>, data
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>sendNotification(AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED, self<span style="color:#ff79c6">.</span>data)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AppFacade</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>facade<span style="color:#ff79c6">.</span>Facade):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    DATA_SUBMITTED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_SUBMITTED&#34;</span>
</span></span><span style="display:flex;"><span>    DATA_CHANGED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_CHANGED&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @staticmethod
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">getInstance</span>():
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> AppFacade()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">initializeController</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(AppFacade, self)<span style="color:#ff79c6">.</span>initializeController()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(AppFacade, self)<span style="color:#ff79c6">.</span>registerCommand(AppFacade<span style="color:#ff79c6">.</span>DATA_SUBMITTED, DataSubmittedCommand)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AppFrame</span>(wx<span style="color:#ff79c6">.</span>Frame):
</span></span><span style="display:flex;"><span>    myForm <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>    mvcfacade <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Frame<span style="color:#ff79c6">.</span>__init__(self,parent<span style="color:#ff79c6">=</span><span style="color:#ff79c6">None</span>, <span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=-</span><span style="color:#bd93f9">1</span>, title<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Refactoring to PureMVC&#34;</span>,size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">200</span>,<span style="color:#bd93f9">100</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>myForm <span style="color:#ff79c6">=</span> MyForm(self)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade <span style="color:#ff79c6">=</span> AppFacade<span style="color:#ff79c6">.</span>getInstance()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade<span style="color:#ff79c6">.</span>registerMediator(MyFormMediator(self<span style="color:#ff79c6">.</span>myForm ))
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade<span style="color:#ff79c6">.</span>registerProxy(DataModelProxy())   <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">WxApp</span>(wx<span style="color:#ff79c6">.</span>App):
</span></span><span style="display:flex;"><span>    appFrame <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">OnInit</span>(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame <span style="color:#ff79c6">=</span> AppFrame()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame<span style="color:#ff79c6">.</span>Show()
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> __name__ <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    wxApp <span style="color:#ff79c6">=</span> WxApp(redirect<span style="color:#ff79c6">=</span><span style="color:#ff79c6">False</span>)
</span></span><span style="display:flex;"><span>    wxApp<span style="color:#ff79c6">.</span>MainLoop()
</span></span></code></pre></div><p><img src="/blog/images/puremvcfuss_step5model.png" alt=""></p>
<hr>
<h2 id="taking-stock">Taking Stock</h2>
<p>Intermission – Taking Stock.</p>
<p>At this stage the PureMVC architecture is fully operational.</p>
<p>Here is the class diagram:</p>
<p><img src="/blog/images/puremvcfussUMLstep5takestock.png" alt=""></p>
<p><em>Class diagram of our application thus far.</em></p>
<p>Here is the sequence diagram:</p>
<p><img src="/blog/images/puremvcfussUMLstep5sequence.png" alt=""></p>
<p><em>Sequence diagram of what happens after the user types in some text<br>
and hits ENTER in the GUI.</em></p>
<p>Note that the proxy, mediator and command classes actually have a very convenient <code>sendNotification</code> method <em>on themselves</em> (rather than having a reference to the facade&rsquo;s <code>sendNotification</code> method as illustrated in the above sequence diagram). In actuality, these self.<code>sendNotification</code> methods ultimately get routed to the facade anyway, so the sequence diagram above is essentially correct.</p>
<blockquote>
<p>“Aha” moment – several roles have been distilled out of two hacky lines of code</p>
</blockquote>
<p>Its interesting that we have distilled three roles out of the original, two simple lines of code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>mydata <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>myForm<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>GetValue()
</span></span><span style="display:flex;"><span>self<span style="color:#ff79c6">.</span>myForm<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>SetValue(mydata<span style="color:#ff79c6">.</span>upper())
</span></span></code></pre></div><p>The above code gets some user input text, converts it to uppercase and stuffs it back into the GUI. After our PureMVC refactoring steps, those roles are now spread out across various classes and a major architectural revamp. The roles are:</p>
<ul>
<li>
<p>Getting the data in and out of the GUI (mediator)</p>
</li>
<li>
<p>Converting the text to uppercase (command)</p>
</li>
</ul>
<p>And we have added in an additional role which the original code didn&rsquo;t do</p>
<ul>
<li>Holding and storing an independent representation of the text being displayed (model proxy)</li>
</ul>
<p>Sure, we&rsquo;ve added complexity – boy have we ever. But now we have something amazingly scalable. We won&rsquo;t be scaling this application up in this tutorial, however there are a couple more refactoring steps to do in order to tidy up a few things.</p>
<hr>
<h3 id="6-model-proxy">6. Model Proxy</h3>
<p>Add a real Model behind the Model Proxy and Initialise the Model.</p>
<p>Let&rsquo;s now add a proper model that the model proxy wraps. In our simple example so far, this step seems redundant as it may seem easier to keep the string stored in the model proxy. Why not make the model proxy be the model?</p>
<p>In more complex projects, model proxies can become properly useful – possibly representing a number of model objects under the one model proxy, or even returning result sets due to the underlying data model being a database.</p>
<p>Another reason to separate the ModelProxy from the Model is that the ModelProxy class is free to “play ball” with the PureMVC framework e.g. sending out various notification messages whenever data gets changed etc. whereas a Model class is typically oblivious to such things (and probably should remain so). In our example, the DataModelProxy sends out a <code>DATA_CHANGED</code> notification – both in the constructor, and also whenever setData() is called.</p>
<p><img src="/blog/images/puremvcfussUMLstep6.png" alt=""></p>
<p><em>Adding a real model behind the model proxy.</em></p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p>Add a proper model class <code>Data</code> and have the <code>DataModelProxy</code> wrap it.</p>
</li>
<li>
<p>Initialise the model with an initial string - and watch the default text appear in the GUI when the application starts up!</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> wx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.interfaces
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.mediator
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.command
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.proxy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyForm</span>(wx<span style="color:#ff79c6">.</span>Panel):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, parent):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Panel<span style="color:#ff79c6">.</span>__init__(self,parent,<span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">3</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>inputFieldTxt <span style="color:#ff79c6">=</span> wx<span style="color:#ff79c6">.</span>TextCtrl(self, <span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>, size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">170</span>,<span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>), pos<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">5</span>, <span style="color:#bd93f9">10</span>), style<span style="color:#ff79c6">=</span>wx<span style="color:#ff79c6">.</span>TE_PROCESS_ENTER)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyFormMediator</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>mediator<span style="color:#ff79c6">.</span>Mediator, puremvc<span style="color:#ff79c6">.</span>interfaces<span style="color:#ff79c6">.</span>IMediator):
</span></span><span style="display:flex;"><span>    NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;MyFormMediator&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, viewComponent):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(MyFormMediator, self)<span style="color:#ff79c6">.</span>__init__(MyFormMediator<span style="color:#ff79c6">.</span>NAME, viewComponent)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>Bind(wx<span style="color:#ff79c6">.</span>EVT_TEXT_ENTER, self<span style="color:#ff79c6">.</span>onSubmit, self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">listNotificationInterests</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> [ AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED ]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">handleNotification</span>(self, notification):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> notification<span style="color:#ff79c6">.</span>getName() <span style="color:#ff79c6">==</span> AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED:
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;handleNotification (mediator)&#34;</span>, notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>            mydata <span style="color:#ff79c6">=</span> notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>SetValue(mydata)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">onSubmit</span>(self, evt):
</span></span><span style="display:flex;"><span>        mydata <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>GetValue()
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;got (mediator)&#34;</span>, mydata
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>sendNotification(AppFacade<span style="color:#ff79c6">.</span>DATA_SUBMITTED, mydata, self<span style="color:#ff79c6">.</span>viewComponent)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">DataSubmittedCommand</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>command<span style="color:#ff79c6">.</span>SimpleCommand, puremvc<span style="color:#ff79c6">.</span>interfaces<span style="color:#ff79c6">.</span>ICommand):
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">execute</span>(self, notification):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;execute (command)&#34;</span>, notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>        mydata <span style="color:#ff79c6">=</span> notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>datamodelProxy <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>facade<span style="color:#ff79c6">.</span>retrieveProxy(DataModelProxy<span style="color:#ff79c6">.</span>NAME)
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>datamodelProxy<span style="color:#ff79c6">.</span>setData(mydata<span style="color:#ff79c6">.</span>upper())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">DataModelProxy</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>proxy<span style="color:#ff79c6">.</span>Proxy):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DataModelProxy&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(DataModelProxy, self)<span style="color:#ff79c6">.</span>__init__(DataModelProxy<span style="color:#ff79c6">.</span>NAME, [])
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">#self.data = &#34;&#34; # DELETE THIS LINE</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>realdata <span style="color:#ff79c6">=</span> Data()   <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>sendNotification(AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED, self<span style="color:#ff79c6">.</span>realdata<span style="color:#ff79c6">.</span>data)   <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">setData</span>(self, data):
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">#self.data = data # DELETE THIS LINE</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>realdata<span style="color:#ff79c6">.</span>data <span style="color:#ff79c6">=</span> data   <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;setData (model)&#34;</span>, data
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">#self.sendNotification(AppFacade.DATA_CHANGED, self.data) # DELETE THIS LINE</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>sendNotification(AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED, self<span style="color:#ff79c6">.</span>realdata<span style="color:#ff79c6">.</span>data)   <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">Data</span>: <span style="color:#6272a4">#ADD CLASS</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>data <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Hello - hit enter&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AppFacade</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>facade<span style="color:#ff79c6">.</span>Facade):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    DATA_SUBMITTED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_SUBMITTED&#34;</span>
</span></span><span style="display:flex;"><span>    DATA_CHANGED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_CHANGED&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @staticmethod
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">getInstance</span>():
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> AppFacade()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">initializeController</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(AppFacade, self)<span style="color:#ff79c6">.</span>initializeController()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(AppFacade, self)<span style="color:#ff79c6">.</span>registerCommand(AppFacade<span style="color:#ff79c6">.</span>DATA_SUBMITTED, DataSubmittedCommand)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AppFrame</span>(wx<span style="color:#ff79c6">.</span>Frame):
</span></span><span style="display:flex;"><span>    myForm <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>    mvcfacade <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Frame<span style="color:#ff79c6">.</span>__init__(self,parent<span style="color:#ff79c6">=</span><span style="color:#ff79c6">None</span>, <span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=-</span><span style="color:#bd93f9">1</span>, title<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Refactoring to PureMVC&#34;</span>,size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">200</span>,<span style="color:#bd93f9">100</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>myForm <span style="color:#ff79c6">=</span> MyForm(self)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade <span style="color:#ff79c6">=</span> AppFacade<span style="color:#ff79c6">.</span>getInstance()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade<span style="color:#ff79c6">.</span>registerMediator(MyFormMediator(self<span style="color:#ff79c6">.</span>myForm ))
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade<span style="color:#ff79c6">.</span>registerProxy(DataModelProxy())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">WxApp</span>(wx<span style="color:#ff79c6">.</span>App):
</span></span><span style="display:flex;"><span>    appFrame <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">OnInit</span>(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame <span style="color:#ff79c6">=</span> AppFrame()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame<span style="color:#ff79c6">.</span>Show()
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> __name__ <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    wxApp <span style="color:#ff79c6">=</span> WxApp(redirect<span style="color:#ff79c6">=</span><span style="color:#ff79c6">False</span>)
</span></span><span style="display:flex;"><span>    wxApp<span style="color:#ff79c6">.</span>MainLoop()
</span></span></code></pre></div><h3 id="the-application-initialisation-sequence">The Application Initialisation Sequence</h3>
<p>Getting intitial Model data into the GUI.</p>
<p>A nice effect here is that the string <strong>&ldquo;Hello - hit enter&rdquo;</strong> in the Data class magically appears in the GUI when the application starts up. How cool – some of this PureMVC architecture is starting to pay off. How does this happen? Well, notice that the DataModelProxy sends out a DATA_CHANGED notification in its constructor (when it is also creating the instance of the real model Data class). The mediator intercepts this notification and displays the string in the GUI form.</p>
<p><img src="/blog/images/puremvcfuss_step6refine.png" alt=""></p>
<p><em>Two screenshots of our PureMVC wxPython application, showing how the model data magically appears in the GUI form on application startup.</em></p>
<hr>
<h3 id="7-startup-code">7. Startup code</h3>
<p>Move the startup code into a startup command class</p>
<p>Personally I&rsquo;m not convinced this step is really necessary - however this step follows the convention on how PureMVC applications are put together.</p>
<p><img src="/blog/images/puremvcfussUMLstep7startupcmd.png" alt=""></p>
<p><em>The new startup command class.</em></p>
<p>Moving most of the startup code into its own command class may have the benefit of organising your code a little more, at the cost of complexity – I mean, we already have a nice place for constructing classes etc in the constructor of the AppFrame class. Even if we move some startup code into its own startup command class, we still need to create the form and the facade in AppFrame, so why not keep all the startup code in the one place? On the other hand, by moving what we can into the startup command, we may be helping decouple the AppFrame startup code from the knowledge of all the other clases involved in your framework e.g. mediators, commands etc. Certainly in a Flex application where namespaces are tightly controlled, or even a more serious python application where namespaces are more of an issue, having a startup comand class is a good thing.</p>
<ol>
<li>
<p>Move the startup code into a startup command class</p>
</li>
<li>
<p>Change our initialisation to invoke the startup command via a notification message</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> wx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.interfaces
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.mediator
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.command
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> puremvc.patterns.proxy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyForm</span>(wx<span style="color:#ff79c6">.</span>Panel):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, parent):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Panel<span style="color:#ff79c6">.</span>__init__(self,parent,<span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span><span style="color:#bd93f9">3</span>)
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>inputFieldTxt <span style="color:#ff79c6">=</span> wx<span style="color:#ff79c6">.</span>TextCtrl(self, <span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>, size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">170</span>,<span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>), pos<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">5</span>, <span style="color:#bd93f9">10</span>), style<span style="color:#ff79c6">=</span>wx<span style="color:#ff79c6">.</span>TE_PROCESS_ENTER)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">MyFormMediator</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>mediator<span style="color:#ff79c6">.</span>Mediator, puremvc<span style="color:#ff79c6">.</span>interfaces<span style="color:#ff79c6">.</span>IMediator):
</span></span><span style="display:flex;"><span>    NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;MyFormMediator&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self, viewComponent):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(MyFormMediator, self)<span style="color:#ff79c6">.</span>__init__(MyFormMediator<span style="color:#ff79c6">.</span>NAME, viewComponent)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>Bind(wx<span style="color:#ff79c6">.</span>EVT_TEXT_ENTER, self<span style="color:#ff79c6">.</span>onSubmit, self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">listNotificationInterests</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> [ AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED ]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">handleNotification</span>(self, notification):
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> notification<span style="color:#ff79c6">.</span>getName() <span style="color:#ff79c6">==</span> AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED:
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;handleNotification (mediator)&#34;</span>, notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>            mydata <span style="color:#ff79c6">=</span> notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>            self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>SetValue(mydata)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">onSubmit</span>(self, evt):
</span></span><span style="display:flex;"><span>        mydata <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>viewComponent<span style="color:#ff79c6">.</span>inputFieldTxt<span style="color:#ff79c6">.</span>GetValue()
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;got (mediator)&#34;</span>, mydata
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>sendNotification(AppFacade<span style="color:#ff79c6">.</span>DATA_SUBMITTED, mydata, self<span style="color:#ff79c6">.</span>viewComponent)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">DataSubmittedCommand</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>command<span style="color:#ff79c6">.</span>SimpleCommand, puremvc<span style="color:#ff79c6">.</span>interfaces<span style="color:#ff79c6">.</span>ICommand):
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">execute</span>(self, notification):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;execute (command)&#34;</span>, notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>        mydata <span style="color:#ff79c6">=</span> notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>datamodelProxy <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>facade<span style="color:#ff79c6">.</span>retrieveProxy(DataModelProxy<span style="color:#ff79c6">.</span>NAME)
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>datamodelProxy<span style="color:#ff79c6">.</span>setData(mydata<span style="color:#ff79c6">.</span>upper())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">StartupCommand</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>command<span style="color:#ff79c6">.</span>SimpleCommand, puremvc<span style="color:#ff79c6">.</span>interfaces<span style="color:#ff79c6">.</span>ICommand): <span style="color:#6272a4">#ADD CLASS</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">execute</span>(self, notification):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;startup execute (command)&#34;</span>, notification<span style="color:#ff79c6">.</span>getBody(), notification<span style="color:#ff79c6">.</span>getType()
</span></span><span style="display:flex;"><span>        wxapp <span style="color:#ff79c6">=</span> notification<span style="color:#ff79c6">.</span>getBody()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>facade<span style="color:#ff79c6">.</span>registerMediator(MyFormMediator(wxapp<span style="color:#ff79c6">.</span>myForm))
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>facade<span style="color:#ff79c6">.</span>registerProxy(DataModelProxy())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">DataModelProxy</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>proxy<span style="color:#ff79c6">.</span>Proxy):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DataModelProxy&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(DataModelProxy, self)<span style="color:#ff79c6">.</span>__init__(DataModelProxy<span style="color:#ff79c6">.</span>NAME, [])
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>realdata <span style="color:#ff79c6">=</span> Data()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>sendNotification(AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED, self<span style="color:#ff79c6">.</span>realdata<span style="color:#ff79c6">.</span>data)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">setData</span>(self, data):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>realdata<span style="color:#ff79c6">.</span>data <span style="color:#ff79c6">=</span> data
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">print</span> <span style="color:#f1fa8c">&#34;setData (model)&#34;</span>, data
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>sendNotification(AppFacade<span style="color:#ff79c6">.</span>DATA_CHANGED, self<span style="color:#ff79c6">.</span>realdata<span style="color:#ff79c6">.</span>data)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">Data</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>self<span style="color:#ff79c6">.</span>data<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Hello - hit enter&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AppFacade</span>(puremvc<span style="color:#ff79c6">.</span>patterns<span style="color:#ff79c6">.</span>facade<span style="color:#ff79c6">.</span>Facade):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    STARTUP <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;STARTUP&#34;</span>   <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>    DATA_SUBMITTED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_SUBMITTED&#34;</span>
</span></span><span style="display:flex;"><span>    DATA_CHANGED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_CHANGED&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @staticmethod
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">getInstance</span>():
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> AppFacade()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">initializeController</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(AppFacade, self)<span style="color:#ff79c6">.</span>initializeController()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(AppFacade, self)<span style="color:#ff79c6">.</span>registerCommand(AppFacade<span style="color:#ff79c6">.</span>STARTUP, StartupCommand)   <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(AppFacade, self)<span style="color:#ff79c6">.</span>registerCommand(AppFacade<span style="color:#ff79c6">.</span>DATA_SUBMITTED, DataSubmittedCommand)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">startup</span>(self, app):   <span style="color:#6272a4">#ADD METHOD</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>sendNotification( AppFacade<span style="color:#ff79c6">.</span>STARTUP, app )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AppFrame</span>(wx<span style="color:#ff79c6">.</span>Frame):
</span></span><span style="display:flex;"><span>    myForm <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>    mvcfacade <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        wx<span style="color:#ff79c6">.</span>Frame<span style="color:#ff79c6">.</span>__init__(self,parent<span style="color:#ff79c6">=</span><span style="color:#ff79c6">None</span>, <span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=-</span><span style="color:#bd93f9">1</span>, title<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Refactoring to PureMVC&#34;</span>,size<span style="color:#ff79c6">=</span>(<span style="color:#bd93f9">200</span>,<span style="color:#bd93f9">100</span>))
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>myForm <span style="color:#ff79c6">=</span> MyForm(self)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade <span style="color:#ff79c6">=</span> AppFacade<span style="color:#ff79c6">.</span>getInstance()
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4"># self.mvcfacade.registerMediator(MyFormMediator(self.myForm )) # DELETE</span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4"># self.mvcfacade.registerProxy(DataModelProxy()) # DELETE</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>mvcfacade<span style="color:#ff79c6">.</span>startup(self)   <span style="color:#6272a4">#ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">WxApp</span>(wx<span style="color:#ff79c6">.</span>App):
</span></span><span style="display:flex;"><span>    appFrame <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">None</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">OnInit</span>(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame <span style="color:#ff79c6">=</span> AppFrame()
</span></span><span style="display:flex;"><span>        self<span style="color:#ff79c6">.</span>appFrame<span style="color:#ff79c6">.</span>Show()
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">True</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> __name__ <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    wxApp <span style="color:#ff79c6">=</span> WxApp(redirect<span style="color:#ff79c6">=</span><span style="color:#ff79c6">False</span>)
</span></span><span style="display:flex;"><span>    wxApp<span style="color:#ff79c6">.</span>MainLoop()
</span></span></code></pre></div><p><img src="/blog/images/puremvcfuss_step7startupcmd.png" alt=""></p>
<h2 id="conclusion">Conclusion</h2>
<p>Here is the final UML.</p>
<p><img src="/blog/images/puremvcfussUMLstep999.png" alt=""></p>
<p><em>Final UML of our example</em></p>
<p>You may notice that there are hardly any dependencies between classes. This is because classes communicate with each other via the PureMVC message notification system. This takes the form of a string message broadcast to the “world” e.g. e.g. <strong>facade.sendNotification(“DATA_CHANGED”, notificationMsg)</strong> - the sender doesn&rsquo;t really care who handles it. Or it can take the form of looking up model instances, again by string references e.g. <strong>facade.retreiveProxy(“datamodelproxy1”)</strong>. We end up with a very decoupled design. Nice.</p>
<h3 id="too-much-complexity">Too much Complexity?</h3>
<p>This series of refactorings has shown how you can really complicate your application by utilising the PureMVC framework. :-)</p>
<p>Seriously, on the positive side, you now have a scalable architecture where you can add more notification messages, more mediators, more commands – and everything will fit together. I think that a framework has value not just because of what it does, but rather because it guides you in how to structure your application – how to name your classes and where to put them, and how they play together.</p>
<p>If your application is simple it may not be worthwhile incorporating PureMVC, however hopefully this tutorial has shown you that it is not that hard to start with the PureMVC approach. I may have inspired you to use PureMVC with even your simple apps!</p>
<p>Finally, this tutorial has shown that you can hack something up in wxPython and then later, switch to PureMVC when you need to, in a step by step way.</p>
<p>Source code for all the steps is available <a href="http://www.atug.com/downloads/puremvcrefactor_python.zip">here</a>.</p>
<p>If you prefer a java example walkthrough, click <a href="http://www.andypatterns.com/index.php?cID=86" title="Refactoring to PureMVC - Java version">here</a>.</p>
<p>-Andy Bulka<br>
March 2009</p>
<p>P.S. This blog posting was presented as a talk to the Melbourne Patterns Group on the 1st April, 2009.</p>
<h2 id="comments">Comments</h2>
<h3 id="posted-by-arun-george-on-feb-15th-2012">Posted by Arun George on Feb 15th, 2012</h3>
<p>Great article on pureMVC and its applicalbility through a simple example. This is cool. A very simple example which explains the complexity :) .</p>
<h3 id="posted-by-byron-harris-on-may-25th-2012">Posted by Byron Harris on May 25th, 2012</h3>
<p>Thanks for providing this example. It helps me in applying the concepts in the PureMVC documentation to Python and wxPython.</p>
<p>A few minor points about the example code:</p>
<ul>
<li>
<p>In the <code>DataSubmittedCommand.execute()</code>, it&rsquo;s not necessary to add attribute datamodelProxy since Command classes are meant to be stateless. Therefore you can just make datamodelProxy a method variable.</p>
</li>
<li>
<p>In <code>StartupCommand.execute()</code>, the variable named wxapp is inappropriate named. It&rsquo;s actually an AppFrame instance that is passed.</p>
</li>
</ul>
<h3 id="posted-by-tjaved-on-sep-25th-2012">Posted by T.Javed on Sep 25th, 2012</h3>
<p>Thank You so much!</p>
<p>I had read all the pureMVC documentation but was finding it hard to grasp it until I came across this nice little tutorial. It helped me a lot to clearly understand the pureMVC concept and implementation.</p>
<p>cheers!</p>
<h3 id="posted-by-demolishun-on-oct-20th-2012">Posted by Demolishun on Oct 20th, 2012</h3>
<p>Putting logic in the controller does not make sense to me:</p>
<p><a href="http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model">http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model</a></p>
<p><a href="http://stackoverflow.com/questions/235233/asp-net-mvc-should-business-logic-exist-in-controllers">http://stackoverflow.com/questions/235233/asp-net-mvc-should-business-logic-exist-in-controllers</a></p>
<p>I am starting down the path to using pureMVC in my projects, but your example is confusing. It seems to me that the controller is supposed to be light weight and act as glue. What is the reasoning for putting the business logic in the controller and not the model?</p>
<p>When I began to understand MVC it clicked in my head that the model would be independent and could be swapped out just like the view. I am also a little concerned about the AppFrame knowing about the Facade. This makes it harder to swap out the view. Or am I looking at this the wrong way?</p>
<hr>
<h2 id="java-example">Java Example</h2>
<p>Refactoring to PureMVC - Java</p>
<p>Here is a Java version of the tutorial I originally wrote in wxPython. It leaves out most of the commentary and concentrates on the code, so please read the <a href="http://www.andypatterns.com/index.php?cID=84" title="Refactoring to PureMVC">original tutorial</a> for more detail about the meaning of the refactoring steps.</p>
<p>I have used the same class names and the logic is identical (except for the parameters to the notification message DATA_SUBMITTED, which I have swapped around due to the fact that in the Java PureMVC framework the getBody() parameter is of type object whereas in dynamic Python the type of this paramter is more flexible – more explanation is found below).</p>
<h3 id="1-starting-point-1">1. Starting Point</h3>
<p>Step 1. Create a Basic Java GUI application form</p>
<p>Create a Java GUI application. Either hand code it or e.g. use Netbeans to kick start you. Then drop a</p>
<p><code>javax.swing.JTextField jTextField1</code></p>
<p>to the form. Don&rsquo;t bother adding any behaviour yet, lets get cracking with the refactoring.</p>
<h3 id="2-add-a-mediator-1">2. Add a mediator</h3>
<p>Step 2. Import PureMVC and add a mediator</p>
<p>Here is the mediator.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * MyFormMediator.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.mediator.Mediator;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.interfaces.INotification;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> javapuremvcminimal01.JavaPureMVCMinimal01Form;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> java.awt.event.ActionEvent;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> java.awt.event.ActionListener;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">MyFormMediator</span> <span style="color:#8be9fd;font-style:italic">extends</span> Mediator <span style="color:#8be9fd;font-style:italic">implements</span> ActionListener {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;MyFormMediator&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">MyFormMediator</span>(JavaPureMVCMinimal01Form viewComponent)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(NAME, <span style="color:#ff79c6">null</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        setViewComponent(viewComponent);
</span></span><span style="display:flex;"><span>        viewComponent.<span style="color:#50fa7b">inputFieldTxt</span>.<span style="color:#50fa7b">addActionListener</span>(<span style="color:#ff79c6">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">actionPerformed</span>(ActionEvent evt) {
</span></span><span style="display:flex;"><span>        JavaPureMVCMinimal01Form form <span style="color:#ff79c6">=</span> (JavaPureMVCMinimal01Form) viewComponent;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        form.<span style="color:#50fa7b">inputFieldTxt</span>.<span style="color:#50fa7b">setText</span>(form.<span style="color:#50fa7b">inputFieldTxt</span>.<span style="color:#50fa7b">getText</span>().<span style="color:#50fa7b">toUpperCase</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Here is the application startup code, which was generated automatically by Netbeans 6.5 and the startup method was modified to create the PureMVC facade and mediator.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * JavaPureMVCMinimal01App.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> javapuremvcminimal01;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.jdesktop.application.Application;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.jdesktop.application.SingleFrameApplication;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.facade.Facade;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.andy.MyFormMediator;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">/**
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * The main class of the application.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * Based on a Netbeans 6.5 template.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">JavaPureMVCMinimal01App</span> <span style="color:#8be9fd;font-style:italic">extends</span> SingleFrameApplication {
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> JavaPureMVCMinimal01Form myForm;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/**
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">     * At startup create and show the main frame of the application.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">     */</span>
</span></span><span style="display:flex;"><span>    @Override <span style="color:#8be9fd;font-style:italic">protected</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">startup</span>() {
</span></span><span style="display:flex;"><span>        myForm <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> JavaPureMVCMinimal01Form(<span style="color:#ff79c6">this</span>);
</span></span><span style="display:flex;"><span>        Facade mvcfacade <span style="color:#ff79c6">=</span> Facade.<span style="color:#50fa7b">getInstance</span>();
</span></span><span style="display:flex;"><span>        mvcfacade.<span style="color:#50fa7b">registerMediator</span>(<span style="color:#ff79c6">new</span> MyFormMediator(myForm));
</span></span><span style="display:flex;"><span>        show(myForm);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    …
</span></span><span style="display:flex;"><span>    …
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Since we need access to the textField in the swing form generated by netbeans, we declare a public variable for ourselves. Netbeans seems to make all the gui elements private – so we are fighting that.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * JavaPureMVCMinimal01Form.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> *  (by default Netbeans names this JavaPureMVCMinimal01View but I renamed it).
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> javapuremvcminimal01;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> javax.swing.JFrame;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">JavaPureMVCMinimal01Form</span> <span style="color:#8be9fd;font-style:italic">extends</span> FrameView {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> javax.<span style="color:#50fa7b">swing</span>.<span style="color:#50fa7b">JTextField</span> inputFieldTxt;  <span style="color:#6272a4">// ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">JavaPureMVCMinimal01Form</span>(SingleFrameApplication app) {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(app);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        initComponents();
</span></span><span style="display:flex;"><span>        inputFieldTxt <span style="color:#ff79c6">=</span> jTextField1;  <span style="color:#6272a4">// ADD</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        …
</span></span><span style="display:flex;"><span>        …
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="3-command-class-1">3. Command class</h3>
<p>Step 3. Move the business logic into a Command class</p>
<p>Let&rsquo;s now move the behaviour (changing text to uppercase) out of the mediator and into a proper command class.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * DataSubmittedCommand.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.interfaces.ICommand;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.interfaces.INotification;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.command.SimpleCommand;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> javapuremvcminimal01.JavaPureMVCMinimal01Form;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">DataSubmittedCommand</span> <span style="color:#8be9fd;font-style:italic">extends</span> SimpleCommand <span style="color:#8be9fd;font-style:italic">implements</span> ICommand {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">execute</span>(INotification notification)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        String mydata <span style="color:#ff79c6">=</span> (String) notification.<span style="color:#50fa7b">getType</span>();
</span></span><span style="display:flex;"><span>        JavaPureMVCMinimal01Form viewComponent <span style="color:#ff79c6">=</span> (JavaPureMVCMinimal01Form) notification.<span style="color:#50fa7b">getBody</span>();
</span></span><span style="display:flex;"><span>        viewComponent.<span style="color:#50fa7b">inputFieldTxt</span>.<span style="color:#50fa7b">setText</span>(mydata.<span style="color:#50fa7b">toUpperCase</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>When the execute method gets called the first thing the execute code should do is decode the notification message for juicy information. Its fairly arbitrary how you use the notification class fields .getBody() and getType(). In the java implementation the only limitation is that getBody() holds an object and getType() a string. Use your own convention on how to use these two parameters, which can be different for each unique notifcation message - just make sure your sendNotification sends the right things to match how you are decoding things.</p>
<p>In the example so far, in the notification message DATA_SUBMITTED I use the getBody() field to pass a reference to the viewcomponent, i.e. the form. This is only a temporary situation, we will later change this so that the command simply raises a message and let the mediator deal with the viewcomponent (which is the mediators job). I use the getType() parameter of the notification message to hold the text of the edit control at the time when the use hit ENTER.</p>
<p>Now the mediator has changed a little. It no longer does the work of uppercase, it delegates this entirely to the command class simply by raising a DATA_SUBMITTED message:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * MyFormMediator.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.mediator.Mediator;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.interfaces.INotification;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> javapuremvcminimal01.JavaPureMVCMinimal01Form;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> java.awt.event.ActionEvent;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> java.awt.event.ActionListener;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">MyFormMediator</span> <span style="color:#8be9fd;font-style:italic">extends</span> Mediator <span style="color:#8be9fd;font-style:italic">implements</span> ActionListener {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;MyFormMediator&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">MyFormMediator</span>(JavaPureMVCMinimal01Form viewComponent)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(NAME, <span style="color:#ff79c6">null</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        setViewComponent(viewComponent);
</span></span><span style="display:flex;"><span>        viewComponent.<span style="color:#50fa7b">inputFieldTxt</span>.<span style="color:#50fa7b">addActionListener</span>(<span style="color:#ff79c6">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">actionPerformed</span>(ActionEvent evt) {
</span></span><span style="display:flex;"><span>        JavaPureMVCMinimal01Form form <span style="color:#ff79c6">=</span> (JavaPureMVCMinimal01Form) viewComponent;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// form.inputFieldTxt.setText(form.inputFieldTxt.getText().toUpperCase());  // DELETE THIS LINE</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">sendNotification</span>(AppFacade.<span style="color:#50fa7b">DATA_SUBMITTED</span>, viewComponent, form.<span style="color:#50fa7b">inputFieldTxt</span>.<span style="color:#50fa7b">getText</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Note that another way to send a notification message (instead of sendNotification) is:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.observer.Notification;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">facade</span>.<span style="color:#50fa7b">notifyObservers</span>(<span style="color:#ff79c6">new</span> Notification(AppFacade.<span style="color:#50fa7b">DATA_SUBMITTED</span>, 
</span></span><span style="display:flex;"><span>        viewComponent, form.<span style="color:#50fa7b">inputFieldTxt</span>.<span style="color:#50fa7b">getText</span>()));
</span></span></code></pre></div><p>however this is a bit PureMVC old school and not quite as clean as what we have used.</p>
<p>We also have needed to create our own concrete Facade class so that we can define our own message types.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * AppFacade.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.facade.Facade;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">AppFacade</span> <span style="color:#8be9fd;font-style:italic">extends</span> Facade {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String DATA_SUBMITTED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_SUBMITTED&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> AppFacade instance <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> AppFacade <span style="color:#50fa7b">getInst</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> (instance <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">null</span>) {
</span></span><span style="display:flex;"><span>            instance <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> AppFacade();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> (AppFacade) instance;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">protected</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">initializeController</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>.<span style="color:#50fa7b">initializeController</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        registerCommand(DATA_SUBMITTED, DataSubmittedCommand.<span style="color:#50fa7b">class</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>And of course we instantiate our own concrete facade instead of the base class facade:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * JavaPureMVCMinimal01App.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span>    …
</span></span><span style="display:flex;"><span>    …
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override <span style="color:#8be9fd;font-style:italic">protected</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">startup</span>() {
</span></span><span style="display:flex;"><span>        myForm <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> JavaPureMVCMinimal01Form(<span style="color:#ff79c6">this</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        Facade mvcfacade <span style="color:#ff79c6">=</span> Facade.<span style="color:#50fa7b">getInstance</span>();
</span></span><span style="display:flex;"><span>        Facade mvcfacade <span style="color:#ff79c6">=</span> AppFacade.<span style="color:#50fa7b">getInst</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        mvcfacade.<span style="color:#50fa7b">registerMediator</span>(<span style="color:#ff79c6">new</span> MyFormMediator(myForm));
</span></span><span style="display:flex;"><span>        show(myForm);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h3 id="4-gui-access-logic-1">4. GUI Access Logic</h3>
<p>Step 4. Move the ability to access the GUI out of the Command class</p>
<p>Let&rsquo;s now have the command raise a notification message after it has done its work, and let the <em>mediator</em> look after putting the result back into the gui.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * MyFormMediator.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.mediator.Mediator;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.interfaces.INotification;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> javapuremvcminimal01.JavaPureMVCMinimal01Form;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> java.awt.event.ActionEvent;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> java.awt.event.ActionListener;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">MyFormMediator</span> <span style="color:#8be9fd;font-style:italic">extends</span> Mediator <span style="color:#8be9fd;font-style:italic">implements</span> ActionListener {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;MyFormMediator&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">MyFormMediator</span>(JavaPureMVCMinimal01Form viewComponent)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(NAME, <span style="color:#ff79c6">null</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        setViewComponent(viewComponent);
</span></span><span style="display:flex;"><span>        viewComponent.<span style="color:#50fa7b">inputFieldTxt</span>.<span style="color:#50fa7b">addActionListener</span>(<span style="color:#ff79c6">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">actionPerformed</span>(ActionEvent evt) {
</span></span><span style="display:flex;"><span>        JavaPureMVCMinimal01Form form <span style="color:#ff79c6">=</span> (JavaPureMVCMinimal01Form) viewComponent;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// form.inputFieldTxt.setText(form.inputFieldTxt.getText().toUpperCase());  DELETE</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">sendNotification</span>(AppFacade.<span style="color:#50fa7b">DATA_SUBMITTED</span>, viewComponent, form.<span style="color:#50fa7b">inputFieldTxt</span>.<span style="color:#50fa7b">getText</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> String<span style="color:#ff79c6">[]</span> <span style="color:#50fa7b">listNotificationInterests</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">new</span> String<span style="color:#ff79c6">[]</span> {AppFacade.<span style="color:#50fa7b">DATA_CHANGED</span>};
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">handleNotification</span>(INotification notification)
</span></span><span style="display:flex;"><span>    {    
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span>(notification.<span style="color:#50fa7b">getName</span>().<span style="color:#50fa7b">equals</span>(AppFacade.<span style="color:#50fa7b">DATA_CHANGED</span>))
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            System.<span style="color:#50fa7b">out</span>.<span style="color:#50fa7b">println</span>(<span style="color:#f1fa8c">&#34;handleNotification (mediator) &#34;</span> <span style="color:#ff79c6">+</span> notification.<span style="color:#50fa7b">getType</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            String mydata <span style="color:#ff79c6">=</span> (String) notification.<span style="color:#50fa7b">getType</span>();
</span></span><span style="display:flex;"><span>            JavaPureMVCMinimal01Form form <span style="color:#ff79c6">=</span> (JavaPureMVCMinimal01Form) viewComponent;
</span></span><span style="display:flex;"><span>            form.<span style="color:#50fa7b">inputFieldTxt</span>.<span style="color:#50fa7b">setText</span>(mydata);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * DataSubmittedCommand.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.interfaces.ICommand;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.interfaces.INotification;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.command.SimpleCommand;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// import javapuremvcminimal01.JavaPureMVCMinimal01Form;  DELETE</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">DataSubmittedCommand</span> <span style="color:#8be9fd;font-style:italic">extends</span> SimpleCommand <span style="color:#8be9fd;font-style:italic">implements</span> ICommand {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">execute</span>(INotification notification)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        String mydata <span style="color:#ff79c6">=</span> (String) notification.<span style="color:#50fa7b">getType</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// JavaPureMVCMinimal01Form viewComponent = (JavaPureMVCMinimal01Form) notification.getBody();  DELETE</span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// viewComponent.inputFieldTxt.setText(mydata.toUpperCase());  DELETE</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">sendNotification</span>(AppFacade.<span style="color:#50fa7b">DATA_CHANGED</span>, <span style="color:#ff79c6">null</span>, mydata.<span style="color:#50fa7b">toUpperCase</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Notice that the mediator is putting the result of the command behaviour (the uppercasing of user entered text) into the gui – the command is not touching the GUI anymore, which explains why the command no longer needs to import the GUI form class JavaPureMVCMinimal01Form.</p>
<p>The command class DataSubmittedCommand simply raises a notification, passing the changed text as part of the notifcation message (we are using the getType() parameter to hold the uppercased string – though we could have passed it around in the getBody() parameter).</p>
<p>Finally we need to add the new notification message type to the facade:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * AppFacade.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.facade.Facade;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">AppFacade</span> <span style="color:#8be9fd;font-style:italic">extends</span> Facade {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String DATA_SUBMITTED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_SUBMITTED&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String DATA_CHANGED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_CHANGED&#34;</span>;
</span></span><span style="display:flex;"><span>    …
</span></span><span style="display:flex;"><span>    …
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="5-add-a-model-1">5. Add a Model</h3>
<p>Step 5. Add a Model</p>
<p>Let&rsquo;s add a proper model. For now we leave out the real model behind the proxy and use the proxy class as both proxy and model.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * DataModelProxy.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.proxy.Proxy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">DataModelProxy</span> <span style="color:#8be9fd;font-style:italic">extends</span> Proxy {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DataModelProxy&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> String data;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">DataModelProxy</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(NAME, <span style="color:#ff79c6">null</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">data</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">setData</span>(String data) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">data</span> <span style="color:#ff79c6">=</span> data;
</span></span><span style="display:flex;"><span>        System.<span style="color:#50fa7b">out</span>.<span style="color:#50fa7b">println</span>(<span style="color:#f1fa8c">&#34;setData (model) &#34;</span> <span style="color:#ff79c6">+</span> data);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">sendNotification</span>(AppFacade.<span style="color:#50fa7b">DATA_CHANGED</span>, <span style="color:#ff79c6">null</span>, <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">data</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We alter the command class to poke the uppercase string into the model. We then let the model notify the world that the model data has altered.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * DataSubmittedCommand.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.interfaces.ICommand;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.interfaces.INotification;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.command.SimpleCommand;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">DataSubmittedCommand</span> <span style="color:#8be9fd;font-style:italic">extends</span> SimpleCommand <span style="color:#8be9fd;font-style:italic">implements</span> ICommand {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">execute</span>(INotification notification)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        String mydata <span style="color:#ff79c6">=</span> (String) notification.<span style="color:#50fa7b">getType</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// this.sendNotification(AppFacade.DATA_CHANGED, null, mydata.toUpperCase());  DELETE</span>
</span></span><span style="display:flex;"><span>        DataModelProxy datamodelProxy <span style="color:#ff79c6">=</span> (DataModelProxy) facade.<span style="color:#50fa7b">retrieveProxy</span>(DataModelProxy.<span style="color:#50fa7b">NAME</span>);
</span></span><span style="display:flex;"><span>        datamodelProxy.<span style="color:#50fa7b">setData</span>(mydata.<span style="color:#50fa7b">toUpperCase</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Finally we need to instantiate and register the DataModelProxy instance in the application&rsquo;s startup code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * JavaPureMVCMinimal01App.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> javapuremvcminimal01;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.jdesktop.application.Application;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.jdesktop.application.SingleFrameApplication;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.facade.Facade;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.andy.MyFormMediator;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">JavaPureMVCMinimal01App</span> <span style="color:#8be9fd;font-style:italic">extends</span> SingleFrameApplication {
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> JavaPureMVCMinimal01Form myForm;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/**
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">     * At startup create and show the main frame of the application.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">     */</span>
</span></span><span style="display:flex;"><span>    @Override <span style="color:#8be9fd;font-style:italic">protected</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">startup</span>() {
</span></span><span style="display:flex;"><span>        myForm <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> JavaPureMVCMinimal01Form(<span style="color:#ff79c6">this</span>);
</span></span><span style="display:flex;"><span>        Facade mvcfacade <span style="color:#ff79c6">=</span> AppFacade.<span style="color:#50fa7b">getInst</span>();
</span></span><span style="display:flex;"><span>        mvcfacade.<span style="color:#50fa7b">registerMediator</span>(<span style="color:#ff79c6">new</span> MyFormMediator(myForm));
</span></span><span style="display:flex;"><span>        mvcfacade.<span style="color:#50fa7b">registerProxy</span>(<span style="color:#ff79c6">new</span> DataModelProxy());
</span></span><span style="display:flex;"><span>        show(myForm);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    …
</span></span><span style="display:flex;"><span>    …
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="6-model-proxy-1">6. Model Proxy</h3>
<p>Step 6. Add a real Model behind the Model Proxy and Initialise the Model</p>
<p>Let&rsquo;s now add a proper model that the model proxy wraps.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * Data.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">Data</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> String data;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">Data</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">data</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;Hello - hit enter&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * DataModelProxy.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.proxy.Proxy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">DataModelProxy</span> <span style="color:#8be9fd;font-style:italic">extends</span> Proxy {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String NAME <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DataModelProxy&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// private String data; DELETE</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> Data realdata;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#50fa7b">DataModelProxy</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>(NAME, <span style="color:#ff79c6">null</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// this.data = &#34;&#34;; DELETE</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">realdata</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> Data();
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">sendNotification</span>(AppFacade.<span style="color:#50fa7b">DATA_CHANGED</span>, <span style="color:#ff79c6">null</span>, <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">realdata</span>.<span style="color:#50fa7b">data</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">setData</span>(String data) {
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// this.data = data; DELETE</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">realdata</span>.<span style="color:#50fa7b">data</span> <span style="color:#ff79c6">=</span> data;
</span></span><span style="display:flex;"><span>        System.<span style="color:#50fa7b">out</span>.<span style="color:#50fa7b">println</span>(<span style="color:#f1fa8c">&#34;setData (model) &#34;</span> <span style="color:#ff79c6">+</span> data);
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// this.sendNotification(AppFacade.DATA_CHANGED, null, this.data); DELETE</span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// this.sendNotification(AppFacade.DATA_CHANGED, null, this.realdata.data); DELETE</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>I have make the model string data public to keep the example simple. Feel free to add setters and getters.</p>
<h3 id="7-startup-code-1">7. Startup code</h3>
<p>Step 7. Move the startup code into a startup command class</p>
<p>Let&rsquo;s now create a startup command and move as much of the startup logic into there.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * StartupCommand.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.interfaces.ICommand;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.interfaces.INotification;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.command.SimpleCommand;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> javapuremvcminimal01.JavaPureMVCMinimal01App;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">StartupCommand</span> <span style="color:#8be9fd;font-style:italic">extends</span> SimpleCommand <span style="color:#8be9fd;font-style:italic">implements</span> ICommand {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">execute</span>(INotification notification)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        System.<span style="color:#50fa7b">out</span>.<span style="color:#50fa7b">println</span>(<span style="color:#f1fa8c">&#34;startup execute (command) &#34;</span> <span style="color:#ff79c6">+</span> notification.<span style="color:#50fa7b">getBody</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        JavaPureMVCMinimal01App app <span style="color:#ff79c6">=</span> (JavaPureMVCMinimal01App) notification.<span style="color:#50fa7b">getBody</span>();
</span></span><span style="display:flex;"><span>        facade.<span style="color:#50fa7b">registerMediator</span>(<span style="color:#ff79c6">new</span> MyFormMediator(app.<span style="color:#50fa7b">myForm</span>));
</span></span><span style="display:flex;"><span>        facade.<span style="color:#50fa7b">registerProxy</span>(<span style="color:#ff79c6">new</span> DataModelProxy());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We need register the startup command with the facade and define a STARTUP message which will be used to trigger it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * AppFacade.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> org.andy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.puremvc.java.patterns.facade.Facade;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> javapuremvcminimal01.JavaPureMVCMinimal01App;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">AppFacade</span> <span style="color:#8be9fd;font-style:italic">extends</span> Facade {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String STARTUP <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;STARTUP&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String DATA_SUBMITTED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_SUBMITTED&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String DATA_CHANGED <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;DATA_CHANGED&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> AppFacade instance <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">null</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> AppFacade <span style="color:#50fa7b">getInst</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> (instance <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">null</span>) {
</span></span><span style="display:flex;"><span>            instance <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> AppFacade();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> (AppFacade) instance;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @Override
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">protected</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">initializeController</span>()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">super</span>.<span style="color:#50fa7b">initializeController</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        registerCommand(STARTUP, StartupCommand.<span style="color:#50fa7b">class</span>);
</span></span><span style="display:flex;"><span>        registerCommand(DATA_SUBMITTED, DataSubmittedCommand.<span style="color:#50fa7b">class</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">startup</span>(JavaPureMVCMinimal01App app)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.<span style="color:#50fa7b">sendNotification</span>(STARTUP, app, <span style="color:#ff79c6">null</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>And we need to alter the application startup code to do less. Notice that we lose the need for some imports, thus proving that a reason for having the startup command is to decouple and loosen dependencies.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> * JavaPureMVCMinimal01App.java
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"> */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">package</span> javapuremvcminimal01;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.jdesktop.application.Application;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.jdesktop.application.SingleFrameApplication;
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// import org.puremvc.java.patterns.facade.Facade;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> org.andy.AppFacade;
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// import org.andy.MyFormMediator;</span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// import org.andy.DataModelProxy;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">class</span> <span style="color:#50fa7b">JavaPureMVCMinimal01App</span> <span style="color:#8be9fd;font-style:italic">extends</span> SingleFrameApplication {
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">public</span> JavaPureMVCMinimal01Form myForm;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">/**
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">     * At startup create and show the main frame of the application.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">     */</span>
</span></span><span style="display:flex;"><span>    @Override <span style="color:#8be9fd;font-style:italic">protected</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">startup</span>() {
</span></span><span style="display:flex;"><span>        myForm <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> JavaPureMVCMinimal01Form(<span style="color:#ff79c6">this</span>);
</span></span><span style="display:flex;"><span>        Facade AppFacade mvcfacade <span style="color:#ff79c6">=</span> AppFacade.<span style="color:#50fa7b">getInst</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// mvcfacade.registerMediator(new MyFormMediator(myForm));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// mvcfacade.registerProxy(new DataModelProxy());</span>
</span></span><span style="display:flex;"><span>        mvcfacade.<span style="color:#50fa7b">startup</span>(<span style="color:#ff79c6">this</span>);
</span></span><span style="display:flex;"><span>        show(myForm);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    …
</span></span><span style="display:flex;"><span>    …
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Since we are calling a brand new <code>startup()</code> method on our concrete facade, and this method is not declared in the Facade base class, we need to change the declaration we have been using from Facade to AppFacade. The author of PureMVC recommends this technique of bootstrapping however whether the <code>startup()</code> method officially makes it into the base class in future versions of PureMVC remains to be seen. We don&rsquo;t have to hold our breath for this, as you can see, we simply define our own <code>startup()</code> method on our own concrete facade class.</p>
<h3 id="8-packaging">8. Packaging</h3>
<p>Step 8. Java specific – Organise the classes into packages</p>
<p>You could potentially move the classes into packages that reflect the roles they are playing. How about:</p>
<ul>
<li>
<p>Data and DataModelProxy → <strong>Model</strong> package</p>
</li>
<li>
<p>DataSubmittedCommand and StartupCommand → <strong>Controller</strong> package</p>
</li>
<li>
<p>MyFormMediator and JavaPureMVCMinimal01Form → <strong>View</strong> package</p>
</li>
</ul>
<p>and we might as well&hellip;</p>
<ul>
<li>JavaPureMVCMinimal01App and AppFacade → <strong>App</strong> package</li>
</ul>
<p>Here are a couple of screenshots of the GUI in operation:</p>
<p><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussJAVA1.png" alt=""></p>
<pre tabindex="0"><code>compile:

run:

startup execute (command) javapuremvcminimal01.JavaPureMVCMinimal01App@1e67ac

handleNotification (mediator) Hello - hit enter
</code></pre><p>User hits ENTER</p>
<p><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussJAVA2.png" alt=""></p>
<pre tabindex="0"><code>setData (model) HELLO - HIT ENTER

handleNotification (mediator) HELLO - HIT ENTER
</code></pre><h3 id="conclusion-java">Conclusion (Java)</h3>
<p>We have seen how we can introduce PureMVC into an existing Netbeans application, step by step. I haven&rsquo;t hooked up the about box or the menus into the PureMVC system because these things were created by default by Netbeans and I was focussed simply on duplicating the Python minimalist example.</p>
<p>The <a href="#1-starting-point">Python refactoring steps above</a> contain more explanation than this Java example, so that may be useful to study too.</p>
<h2 id="resources">Resources</h2>
<ul>
<li>The <a href="http://www.atug.com/downloads/puremvcrefactor_java.zip">Java source code</a> for this example.</li>
<li>The <a href="http://www.atug.com/downloads/puremvcrefactor_python.zip">Python source code</a> for this example.</li>
</ul>

	<ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5">
  <li>
    <a href="/blog/2009/03/01/puremvc/" aria-label="Previous - PureMVC" class="btn btn-primary"><span class="me-1">←</span>Previous</a>
  </li>
  <li>
    <a href="/blog/2010/11/18/ruby-vs-python-list-comprehensions/" aria-label="Next - Ruby vs Python list comprehensions" class="btn btn-primary">Next<span class="ms-1">→</span></a>
  </li>
</ul>

	<div class="td-page-meta__lastmod">
  Last modified March 10, 2022: <a href="https://github.com/abulka/abulka.github.io/commit/9c1d0fd813e93ab2c2862b73dd0d54bd3d9db82f">added tag cloud (9c1d0fd)</a>
</div>
</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Twitter" aria-label="Twitter">
    <a target="_blank" rel="noopener" href="https://twitter.com/unjazz" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/abulka/abulka.github.io" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2024
    <span class="td-footer__authors">Andy Bulka</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span><span class="ms-2"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></span><p class="td-footer__about mt-2"><a href="/about/">About Andrew Bulka</a></p>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.69e2c1ae9320465ab10236d9ef752c6a4442c54b48b883b17c497b7c7d96a796.js" integrity="sha256-aeLBrpMgRlqxAjbZ73UsakRCxUtIuIOxfEl7fH2Wp5Y=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>