<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>HexMVC | Andy Bulka</title>
<meta name="description" content="Hexagonal Architecture pattern &#43; Model View Controller (MVC)">
<meta property="og:url" content="https://abulka.github.io/patterns/hexmvc/">
  <meta property="og:site_name" content="Andy Bulka">
  <meta property="og:title" content="HexMVC">
  <meta property="og:description" content="Hexagonal Architecture pattern &#43; Model View Controller (MVC)">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="patterns">
    <meta property="article:published_time" content="2022-02-12T00:00:00+00:00">
    <meta property="article:modified_time" content="2022-03-10T13:25:22+11:00">
    <meta property="article:tag" content="Design Patterns">
    <meta property="article:tag" content="MVC">
    <meta property="article:tag" content="Controllers">
    <meta property="article:tag" content="Javascript">

  <meta itemprop="name" content="HexMVC">
  <meta itemprop="description" content="Hexagonal Architecture pattern &#43; Model View Controller (MVC)">
  <meta itemprop="datePublished" content="2022-02-12T00:00:00+00:00">
  <meta itemprop="dateModified" content="2022-03-10T13:25:22+11:00">
  <meta itemprop="wordCount" content="5298">
  <meta itemprop="keywords" content="Design Patterns,MVC,Controllers,Javascript">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="HexMVC">
  <meta name="twitter:description" content="Hexagonal Architecture pattern &#43; Model View Controller (MVC)">




<link rel="preload" href="/scss/main.min.14fa15fc58c12d37d276ddf7a238d2028bfd61a7cc9685a90604de3b79d28104.css" as="style">
<link href="/scss/main.min.14fa15fc58c12d37d276ddf7a238d2028bfd61a7cc9685a90604de3b79d28104.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X0GNQ7330T"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-X0GNQ7330T');
}
</script>
  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">Andy Bulka</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/blog/"><span>Blog</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/projects/"><span>Projects</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/patterns/"><span>My Design Patterns</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/about/"><span>About</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.6421e9826e33774355b4eb73b5fc0d2e.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.6421e9826e33774355b4eb73b5fc0d2e.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-patterns-li">
  <a href="/patterns/" title="Andy Bulka&#39;s Design Patterns" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-patterns"><span class="">My Design Patterns</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-patternshexmvc-li">
  <a href="/patterns/hexmvc/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-patternshexmvc"><span class="td-sidebar-nav-active-item">HexMVC</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-patternsrelationship-manager-li">
  <a href="/patterns/relationship-manager/" title="Relationship Manager - Design Pattern" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-patternsrelationship-manager"><span class="">Relationship Manager</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-patternsmvca-pattern-li">
  <a href="/patterns/mvca-pattern/" title="MVC-App Architectural Pattern" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-patternsmvca-pattern"><span class="">MVC-App Pattern</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-patternstransformation-interface-li">
  <a href="/patterns/transformation-interface/" title="Transformation Interface Design Pattern" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-patternstransformation-interface"><span class="">Transformation Interface</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-patternsdesign-pattern-automation-li">
  <a href="/patterns/design-pattern-automation/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-patternsdesign-pattern-automation"><span class="">Design Pattern Automation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-patternsmusings-on-patterns-li">
  <a href="/patterns/musings-on-patterns/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-patternsmusings-on-patterns"><span class="">Appendix: Musings on Design Patterns</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-patternsappendix-koala-plop-li">
  <a href="/patterns/appendix-koala-plop/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-patternsappendix-koala-plop"><span class="">Appendix: My KoalaPlop Patterns</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-patternshexmvc-adapters-li">
  <a href="/patterns/hexmvc-adapters/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-patternshexmvc-adapters"><span class=""></span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-patternshexmvc-eventing-li">
  <a href="/patterns/hexmvc-eventing/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-patternshexmvc-eventing"><span class=""></span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-patternshexmvc-scraps-li">
  <a href="/patterns/hexmvc-scraps/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-patternshexmvc-scraps"><span class=""></span></a>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/abulka/abulka.github.io/tree/main/content/patterns/hexmvc.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/abulka/abulka.github.io/edit/main/content/patterns/hexmvc.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/abulka/abulka.github.io/new/main/content/patterns?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/abulka/abulka.github.io/issues/new?title=HexMVC" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/abulka/abulka.github.io/issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  
</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#abstract">Abstract</a></li>
    <li><a href="#example---python">Example - Python</a></li>
    <li><a href="#example---javascript">Example - Javascript</a></li>
    <li><a href="#hexmvc-history">HexMvc History</a>
      <ul>
        <li><a href="#mgm-days">MGM days</a></li>
        <li><a href="#next-steps">Next steps</a></li>
        <li><a href="#hexmvc-in-a-nutshell">HexMVC in a nutshell</a></li>
        <li><a href="#rules-and-roles">Rules and Roles:</a></li>
      </ul>
    </li>
    <li><a href="#layered-architectures">Layered Architectures</a></li>
    <li><a href="#hexmvc-fundamentals">HexMVC Fundamentals</a>
      <ul>
        <li><a href="#app-in-the-centre">App in the centre</a></li>
        <li><a href="#hexmvc-control-flow">HexMvc Control flow</a></li>
        <li><a href="#controller">Controller</a></li>
        <li><a href="#eventing">Eventing</a></li>
        <li><a href="#the-bootstrapper">The Bootstrapper</a></li>
        <li><a href="#dependency-injection">Dependency Injection</a></li>
      </ul>
    </li>
    <li><a href="#hexmvc-in-detail">HexMvc in Detail</a>
      <ul>
        <li><a href="#app-to-gui-boundary">App to GUI boundary</a></li>
        <li><a href="#view">View</a></li>
        <li><a href="#app-to-model-boundary">App to Model boundary</a></li>
        <li><a href="#model-to-persistence-boundary">Model to Persistence boundary</a></li>
        <li><a href="#app-to-server-boundary">App to Server boundary</a></li>
      </ul>
    </li>
    <li><a href="#appendix">Appendix</a>
      <ul>
        <li><a href="#adapters">Adapters</a></li>
        <li><a href="#events">Events</a></li>
        <li><a href="#hexmvc-source-code">HexMVC Source Code</a></li>
      </ul>
    </li>
    <li><a href="#presentation-in-2012">Presentation in 2012</a>
      <ul>
        <li><a href="#post-presentation-clarifications">Post Presentation Clarifications</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            <div class="taxonomy taxonomy-terms-cloud taxo-tags">
      <h5 class="taxonomy-title">Tag Cloud</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/ai/" data-taxonomy-term="ai"><span class="taxonomy-label">AI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/argument-mapping/" data-taxonomy-term="argument-mapping"><span class="taxonomy-label">Argument Mapping</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/async/" data-taxonomy-term="async"><span class="taxonomy-label">Async</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/calculators/" data-taxonomy-term="calculators"><span class="taxonomy-label">Calculators</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/chords/" data-taxonomy-term="chords"><span class="taxonomy-label">Chords</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/code-translation/" data-taxonomy-term="code-translation"><span class="taxonomy-label">Code Translation</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/composition/" data-taxonomy-term="composition"><span class="taxonomy-label">Composition</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/controllers/" data-taxonomy-term="controllers"><span class="taxonomy-label">Controllers</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/design-patterns/" data-taxonomy-term="design-patterns"><span class="taxonomy-label">Design Patterns</span><span class="taxonomy-count">23</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/dev-ops/" data-taxonomy-term="dev-ops"><span class="taxonomy-label">Dev Ops</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/diagramming/" data-taxonomy-term="diagramming"><span class="taxonomy-label">Diagramming</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/django/" data-taxonomy-term="django"><span class="taxonomy-label">Django</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/electron/" data-taxonomy-term="electron"><span class="taxonomy-label">Electron</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/flask/" data-taxonomy-term="flask"><span class="taxonomy-label">Flask</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/flutter/" data-taxonomy-term="flutter"><span class="taxonomy-label">Flutter</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/fultter/" data-taxonomy-term="fultter"><span class="taxonomy-label">Fultter</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/gui/" data-taxonomy-term="gui"><span class="taxonomy-label">GUI</span><span class="taxonomy-count">10</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/java/" data-taxonomy-term="java"><span class="taxonomy-label">Java</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/javascript/" data-taxonomy-term="javascript"><span class="taxonomy-label">Javascript</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/jupyter/" data-taxonomy-term="jupyter"><span class="taxonomy-label">Jupyter</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/midi/" data-taxonomy-term="midi"><span class="taxonomy-label">MIDI</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/mind-mapping/" data-taxonomy-term="mind-mapping"><span class="taxonomy-label">Mind Mapping</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/music/" data-taxonomy-term="music"><span class="taxonomy-label">Music</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/mvc/" data-taxonomy-term="mvc"><span class="taxonomy-label">MVC</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/observer/" data-taxonomy-term="observer"><span class="taxonomy-label">Observer</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/orm/" data-taxonomy-term="orm"><span class="taxonomy-label">ORM</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/philosophy/" data-taxonomy-term="philosophy"><span class="taxonomy-label">Philosophy</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/programmable/" data-taxonomy-term="programmable"><span class="taxonomy-label">Programmable</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/python/" data-taxonomy-term="python"><span class="taxonomy-label">Python</span><span class="taxonomy-count">18</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/reasoning/" data-taxonomy-term="reasoning"><span class="taxonomy-label">Reasoning</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/refactoring/" data-taxonomy-term="refactoring"><span class="taxonomy-label">Refactoring</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/ruby/" data-taxonomy-term="ruby"><span class="taxonomy-label">Ruby</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/software-product/" data-taxonomy-term="software-product"><span class="taxonomy-label">Software Product</span><span class="taxonomy-count">12</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/sql/" data-taxonomy-term="sql"><span class="taxonomy-label">SQL</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/thoughts/" data-taxonomy-term="thoughts"><span class="taxonomy-label">Thoughts</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/ubuntu/" data-taxonomy-term="ubuntu"><span class="taxonomy-label">Ubuntu</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/ui-widgets/" data-taxonomy-term="ui-widgets"><span class="taxonomy-label">UI Widgets</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/uml/" data-taxonomy-term="uml"><span class="taxonomy-label">UML</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/vscode/" data-taxonomy-term="vscode"><span class="taxonomy-label">Vscode</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/vuejs/" data-taxonomy-term="vuejs"><span class="taxonomy-label">Vuejs</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="https://abulka.github.io/tags/wxpython/" data-taxonomy-term="wxpython"><span class="taxonomy-label">WxPython</span><span class="taxonomy-count">4</span></a></li>
        </ul>
    </div>
  
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/patterns/">My Design Patterns</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    HexMVC</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>HexMVC</h1>
	<div class="lead">Hexagonal Architecture pattern + Model View Controller (MVC)</div>
	<header class="article-meta">
		<div class="taxonomy taxonomy-terms-article taxo-tags">
  <h5 class="taxonomy-title">Tags:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/design-patterns/" data-taxonomy-term="design-patterns"><span class="taxonomy-label">Design Patterns</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/mvc/" data-taxonomy-term="mvc"><span class="taxonomy-label">MVC</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/controllers/" data-taxonomy-term="controllers"><span class="taxonomy-label">Controllers</span></a></li>
    <li><a class="taxonomy-term" href="https://abulka.github.io/tags/javascript/" data-taxonomy-term="javascript"><span class="taxonomy-label">Javascript</span></a></li>
    </ul>
</div>

  </header>
	<p>Andy Bulka,<br>
March 2012</p>
<p>A new, architectural pattern for building multi-platform, scalable applications based on ideas from the Hexagonal Architecture pattern + Model View Controller (MVC).</p>
<p><strong>TLDR:</strong> Write the application layer but don&rsquo;t import or use any libraries directly.  Wrap all &ldquo;library&rdquo; calls with Adapter objects, so that you can switch to other libraries easily.</p>
<p><strong>TLDR:</strong> &ldquo;Libraries&rdquo; can amazingly, include the application data Model itself, Database and persistence layers, the entire GUI and all calls to server APIs. Plug and play everything with this architecture!</p>
<h1 id="patternsimageshexmvcimage16png"><img src="/patterns/images/hexmvc/image16.png" alt=""></h1>
<blockquote>
<p>This is a draft article, written in 2012. It could do with some further editing, but I&rsquo;ve never gotten around to it, so finally decided to publish it anyway, in 2022.</p>
</blockquote>
<h2 id="abstract">Abstract</h2>
<p>HexMVC - This is my name for an architectural pattern that has arisen out of some long term research into PureMVC and ways to simplify it. Its also an attempt to fix some of the unsatisfactory aspects of traditional layered architectures by incorporating some core ideas out of the mysterious Hexagonal Architecture pattern.  The hexagonal structure allows us to put the model on a more equal footing with other layers - rather than always having the model ‘at the bottom’.  Its a rejection of a complex &rsquo;event&rsquo;-ing framework in favour of multicast delegation based on interfaces. It uses dependency injection to configure apps to use different libraries and frameworks, whilst keeping the core app the same.</p>
<p>I will present a fully functional example code which can be configured to run under pure python or under .NET using a choice of different GUI libraries (wxpython or windows forms or wpf), different server libraries (bottle or .NET). Everything is switchable using config files. The persistence layer is also switchable and the servers implement REST APIs consistent with the services offered by the core App.</p>
<p>Note that the example code needs no framework code whatsoever, thus could be considered an architectural pattern - an abstract idea that can be implemented in any language and used in any project.  The pattern lets you develop a core application and swap in &amp; out alternate gui&rsquo;s, persistence and services.  It prescribes how to add app functionality whilst keeping your design clean.</p>
<h2 id="example---python">Example - Python</h2>
<p>Here is a real configuration Python file which assembles, injects and launches my sample application. The application consists of a GUI, a Server, a model with application logic.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ff79c6">from</span> ModelOo <span style="color:#ff79c6">import</span> Model
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">from</span> ModelOoAdapter <span style="color:#ff79c6">import</span> ModelOoAdapter
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#from PersistenceOoPickle import Persistence</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">from</span> PersistenceOoHomegrown <span style="color:#ff79c6">import</span> Persistence
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">from</span> ServerBottleAdapter <span style="color:#ff79c6">import</span> Server
</span></span><span style="display:flex;"><span><span style="color:#6272a4">#from ServerMockAdapter import Server</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">from</span> ViewWxAdapter <span style="color:#ff79c6">import</span> MyWxApp
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">import</span> wx
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">from</span> UtilRandomStdpythonAdapter <span style="color:#ff79c6">import</span> RandomIntFunction
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">from</span> UtilJsonStdpythonAdapter <span style="color:#ff79c6">import</span> JsonFromDictFunction
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">from</span> App <span style="color:#ff79c6">import</span> App
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Create Model - Object Oriented instances in memory</span>
</span></span><span style="display:flex;"><span>model_oo <span style="color:#ff79c6">=</span> Model()
</span></span><span style="display:flex;"><span>persistence <span style="color:#ff79c6">=</span> Persistence()
</span></span><span style="display:flex;"><span>model <span style="color:#ff79c6">=</span> ModelOoAdapter(model_oo, persistence)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Create Server</span>
</span></span><span style="display:flex;"><span>server <span style="color:#ff79c6">=</span> Server(host<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#39;localhost&#39;</span>, port<span style="color:#ff79c6">=</span><span style="color:#bd93f9">8081</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Create Gui</span>
</span></span><span style="display:flex;"><span>wxapp <span style="color:#ff79c6">=</span> MyWxApp(redirect<span style="color:#ff79c6">=</span><span style="color:#ff79c6">False</span>)
</span></span><span style="display:flex;"><span>gui <span style="color:#ff79c6">=</span> wxapp<span style="color:#ff79c6">.</span>myframe  <span style="color:#6272a4"># gui mediator inherits from gui rather than wrapping it</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Hook up Utility adapters</span>
</span></span><span style="display:flex;"><span>gui<span style="color:#ff79c6">.</span>random <span style="color:#ff79c6">=</span> RandomIntFunction
</span></span><span style="display:flex;"><span>server<span style="color:#ff79c6">.</span>json_from_dict <span style="color:#ff79c6">=</span> JsonFromDictFunction
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Create Core Hexagon App and inject adapters</span>
</span></span><span style="display:flex;"><span>app <span style="color:#ff79c6">=</span> App(model, server, gui)
</span></span><span style="display:flex;"><span>wx<span style="color:#ff79c6">.</span>CallAfter(app<span style="color:#ff79c6">.</span>Boot)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Start Gui</span>
</span></span><span style="display:flex;"><span>wxapp<span style="color:#ff79c6">.</span>MainLoop() 
</span></span></code></pre></div><h2 id="example---javascript">Example - Javascript</h2>
<p>Here is a Todo app implementation in Javascript <a href="https://www.google.com/url?q=http://jsfiddle.net/tcab/mC5qA/&amp;sa=D&amp;source=editors&amp;ust=1644533497537306&amp;usg=AOvVaw2IyZvhDC0eV65oxs-1pTn-">http://jsfiddle.net/tcab/mC5qA/</a></p>
<p><img src="/patterns/images/hexmvc/javascript-impl-add.png" alt="javascript-impl-add"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">select</span> <span style="color:#50fa7b">id</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;list&#34;</span> <span style="color:#50fa7b">size</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;10&#34;</span> <span style="color:#50fa7b">style</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;width: 15em&#34;</span>&gt;&lt;/<span style="color:#ff79c6">select</span>&gt;&lt;<span style="color:#ff79c6">br</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">button</span> <span style="color:#50fa7b">id</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;plusBtn&#34;</span>&gt;  +  &lt;/<span style="color:#ff79c6">button</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#ff79c6">button</span> <span style="color:#50fa7b">id</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;minusBtn&#34;</span>&gt;  -  &lt;/<span style="color:#ff79c6">button</span>&gt;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">MODEL
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> ListModel <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span> (items) {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">this</span>._items <span style="color:#ff79c6">=</span> items;
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">this</span>._selectedIndex <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>ListModel.prototype <span style="color:#ff79c6">=</span> {
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    getItems <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> [].concat(<span style="color:#ff79c6">this</span>._items);
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    addItem <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> (item) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>._items.push(item);
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    removeItemAt <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> (index) {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">var</span> item <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>._items[index];
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>._items.splice(index, <span style="color:#bd93f9">1</span>);
</span></span><span style="display:flex;"><span>        maxindex <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>._items.length <span style="color:#ff79c6">-</span> <span style="color:#bd93f9">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> (<span style="color:#ff79c6">this</span>._selectedIndex <span style="color:#ff79c6">&gt;</span> maxindex) {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">this</span>.setSelectedIndex(maxindex);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> item;
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    getSelectedIndex <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">this</span>._selectedIndex;
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    setSelectedIndex <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> (index) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>._selectedIndex <span style="color:#ff79c6">=</span> index;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> ListModelAdapter <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span> (model) {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">this</span>._model <span style="color:#ff79c6">=</span> model;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ListModelAdapter.prototype <span style="color:#ff79c6">=</span> {
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    getItems <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">this</span>._model.getItems();
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    addItem <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> (item) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>._model.addItem(item);
</span></span><span style="display:flex;"><span>        $(<span style="color:#8be9fd;font-style:italic">document</span>).trigger(<span style="color:#f1fa8c">&#39;MODEL_THING_ADDED&#39;</span>, {item<span style="color:#ff79c6">:</span> item});
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    removeItemAt <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> (index) {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">var</span> item <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>._model.removeItemAt(index);
</span></span><span style="display:flex;"><span>        $(<span style="color:#8be9fd;font-style:italic">document</span>).trigger(<span style="color:#f1fa8c">&#39;MODEL_CHANGED&#39;</span>, {item<span style="color:#ff79c6">:</span> item});
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    getSelectedIndex <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">this</span>._model.getSelectedIndex();
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    setSelectedIndex <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> (index) {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">var</span> previousIndex <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>._selectedIndex;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>._model.setSelectedIndex(index);
</span></span><span style="display:flex;"><span>        $(<span style="color:#8be9fd;font-style:italic">document</span>).trigger(<span style="color:#f1fa8c">&#39;MODEL_SELECTION_CHANGED&#39;</span>, {previous<span style="color:#ff79c6">:</span> previousIndex});
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">/* 
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">VIEW 
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> ListViewAdapter <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span> (model) {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">this</span>._model <span style="color:#ff79c6">=</span> model;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>ListViewAdapter.prototype <span style="color:#ff79c6">=</span> {
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    show <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.rebuildList();
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    rebuildList <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        console.log(<span style="color:#f1fa8c">&#34;VIEW REBUILD with index at &#34;</span> <span style="color:#ff79c6">+</span> <span style="color:#ff79c6">this</span>._model.getSelectedIndex());            
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">var</span> list <span style="color:#ff79c6">=</span> $(<span style="color:#f1fa8c">&#39;#list&#39;</span>);
</span></span><span style="display:flex;"><span>        list.html(<span style="color:#f1fa8c">&#39;&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">var</span> items <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>._model.getItems();
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">var</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">var</span> key <span style="color:#ff79c6">in</span> items) {
</span></span><span style="display:flex;"><span>            list.append($(<span style="color:#f1fa8c">&#39;&lt;option value=&#34;&#39;</span> <span style="color:#ff79c6">+</span> i <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;&#34;&gt;&#39;</span> <span style="color:#ff79c6">+</span> items[key] <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#39;&lt;/option&gt;&#39;</span>)); 
</span></span><span style="display:flex;"><span>            i<span style="color:#ff79c6">++</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>.updateSelected();
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    updateSelected <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        console.log(<span style="color:#f1fa8c">&#34;VIEW updateSelected &#34;</span>  <span style="color:#ff79c6">+</span> <span style="color:#ff79c6">this</span>._model.getSelectedIndex());
</span></span><span style="display:flex;"><span>        $(<span style="color:#f1fa8c">&#39;#list&#39;</span>)[<span style="color:#bd93f9">0</span>].value <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>._model.getSelectedIndex();
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    onAdd <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        $(<span style="color:#8be9fd;font-style:italic">document</span>).trigger(<span style="color:#f1fa8c">&#39;CMD_ADD_ITEM&#39;</span>);
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    onDelete <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        $(<span style="color:#8be9fd;font-style:italic">document</span>).trigger(<span style="color:#f1fa8c">&#39;CMD_DELETE_ITEM&#39;</span>);
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    onListSelectionChanged <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> (e) {
</span></span><span style="display:flex;"><span>        $(<span style="color:#8be9fd;font-style:italic">document</span>).trigger(<span style="color:#f1fa8c">&#39;CMD_SELECTION_CHANGED&#39;</span>, e);
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">/* 
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">CONTROLLER
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">var</span> ListController <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">function</span> (model) {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">this</span>._model <span style="color:#ff79c6">=</span> model;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>ListController.prototype <span style="color:#ff79c6">=</span> {
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    cmdAddItem <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">var</span> item <span style="color:#ff79c6">=</span> prompt(<span style="color:#f1fa8c">&#39;Add item:&#39;</span>, <span style="color:#f1fa8c">&#39;&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> (item)
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">this</span>._model.addItem(item);
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    cmdDelItem <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>        <span style="color:#8be9fd;font-style:italic">var</span> index <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>._model.getSelectedIndex();
</span></span><span style="display:flex;"><span>        console.log(<span style="color:#f1fa8c">&#34;controller delItem &#34;</span> <span style="color:#ff79c6">+</span> index);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">if</span> (index <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">-</span><span style="color:#bd93f9">1</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">this</span>._model.removeItemAt(<span style="color:#ff79c6">this</span>._model.getSelectedIndex());
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    cmdUpdateSelected <span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> (e) {
</span></span><span style="display:flex;"><span>        console.log(<span style="color:#f1fa8c">&#34;CONTROLLER updateSelected &#34;</span> <span style="color:#ff79c6">+</span> e.target.selectedIndex);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">this</span>._model.setSelectedIndex(e.target.selectedIndex);
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">/*
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">Bootstrap
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$(<span style="color:#8be9fd;font-style:italic">function</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">//var model = new ListModel([&#39;aaa&#39;, &#39;bbb&#39;, &#39;ccc&#39;, &#39;ddddd&#39;]);
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    <span style="color:#8be9fd;font-style:italic">var</span> model <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ListModelAdapter(<span style="color:#ff79c6">new</span> ListModel([<span style="color:#f1fa8c">&#39;aaa&#39;</span>, <span style="color:#f1fa8c">&#39;bbb&#39;</span>, <span style="color:#f1fa8c">&#39;ccc&#39;</span>, <span style="color:#f1fa8c">&#39;ddddd&#39;</span>]));
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">var</span> view <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ListViewAdapter(model);
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">var</span> controller <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> ListController(model);  <span style="color:#6272a4">// can also pass in view if you need it.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>                                               
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// Private eventing between gui and gui adapter
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    $(<span style="color:#f1fa8c">&#39;#plusBtn&#39;</span>).click(<span style="color:#8be9fd;font-style:italic">function</span> () { view.onAdd() });
</span></span><span style="display:flex;"><span>    $(<span style="color:#f1fa8c">&#39;#minusBtn&#39;</span>).click(<span style="color:#8be9fd;font-style:italic">function</span> () { view.onDelete() });
</span></span><span style="display:flex;"><span>    $(<span style="color:#f1fa8c">&#39;#list&#39;</span>).change(<span style="color:#8be9fd;font-style:italic">function</span> (e) { view.onListSelectionChanged(e); });
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// More abstract application eventing
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    $(<span style="color:#8be9fd;font-style:italic">document</span>).bind(<span style="color:#f1fa8c">&#39;CMD_ADD_ITEM&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(e) { controller.cmdAddItem(); });
</span></span><span style="display:flex;"><span>    $(<span style="color:#8be9fd;font-style:italic">document</span>).bind(<span style="color:#f1fa8c">&#39;CMD_DELETE_ITEM&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(e) { controller.cmdDelItem(); });
</span></span><span style="display:flex;"><span>    $(<span style="color:#8be9fd;font-style:italic">document</span>).bind(<span style="color:#f1fa8c">&#39;CMD_SELECTION_CHANGED&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(e, info) { controller.cmdUpdateSelected(info); });                                           
</span></span><span style="display:flex;"><span>    $(<span style="color:#8be9fd;font-style:italic">document</span>).bind(<span style="color:#f1fa8c">&#39;MODEL_THING_ADDED&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(e, info) { view.rebuildList(); });
</span></span><span style="display:flex;"><span>    $(<span style="color:#8be9fd;font-style:italic">document</span>).bind(<span style="color:#f1fa8c">&#39;MODEL_CHANGED&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(e, info) { view.rebuildList(); });
</span></span><span style="display:flex;"><span>    $(<span style="color:#8be9fd;font-style:italic">document</span>).bind(<span style="color:#f1fa8c">&#39;MODEL_SELECTION_CHANGED&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(e, info) { view.updateSelected(); });
</span></span><span style="display:flex;"><span>                                                 
</span></span><span style="display:flex;"><span>    view.show();
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><blockquote>
<p>There are more source code implementations in <a href="/patterns/hexmvc/#hexmvc-source-code">the appendix</a></p>
</blockquote>
<h2 id="hexmvc-history">HexMvc History</h2>
<h3 id="mgm-days">MGM days</h3>
<p>My initial simplification and re-telling of MVC came with my <a href="/patterns/mvca-pattern/">MGM pattern</a> where I simply said (well perhaps not so simply, given that it was a paper for a design patterns conference) was that in these (more modern) days where we have proper, sophisticated GUI widgets with eventing and self rendering - there was a need to retell the MVC story - which was traditionally also looking after all eventing, user interaction and even rendering of the GUI.</p>
<p>So I came up with MGM (model-gui-mediator) where the mediator took on the roles of intercepting events from the GUI widget, sticking info into the model, and also of populating the GUI with fresh information.  The “mediator” class (the last “M” in MGM - although visually it sat more in the middle - between the model and the gui) was a controller and view adapter in one - whereas these days I would separate these two roles, as you will see in HexMVC.  </p>
<p>The benefit of this variation of the MVC design pattern was that was practical and minimalist.  It dealt with the reality of modern gui widgets, whether they be GUI widgets or html DOM elements and created only a single class that mediated with a model.  In a sense it was the simplest MVC possible, whilst retaining model and gui separation.</p>
<h3 id="next-steps">Next steps</h3>
<p>As I learned more about the roles involved in MVC, and encountered variants that teased apart those roles more fully (like pureMVC) I became interested in upscaling my MVC approach a little so that it was more all encompassing and took into account whole-application considerations, like providing a central controller layer for housing many ‘commands’.  </p>
<p>Then I became interested in bootstrapping the wiring of whole apps with MVC architectures, and eventually in the swappability of guis and models - which led to HexMVC.</p>
<h3 id="hexmvc-in-a-nutshell">HexMVC in a nutshell</h3>
<blockquote>
<p><strong>TLDR:</strong> Write the application layer but don&rsquo;t import or use any libraries directly.  Wrap all library calls with Adapter objects, so that you can switch to other libraries easily.</p>
</blockquote>
<p>HexMVC says that there must be a view class that looks after the off the shelf GUI widget (or in the case of the browser, the DOM element).  In the wild, the term “view” is ambiguous and sometimes means the gui adapter or the gui or both.  I use the term view adapter for the class that looks after the widget/DOM element.</p>
<p>So far this is not controversial.  HexMVC then goes on to say a few more interesting things:</p>
<ul>
<li>
<p>Firstly, that models and GUI widgets should be treated on an equal footing, and be “adapted”.</p>
</li>
<li>
<p>Secondly, that generic, application eventing should occur between adapters and a central controller - any private eventing between the gui and its adapter should remain private. In the case of model adapters, they implement all the eventing and the models remain pure.  </p>
</li>
<li>
<p>Lastly, the application and controller are bound together as the “application hub”, which may be split into many command objects. The application layer talks to the orbiting sattelite functionality via the adapter interfaces, and thus the application is insulated from changes in the “implementation”.  Adapters can, more efficiently, also talk to each other directly, but again, only through the adapter interfaces.</p>
</li>
</ul>
<p>More broadly, the HexMVC approach is wired up through dependency injection and eventing and as you may have noticed, the use of adapters - more specifically families of adapters - so that different implementations can be plugged in without the application noticing.  An adapter is essentially a ‘driver’ you install for a particular implementation being used - like a new printer driver for a new printer.  That’s where the ‘hex’ comes into it, from the ‘hexagonal’ architecture pattern idea (later renamed “ports and adapters”).</p>
<h3 id="rules-and-roles">Rules and Roles:</h3>
<p>Note: when I say ‘notifies’ I mean via notifications via eventing - which is managed/wired up by dependency injection - and not through layers actually knowing about each other.</p>
<ul>
<li>view layer notifies controller, model layer usually does not notify controller, but it could.</li>
<li>model layer often efficiently notifies view layer directly, yes.</li>
<li>view layer can read from model later directly, yes - but not modify it.</li>
<li>controller can manipulate both model and view layers.</li>
</ul>
<h2 id="layered-architectures">Layered Architectures</h2>
<p>I had always been fascinated by the idea of pluggable, modular application designs where you could plug in decoupled services/functionality into an app.  Its a truth that adding functionality adds complexity almost exponentially - it becomes harder and harder to add features without introducing problems and inteference.  I wanted a way out of that.</p>
<p>Simple layering:</p>
<p><img src="/patterns/images/hexmvc/image8.png" alt=""></p>
<p>A recent talk I gave on layered architectures reinforced the benefits of layering. However I found numerous people talking about the limitations of having the model ‘at the bottom’ of the layering stack.  Plus lots of people were introducing an ‘infrastructure layer’ which stood vertically and had access to all layers.  </p>
<p><img src="/patterns/images/hexmvc/image1.png" alt=""></p>
<p>Finally, there were all these techniques for breaking out of layers, like broadcast notifications, eventing and dependency injection.  So I got to thinking that maybe a different metaphor was needed, something a bit less vertical, and more like a circle.</p>
<p><img src="/patterns/images/hexmvc/image10.png" alt=""></p>
<p><em>Possible evolution of layering</em></p>
<p>When teaching design patterns courses including sessions about the adapter pattern, I would always end that particular session with the idea of using adapters as a way of insulating an app from the ‘bad outside world’ and adapt all external libraries.  It was a radical, intriguiing idea - possibly a bit impractical and theoretical. So I ended up trying to build such a system anyway.</p>
<p><img src="/patterns/images/hexmvc/image18.png" alt=""></p>
<p>Alistair Cockburn described a <a href="https://www.google.com/url?q=http://alistair.cockburn.us/Hexagonal%2Barchitecture&amp;sa=D&amp;source=editors&amp;ust=1644533497539284&amp;usg=AOvVaw2f2mT_1Zk2v3iJ84jJRrNP">hexagonal architecture</a> (later renamed Ports and Adapters pattern) which had services, gui’s, db, etc. around a central app.  The application talked to adapters.  </p>
<p><img src="/patterns/images/hexmvc/image24.gif" alt=""></p>
<p><em>The hexagonal architecture</em></p>
<blockquote>
</blockquote>
<p>This was the architecture I was intrigued by, but there were no reference implementations, and a lot of the writing on the webpage seemed theoretical and sketchy - like a half baked idea that nobody had actually tried.  So I went ahead and built something similar - as simply as possible.</p>
<p>I had always liked the <a href="https://www.google.com/url?q=http://puremvc.org/&amp;sa=D&amp;source=editors&amp;ust=1644533497539894&amp;usg=AOvVaw0krRSlmvdpyy7V-x2aGNRS">PureMvc</a> pattern, which was a bold retelling of the mvc architecture pattern.  It described all the roles in an mvc architecture, and provided strict rules as to who knows who and how the sequence of interactions went.  I wrote a number of <a href="https://www.google.com/url?q=http://www.andypatterns.com/index.php/blog/puremvc_refactor/&amp;sa=D&amp;source=editors&amp;ust=1644533497540127&amp;usg=AOvVaw1wOxO1elRARnO7oLGybGMF">articles</a> about it.</p>
<p><img src="/patterns/images/hexmvc/image2.png" alt=""></p>
<p>It is a framework and has been ported to most languages.  In practice I found it effective though tedious because of all the rules and registrations - and with its home grown eventing system it is tedious to declare event types, register handlers etc.  I wanted something simpler, whilst keeping the good stuff.  When I implemented an early/partial HexMvc version of a minimal PureMvc sample app, I was able to remove all references to the PureMvc framework and simplify the resulting application - the cost was a dozen extra lines of code to get it working the same.  But being able to remove an entire framework and get the the same result was certainly encouraging.</p>
<h2 id="hexmvc-fundamentals">HexMVC Fundamentals</h2>
<h3 id="app-in-the-centre">App in the centre</h3>
<p>We start the basic hexagonal architecture with the idea of application in the core.</p>
<p>The application talks to interfaces, which are implemented by adapters.</p>
<p><img src="/patterns/images/hexmvc/image11.png" alt=""></p>
<p><em>The controller too, lives inside the central app hub.</em></p>
<h4 id="the-app">The App</h4>
<ul>
<li>Holds refs to the core adapters (server, gui, model)</li>
<li>Wires the core adapters so they know about the app</li>
<li>App has job of housing the domain logic and app logic and thus the controller/commands.</li>
<li>App sometimes mediates - calls come in and the app sends them out again. Defines one or two methods that an adapter may need (e.g. for that adapter to communicate some info to or get some info from another adapter)  Mediation role.</li>
<li>Defines Boot() and Shutdown()</li>
<li>Injects multicast dependencies</li>
</ul>
<p>Note the app does not instantiate objects - this is done by the bootstrapper.</p>
<h4 id="layers-as-slices-through-the-app-circle">Layers as slices through the App circle.</h4>
<p>Thus we have taken top down layering and making it round a “Application Hub” instead.  If you follow one particular event flow e.g. from gui to model and back again, you get a traditional view-controller-model top down layered cake.</p>
<p><img src="/patterns/images/hexmvc/image17.png" alt=""></p>
<p>But by allowing for more event flows and more services plugged in to a hub, we get a more flexible and interesting architecture, which is still a layered one.  Thus you can get different layers depending on where you start and where you finish.  Nobody is ‘on top’ or ‘on the bottom’.</p>
<p>E.g. I add a server layer which provides REST services to the web, as an example of another significant layer.</p>
<h4 id="interfaces-everywhere">Interfaces Everywhere</h4>
<p>As GOF says in its introduction, one of the main two OO principles is “Program to an interface, not an implementation”.  This allows clients to be decoupled from the implementation.</p>
<h4 id="adpaters-everywhere">Adpaters Everywhere</h4>
<p>In HexMvc we write adapters to implement the interfaces. The adapters’ purpose is to provide a level of indirection between the application logic and the substantive thing the application is talking to.</p>
<h3 id="hexmvc-control-flow">HexMvc Control flow</h3>
<p>In HexMvc I pretty much follow the PureMvc rules and call sequences.</p>
<h4 id="the-rules">The rules</h4>
<ul>
<li>The Model notifies, but doesn&rsquo;t listen and ultimately knows nothing about anything else in the system.</li>
<li>View sends messages to controller and listens for incoming messages from model.</li>
<li>Controller commands are created and invoked by certain messages and they send out messages if they want to.</li>
</ul>
<h4 id="the-typical-call-sequence">The typical call sequence</h4>
<p>Here the gui adapter raises command events and listens for notification events.  A command event is an event that causes the controller to do something (which may then indirectly instantiate a command object to the work).  A notification event would be e.g. the model layer saying ‘something has changed’.  Controllers act directly on the model / model adapter layer and don’t typically raise events.  The model layer doesn’t listen for events, but can generate notification events.</p>
<p><img src="/patterns/images/hexmvc/image15.png" alt=""></p>
<h3 id="controller">Controller</h3>
<p>The controller makes available an abstract chunk of information that the view renders, so in that sense a HexMvc controller is like a traditional web controller class.</p>
<ul>
<li>
<p>Controller listens for GUI command messages</p>
</li>
<li>
<p>Responds by implementing the business logic  - optionally uses command objects to do the work</p>
</li>
<li>
<p>Talks to the model adapter and other adapters</p>
</li>
<li>
<p>Offers other functionality that can get invoked directly (not just from eventing) e.g. from the server service. Provides information as implementation independent, abstract chunks e.g. dictionaries, datastructures, vanilla app objects.</p>
</li>
</ul>
<p>Note that controllers shouldn’t get too ‘view specific’ - these roles are performed by the View Adapter.  Choosing templates and constructing juicy, view specific data structures are not jobs for the controller.</p>
<h3 id="eventing">Eventing</h3>
<p>I use a simplified eventing system (see in depth discussion on eventing later in this document).</p>
<h4 id="application-specific-eventing-vs-gui-eventing">Application specific eventing vs gui eventing</h4>
<p>The adapters is where you implement application specific eventing.  The Gui itself may have some eventing but this is gui implementation specific and not to be confused with the eventing that the application uses.  Its the gui adapter for example, that intercepts gui specific eventing and rasies the appropriate application event.  The gui adapater similarly listens for the appropriate application event and does something with it, like poke values into controls on a windows form.</p>
<h3 id="the-bootstrapper">The Bootstrapper</h3>
<p>Instantiation of adapters and the things they adapt (the ‘ring’ objects) should be outside the App.  Theoretically you inject different ring adapters into the app and the app will still work.  That’s the whole point.</p>
<ul>
<li>Instantiates all instances of objects</li>
<li>Injects normal dependencies, wires up the ring adapters to talk to each other if needed</li>
<li>Can be considered configuration</li>
</ul>
<h3 id="dependency-injection">Dependency Injection</h3>
<p>The bootstrapper has aspects of a factory in that it instantiates the correct objects.</p>
<p>It then uses dependency injection config bootup everywhere to configure</p>
<p>When you wire up your objects to point to each other you are doing dependency injection - as long as the objects are not instantiating instances of the objects they are pointing to themselves, and the injection is done from ‘outside’. The objects being injected are thus depending on an abstraction or interface - which is injected later.</p>
<h2 id="hexmvc-in-detail">HexMvc in Detail</h2>
<p><img src="/patterns/images/hexmvc/image6.png" alt=""></p>
<p>All in One HexMvc Diagram</p>
<h3 id="app-to-gui-boundary">App to GUI boundary</h3>
<p>Swappable guis, just rewrite the gui adapter</p>
<p><img src="/patterns/images/hexmvc/image23.png" alt=""></p>
<h3 id="view">View</h3>
<p>We should distinguish between the view adapter and the view ‘renderer’/controls.  The latter ‘ring object’ can be hand crafted by code or built by nice high level form building tools - and should have absolutely no knowledge of the app.</p>
<ul>
<li>Views renderers are totally dumb.  </li>
<li>View Adapter on the other hand know both about the dirty details of view controls and how to populate them.</li>
<li>The View Adapter binds to or overrides GUI specific events and translates these into application events.  Conversely the GUI adapter listens for relevant application events (e.g. model ‘I have changed’) and responds by updating the real GUI.</li>
<li>The View Adapter talks directly to the app/controller to get information.  Just as with the server adapter, this information is made available as an abstract chunk of information that is independent of the view.  Its up to the view or ther server to ‘render’ it appropriately.</li>
</ul>
<p>For example, its the gui adapters that recieve events from e.g. the model, regarding things that change and need to be re-rendered. Anytime you switch GUI implementations, you put in place a different adapter - ensuring it hooks into and participates in the same eventing infrastructure.</p>
<p>The interface to your alternate gui adapters is, of course, the same.  </p>
<p>Its the gui adapters that recieve events from e.g. the model, regarding things that change and need to be re-rendered. Anytime you switch GUI implementations, you put in place a different adapter - ensuring it hooks into and participates in the same eventing infrastructure.</p>
<p>Typically the gui adapter listens for application events and updates the particular gui in a particular way.</p>
<h3 id="app-to-model-boundary">App to Model boundary</h3>
<h4 id="model">Model</h4>
<p>The Model contains the raw domain classes and their relationships.  The model adapter interface is what the app deals with.</p>
<p>HexMvc favours a thin model approach where the majority of domain and business logic is kept in the  controller because</p>
<ul>
<li>A thin model means you can rebuild a model rapidly as needed, for different implementations (see more info on this below).  You preserve the hard domain and business logic in the controller, which never changes.  The App and Controller are the core which never changes.</li>
<li>A centralised coordinated domain logic with undo/redo in a central place is something I’m trying out at this stage of my programming!</li>
</ul>
<p><img src="/patterns/images/hexmvc/image5.png" alt=""></p>
<p>Here you can see that when the application talks to the model, it talks via an adapter, via an interface.</p>
<h4 id="eventing-in-the-model-adapter">Eventing in the model adapter</h4>
<p>Similarly the model adapter is the where model ‘onchange’ application events are raised.  The model remains pure and simple.  The model’s “Add Some Entity” operation is implemented by the model adapter, which pokes the information into the pure model and then its the model adapter which raises the relevant onchange application notification event.</p>
<h4 id="model-no-longer-at-the-bottom">Model no longer at the bottom</h4>
<p>It may seem strange to have the model as a sattelite rather than in the heart of the application.  But to put the model inside the app centre would to make the same ‘mistake’ as putting the model at the bottom of the traditional layer cake.  Its not necessarily wrong, its just inflexible and not in the spirit of pluggability.</p>
<h4 id="why-have-multiple-model-implementations">Why have multiple model implementations?</h4>
<p>This lets you switch out the model for a differently implemented model.  Now this may sound strange - swapping out a different model, as the model is typically a core part of an application and independent of any particular implementation.  But you need to be able to do this because I found that when implementing a ORM model which auto persists to a db, I had to annotate my classes with a certain syntax.  In my regular OO model, none of this syntax was needed. So I couldn’t use the same source code for my model - my model was not ‘pure’ enough. Implementation details were, rightly or wrongly, creeping into my pure model.  Further evidence of this was that my model implementations operated differently - my OO version had to work harder to store collections, whereas the ORM model had that functionality for free, due to the underlying SQL db.</p>
<p>Thus switching model implementations is no different to switching out gui implementations.</p>
<p>That’s why models are out on the ring and not in the centre - they are not reified but are just another application service.  This also means that a thin model approach is best, so that business logic is not duplicated, and can be kept in the core app - which is where I like it best these days anyway.</p>
<h4 id="different-back-ends-to-a-model">Different ‘back ends’ to a model</h4>
<p>Model swappability is not to be confused with the idea of different ‘back ends’ to a model.  When you keep the model code the same and switch in different persistence or database backends - that is merely a nice feature of a particular model implementation.  Its an implementation which has some persistence flexibility.  But if I don’t want to conform to that particular e.g. Ruby ActiveRecord paradigm, with its particular model annotations and syntax - I don’t have to.  HexMvc allows me to swap in a totaly different model paradigm, with entirely different model syntax and annotations - its completely flexible.</p>
<h3 id="model-to-persistence-boundary">Model to Persistence boundary</h3>
<p>As we said earlier, the model adapter provides the overall interface to the &lsquo;model subsystem&rsquo;. The model adapter methods include model manipulation and access methods, as well as persistence methods. e.g.</p>
<p><img src="/patterns/images/hexmvc/image7.png" alt=""></p>
<p>Behind the model adapter is the pure model and possibly a persistence object.  The persistence class is itself adapted behind an interface, so that different persistence techniques can be used.  The model adapter coordinates both the pure model and the swappable persistence class.</p>
<p><img src="/patterns/images/hexmvc/image20.png" alt=""></p>
<p>The persistence class knows about the model, it has to, in order to get persistence data in and out of it.</p>
<p>The underlying real model class provides the model methods, obviously.</p>
<p>The underlying real persistence class provides the persistence methods.</p>
<h4 id="different-persistence-techniques">Different persistence techniques</h4>
<p>Typically you do not need an explicitly coded persistence object ‘backend’ if your model already uses the ORM pattern, and persistes automatically to a db.  And usually you can choose the db vendor through config files.</p>
<p>But if you are hand-crafting your own persistence backend mechanism which can be swapped for other persistence mechanisms, then the following design seems a reasonable approach.<img src="/patterns/images/hexmvc/image13.png" alt=""></p>
<h4 id="is-an-abstract-persistence-interface-possible">Is an abstract persistence interface possible?</h4>
<p>An alternative ‘swappable persistence backend approach’ I tried was to have the model communicate with an abstract persistence interface which you can swap - this prooved too hard. But again, if you can pull it off, that&rsquo;s fine. Just hide all this stuff behind the Model Adapter.</p>
<h4 id="switchable-db-persistence-backends-to-a-particular-model">Switchable db persistence backends to a ‘particular’ model.</h4>
<p>Here we are talking about a model that has swappable persistence backends.  As mentioned earlier, the idea of different persistence/implementation ‘back ends’ to a model is to be distinguished from swapping entire model implementations.  </p>
<ul>
<li>When you swap model implementations your model code changes and has different code syntax annotations and implementation logic.</li>
<li>When you swap persistence back-ends, the model code stays the same and a configuration file lets you switch in different a persistence / database backend.</li>
</ul>
<h4 id="on-file-names-and-connection-strings">On file names and connection strings</h4>
<p>The Model Adapter LoadAll() optionally does take a filename as a parameter e.g. LoadAll(‘mydata.txt’). This is fine for when the app wants to specify a persistence file to load/save to and is the common case catered for.  </p>
<p>If you are e.g. persisting to a database using a connection string, there is now more information to be specified than a mere filename e.g. database name, username, password etc.  We arguably should not contaminate the interface of ModelAdapter with all sorts of Persistence specific methods and parameters - after all, the ModelAdapter must be a straightforward interface that can be implemented by various persistence implementations - so that persistence implementations can be swapped in/out seamlessly.</p>
<p>The solution is to move this problem into the configuration/wiring/bootup stage where the Persistance object is instantiated and configured. For example, In the case of Sql database persistence, a Persistence class is not needed since the Model is auto persisted.  In this case the ModelSqlAdapter implements the required LoadAll methods by doing nothing. And the connection string etc. is done in the configuration.</p>
<h3 id="app-to-server-boundary">App to Server boundary</h3>
<p>Server thread is like another gui layer, just write a different server adapter</p>
<p><img src="/patterns/images/hexmvc/image22.png" alt=""></p>
<h4 id="careful-with-your-call-sequence">Careful with your call sequence</h4>
<p>A slightly different call sequence is needed when providing a server interface to your app.</p>
<ul>
<li>You can’t simply have the server subscribe to model onchange notifications, because the server must prepare and return a response immediately - at the end of the incoming request.  </li>
<li>You can’t can’t have the server raise an application event which the controller then picks up and acts on, because you typically want an immediate response so that a response object can be built.</li>
</ul>
<p>This means the server must call directly into the controller and get the information it needs, and the controller must call directly into the model (adapter) to make changes and get results.  This is not strange, this is simply the web mvc approach.</p>
<p><img src="/patterns/images/hexmvc/image19.png" alt=""></p>
<h4 id="its-not-necesssarily-a-synchronous--asynchronous-issue">Its not necesssarily a synchronous / asynchronous issue</h4>
<p>Note that this is not a synchronous / asynchronous issue - since most eventing whilst appearing semantically asynchronous is actually all implemented synchronously.  Its more an issue of incoming function calls on the server needing to do all their work within the same function call, whereas with an eventing approach, work is broken up across several function calls and returned using several function calls.</p>
<h4 id="implications">Implications</h4>
<p>This all means that controller commands must be able to be invoked directly or invocable as a result of an event being raised.</p>
<p>Note that the model can still send its onChange notifications, its just that the server is not hooked up to them - but other subsystems might be.  So this allows for webpages to indirectly affect a desktop GUI view - neat.</p>
<p><img src="/patterns/images/hexmvc/image3.png" alt=""></p>
<p>Example of using the REST api via a web browser.  The GUI updates itself simultaneously!</p>
<p>Aside: Threading introduces a bit of complexity, watch out for communication between threads, added a mutex method on the app, which can do anything needed</p>
<h2 id="appendix">Appendix</h2>
<h3 id="adapters">Adapters</h3>
<p>More elaboration on <a href="/patterns/hexmvc-adapters">HexMVC adapters</a> and Adapter Patterns in general.</p>
<h3 id="events">Events</h3>
<p>More elaboration on <a href="/patterns/hexmvc-eventing">HexMVC eventing</a> and Event Patterns in general.</p>
<h3 id="hexmvc-source-code">HexMVC Source Code</h3>
<p>Here is the directory of code used to develop the ideas in this article. It contains various versions of implementations, mainly in Python and .NET.  I need to document it sometime.</p>
<p><a href="https://github.com/abulka/pynsource/tree/master/Research/hexmvc">https://github.com/abulka/pynsource/tree/master/Research/hexmvc</a></p>
<p>P.S. There is no reason it is located in the <code>pynsource</code> GitHub project directory - it just happened that way. It should be moved to its own repository.</p>
<h2 id="presentation-in-2012">Presentation in 2012</h2>
<p>I presented the HexMVC pattern to the Melbourne Patterns Group in 2012.</p>
<p>Re the talk - yeah it was full on 1.75 hours, 10 people - quite a complex topic.  I got some useful feedback re points that could be clearer etc. A couple of heart felt applauses and one guy came up to me and shook my hand with enthusiasm.   A few others didn&rsquo;t say as much as I hoped - I guess I was looking for a bit more feedback. I probably didn&rsquo;t pause enough and allow audience participation like I normally do - I just barrelled through the material a bit.  Its not easy, esp. - when presenting something complex and new-ish for the first time.</p>
<h3 id="post-presentation-clarifications">Post Presentation Clarifications</h3>
<p>Thanks for those who came and listened to my HexMvc talk last night. If anyone is interested in accessing and commenting on the google doc which will soon be an article on my website, please <a href="mailto:abulka@gmail.com">email me</a> for access.  I was also hoping for some ‘peer review’ on my talk so please send me your thoughts if you get time - I would really appreciate the feedback.</p>
<p>Meanwhile here are some more considered responses to a few of last night’s questions:</p>
<h4 id="q-whats-the-distinction-between-the-model-and-the-model-adapter">Q: ‘What’s the distinction between the model and the model adapter’</h4>
<p>A: The application should treat the model adapter as if it were the model. And as Stewart reminded me of my own point (thanks!), the adapter adds the application eventing so that the model is not contaminated with that eventing infrastructure stuff. The adapter also hides model specific operations that are done in different ways e.g. FindThings() lives in the model adapter and is implemented totally differently in the OO model adapter implementation vs. the SQL model adapter implementation (which utilises a fast sql query).  Yes, there seems to be some flexibility re whether you put model subsystem functionality into the model or its model adapter. Certainly business rules and exceptions I would put in the controller, and keep the model subsystem thin.</p>
<h4 id="q-the-server-becomes-just-another-view">Q: ‘The server becomes just another view’</h4>
<p>A: Yes - and yey - it all turns out to be very symmetrical.  Though because the services offered by the server REST api are available via http then you might access these services without any sort of browser/view - just trawling for data and making command calls into the application.  Perhaps this subsystem should be called ‘services’ not server?  Done, I’ve renamed it.</p>
<h4 id="q-why-in-the-diagram-does-the-app-point-to-the-gui-but-in-fact-the-gui-gets-updated-directly-from-the-model-via-notifications">Q: ‘Why in the diagram does the App point to the GUI but in fact the GUI gets updated directly from the model via notifications’</h4>
<p>A: Good point, my ‘arrows’ and their directions could have been made clearer.  The connection between the core app and the gui is one of composition and rarely used.  Its the eventing from view to controller and from model to view that forms 90% of the communication with the view.  My sequence diagrams showed this, but my overal structural diagram was, let us say, a bit more abstract and loose re this point.  Here is an updated diagram that should make things clearer:</p>
<p><img src="/patterns/images/hexmvc/image11.png" alt=""></p>
<p>POST TALK THOUGHTS:</p>
<p>Look at the ideas of <a href="https://www.google.com/url?q=http://obvious.retromocha.com/&amp;sa=D&amp;source=editors&amp;ust=1644533497596031&amp;usg=AOvVaw3G_JvaDfacMb4Ki6Z4oU07">‘obvious’ framework</a> which is based on Uncle Bob’s thoughts. It has an independent APP and a plugs/jacks approach.</p>
<p>Asked for more info in a <a href="https://www.google.com/url?q=https://github.com/RetroMocha/obvious/issues/2&amp;sa=D&amp;source=editors&amp;ust=1644533497596383&amp;usg=AOvVaw1J3id81clTw9cpbH3F_u04">github post.</a></p>

	<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div class="d-print-none">
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://github.com/abulka/abulka.github.io/issues/new">tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="https://github.com/abulka/abulka.github.io/issues/new">tell us how we can improve</a>.
</p>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof gtag !== 'function') return;
    gtag('event', 'page_helpful', {
      'event_category': 'Helpful',
      'event_label': window.location.pathname,
      'value': value
    });
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback( 100 );
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>
<br />
<div class="td-page-meta__lastmod">
  Last modified March 10, 2022: <a href="https://github.com/abulka/abulka.github.io/commit/9c1d0fd813e93ab2c2862b73dd0d54bd3d9db82f">added tag cloud (9c1d0fd)</a>
</div>

</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Twitter" aria-label="Twitter">
    <a target="_blank" rel="noopener" href="https://twitter.com/unjazz" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/abulka/abulka.github.io" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2024
    <span class="td-footer__authors">Andy Bulka</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span><span class="ms-2"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></span><p class="td-footer__about mt-2"><a href="/about/">About Andy Bulka</a></p>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.69e2c1ae9320465ab10236d9ef752c6a4442c54b48b883b17c497b7c7d96a796.js" integrity="sha256-aeLBrpMgRlqxAjbZ73UsakRCxUtIuIOxfEl7fH2Wp5Y=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>