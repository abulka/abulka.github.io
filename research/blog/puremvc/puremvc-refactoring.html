<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Untitled</title>
    <meta name="author" content="Andy Bulka">

    <!-- <link rel="stylesheet" href="css/styles.css?v=1.0"> -->

</head>

<body>
    <!-- <script src="js/scripts.js"></script> -->

    <h1>Refactoring to PureMVC</h1>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">PureMVC - What's all the fuss about?</span></span></p>
    <p>I have long been fascinated by the MVC (Model View Controller) architectural pattern, first conceived in the 1960's. What it promises, to those who can fathom its mysteries, is an orderly way of organising your application architecture. You define a de-coupled domain/business model that is oblivious to any GUI that might be displaying it. A mediating controller class usually looks after the dirty details of moving data between the model and GUI. You can even have multiple GUI representations of your single model e.g. a pie chart view and a bar chart view simultaneously displaying the same information out of the model.</p>
    <p>There are many variants of MVC, and people use different terminology to mean the same thing, and conversely people use the same terminology to mean different things e.g. the view could be the GUI or it could be the mediating class looking after the GUI, which means it could actually end up meaning the controller...</p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Some History</span></span></p>
    <p>I once wrote up a pattern called MGM (Model Gui Mediator) which describes a version of MVC that I thought made sense in today's modern programming age. Today, GUI views were usually comprised of sophisticated controls/widgets rather than laboriously handcrafted graphic code that needed custom controller code to handle the intricate details of interacting with the view/GUI. Most of that low level controller interaction is now built in to the off the shelf widgets/controls.</p>
    <p>The controller is now just a mediator between model and view – hence the “M” in MGM (Model-Gui-Mediator). You might prefer to think of the mediator as the controller, so the pattern could well have been called MGC (Model-Gui-Controller). Many modern variants of MVC e.g. MVP (Model View Presenter) and PAC (Presentation Abstraction Controller) and others probably fit into the basic idea of MGM.</p>
    <p><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussMGM.png" alt="" width="786" height="592" align="left" border="0" /></p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p>The behaviour of the MGM architecture is as follows:</p>
    <p align="center"><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussMGM_UMLsequence.png" alt="" width="780" height="502" align="left" border="0" /></p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p style="text-align: center;"><em>MGM pattern sequence diagram. <br />M=Model (Data class) G=Gui (Form with an edit control on it) M=Mediator (Controller class)</em></p>
    <p>What we have illustrated above are two use cases:</p>
    <ul>
    <li>
    <p>In the first the user types some text into an edit field on a form, which causes the model to change – the model broadcasts the change and the GUI is updated (watch out for infinite loops here of course, which can be avoided by the gui update not triggering another change event).</p>
    </li>
    <li>
    <p>The second use case is the model changing for some reason (e.g. being loaded from a file or some other part of the system altering the data) and the model broadcasting the change – again the Controller is observing and intercepts the broadcast and updates the GUI.</p>
    </li>
    </ul>
    <p>What is interesting about MGM is that it shows how simple the MVC pattern really can be, when understood in terms of today's modern GUI components. It also serves as a way of contrasting what PureMVC is offering. Read on.</p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Along comes PureMVC</span></span></p>
    <p>I've since (2008-2009) become quite interested in the <a href="http://www.puremvc.org" target="_blank">PureMVC</a> framework because it adds a few things that were missing from MGM.</p>
    <p style="text-align: center;"><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussCONCEPT1.png" alt="" width="766" height="562" align="left" border="0" /></p>
    <p style="text-align: center;"><em>PureMVC Conceptual Architecture</em></p>
    <p>Firstly PureMVC explicitly adds command classes – rather than just burying behaviour in controllers/mediators, we have an official way of organising behaviour. Sure, in MVC and MGM, any controller is free to delegate and invoke command classes to perform behaviour in a more organised way - but in PureMVC the details of this are a little more spelled out.</p>
    <p>Secondly PureMVC adds service location, so that you end up with a nice de-coupled design – events are raised and anyone can register interest in an event/message. Thus the whole architecture becomes a lot more pluggable, flexible and neat.</p>
    <p>Thirdly I believe PureMVC addresses scalability – for example it tells you exactly how to add multiple mediators to the system. Multiple commands and data proxies are also supported. You simply register all these classes and specify what noification messages are of interest to each of them.</p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">PureMVC rules</span></span></p>
    <p>The model notifies, but doesn't listen and ultimately knows nothing about anything else in the system. Mediators notify and listen to messages. Commands are invoked (cmd.execute()) automatically by certain messages and they send out messages if they want to.</p>
    <p>The facade is the communication hub.</p>
    <p>Mediators look after gui elements, and this forms the view. Commands forms the controller. Proxies wrap model elements and this forms the model.  <em>Note that in the above diagram, there is a one to many relationship between the View and the Mediators, and between the Controller and the Commands, and between the Model and the Proxies.</em></p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Refactoring to PureMVC</span></span></p>
    <p>To show you just how useful and simple incorporating PureMVC can be, I have designed a step by step tutorial on how you introduce a PureMVC command driven, message notification driven architecture to your existing wxpython application.</p>
    <p>We will start with a simple application that doesn't even have a model. We will first add a mediator, then a command class and then a proper model.</p>
    <p style="margin-bottom: 0cm;"><span style="font-family: Times New Roman,serif;">The application is a simple form which displays a textfield. When you hit ENTER, it converts anything you type into uppercase and displays it in the textfield. There is no “model” and no PureMVC architecture.</span></p>
    <p style="margin-bottom: 0cm;"> </p>
    <p style="margin-bottom: 0cm;" align="center"><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfuss_pythonGui.gif" alt="" width="514" height="377" align="left" border="0" /></p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"><span style="font-family: Times New Roman,serif;"><em>Three screenshots of our simple wxPython application. <br />We will use this as our starting point and refactor to PureMVC.</em></span></p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"> </p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Step 1. Starting Point</span></span></p>
    <p>Here is the code for our simple wxpython application illustrated above. It has no proper model and does not use PureMVC. This is our starting point.</p>
    <p align="center"><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussUMLstep0gui.png" alt="" width="626" height="170" align="left" border="0" /></p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"><em>Starting point – a simple wxpython app - a single form with a textfield control.</em></p>
    <pre style="page-break-before: always;"><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;"><br />import</span> <span style="color: #000000;">wx</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyForm</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Panel</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Panel</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">3</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TextCtrl</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">170</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">pos</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">5</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">10</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">style</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TE_PROCESS_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFrame</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Frame</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Frame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">title</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"Refactoring to PureMVC"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">200</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">100</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">))</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Bind</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">EVT_TEXT_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">onSubmit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">onSubmit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">evt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">GetValue</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"got"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">SetValue</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">upper</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">())</span></span><br /><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">WxApp</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">App</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">OnInit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Show</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">True</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">if</span> <span style="color: #000000;">__name__</span> <span style="color: #0000c0;">==</span> <span style="color: #004080;">'__main__'</span><span style="color: #0000c0;">:</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">WxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">redirect</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">False</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MainLoop</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span></pre>
    <p style="margin-bottom: 0cm;"> </p>
    <p style="margin-bottom: 0cm;"> </p>
    <hr />
    <p style="margin-top: 0.42cm; page-break-after: avoid;"> </p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Step 2. Import PureMVC and add a mediator</span></span></p>
    <p>Let's add a mediator and create a PureMVC “view”. Mediators in PureMVC are classes which look after a gui – e.g. a wxpython form. Mediators can be built that look after larger or smaller chunks of your gui – depending on your situation. In our case we will build a mediator to look after the one form and its single textfield.</p>
    <p align="center"><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussUMLstep2.png" alt="" width="771" height="203" align="left" border="0" /></p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"><em>Step 2 – the Mediator now intercepts the ENTER key event <br />and performs the uppercasing behaviour in its onSubmit() handler.</em></p>
    <p><strong>Steps</strong>:</p>
    <ol>
    <li>
    <p style="margin-bottom: 0.1cm;">Add the puremvc import statements</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Add a Mediator class</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Move the binding and onSubmit method out of the AppFrame and into the Mediator class</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Have the AppFrame create a PureMVC facade and register a mediator instance with the facade</p>
    </li>
    </ol>
    <p> </p>
    <p>Bold text indicates the new code.</p>
    <pre style="page-break-before: always;"><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">wx</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><strong><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span> <span style="color: #008000;">#ADD</span></strong></span><br /><span style="font-family: Lucida,Courier New;"><strong><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span> <span style="color: #008000;">#ADD</span></strong></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyForm</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Panel</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Panel</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">3</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TextCtrl</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">170</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">pos</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">5</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">10</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">style</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TE_PROCESS_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><strong><span style="color: #c00000;">class</span> <span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Mediator</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">IMediator</span><span style="color: #0000c0;">):</span> <span style="color: #008000;">#ADD CLASS</span></strong></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>NAME</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>'MyFormMediator'</strong></span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>def</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>__init__</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>viewComponent</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>):</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>super</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>MyFormMediator</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>).</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>__init__</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>MyFormMediator</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>NAME</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>viewComponent</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>)</strong></span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>viewComponent</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>Bind</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>wx</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>EVT_TEXT_ENTER</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>onSubmit</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>viewComponent</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>inputFieldTxt</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>)</strong></span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>def</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>listNotificationInterests</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>):</strong></span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>return</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>[]</strong></span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>def</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>handleNotification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>notification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>):</strong></span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>pass</strong></span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>def</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>onSubmit</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>evt</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>):</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mydata</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>viewComponent</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>inputFieldTxt</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>GetValue</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>print</strong></span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>"got (mediator)"</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mydata</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>viewComponent</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>inputFieldTxt</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>SetValue</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mydata</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>upper</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>())</strong></span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFrame</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Frame</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Frame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">title</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"Refactoring to PureMVC"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">200</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">100</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">))</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mvcfacade</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>puremvc</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>patterns</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>facade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>Facade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>getInstance</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span>  <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mvcfacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>registerMediator</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>MyFormMediator</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>myForm</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>))</strong></span></span>  <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br /><span style="color: #004080;"><span style="text-decoration: line-through;"><span style="font-family: Lucida,Courier New;">self.myForm.Bind(wx.EVT_TEXT_ENTER, self.onSubmit, self.myForm.inputFieldTxt) #DELETE</span></span></span><br /><br /><span style="color: #004080;"><span style="text-decoration: line-through;"> <span style="font-family: Lucida,Courier New;">def onSubmit(self, evt):</span></span></span><br /><span style="color: #004080;"><span style="text-decoration: line-through;"> <span style="font-family: Lucida,Courier New;">mydata = self.myForm.inputFieldTxt.GetValue()</span></span></span><br /><span style="color: #004080;"><span style="text-decoration: line-through;"> <span style="font-family: Lucida,Courier New;">print "got", mydata</span></span></span><br /><span style="color: #004080;"><span style="text-decoration: line-through;"> <span style="font-family: Lucida,Courier New;">self.myForm.inputFieldTxt.SetValue(mydata.upper())</span></span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">WxApp</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">App</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">OnInit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Show</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">True</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">if</span> <span style="color: #000000;">__name__</span> <span style="color: #0000c0;">==</span> <span style="color: #004080;">'__main__'</span><span style="color: #0000c0;">:</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">WxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">redirect</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">False</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MainLoop</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span></pre>
    <p>So now, instead of our AppFrame class binding to the ENTER key event and handling it via an onSubmit method, the mediator now does this – binding to the ENTER event in the constructor of the mediator.</p>
    <p>All the AppFrame does now is create a PureMVC facade and register a mediator instance with the facade. Notice that we pass the GUI object, in this case the form, to the mediator as a parameter to the mediator's constructor – the GUI object is referred to by the mediator as the viewComponent.</p>
    <p>The application now behaves exactly as before, except we now get the following diagnostic message:</p>
    <p><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfuss_step2mediator.png" alt="" width="155" height="25" align="left" border="0" /></p>
    <p>which proves the mediator is active. Of course this step doesn't really buy us any functionality yet, but at least we are on the road...</p>
    <p> </p>
    <hr />
    <p style="margin-top: 0.42cm; page-break-after: avoid;"> </p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Step 3. Move the business logic into a Command class</span></span></p>
    <p>Let's now move the behaviour (changing text to uppercase) out of the mediator and into a proper command class. This makes the mediator dumber – which is good, as all we want the mediator to do is look after the GUI, not house application logic.</p>
    <p align="center"><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussUMLstep3cmd.png" alt="" width="771" height="283" align="left" border="0" /></p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"><em>Step 3 – the uppercasing behaviour is moved to the command class.</em></p>
    <p style="font-style: normal;" align="left"> </p>
    <p style="font-style: normal;" align="left"><strong>Steps:</strong></p>
    <ol>
    <li>
    <p style="margin-bottom: 0.1cm;">Import the puremvc command import</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Create a command class <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DataSubmittedCommand </strong></span></span>and implement execute</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Move the logic for updating the GUI display with uppercase text - out of the mediator and into the command object's execute method. The mediator now simply raises a DATA_SUBMITTED notification</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Define our own facade class called <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span>and</p>
    <ol>
    <li>
    <p style="margin-bottom: 0.1cm;">Define the DATA_SUBMITTED message</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Override getInstance() to implement the singleton design pattern (just return a new <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span>)</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Override initializeController() registering the DataSubmittedCommand class, associating it with the DATA_SUBMITTED message. In other words, whenever the DATA_SUBMITTED message is raised, DataSubmittedCommand.<strong>execute</strong>() is called.</p>
    </li>
    </ol></li>
    <li>
    <p style="margin-bottom: 0.1cm;">Use our new concrete Facade rather than the default Facade in the AppFrame class startup code.</p>
    </li>
    </ol>
    <p> </p>
    <pre style="page-break-before: always;"><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">wx</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span></span><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span></span><br /><span style="font-family: Lucida,Courier New;"><strong><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span> <span style="color: #008000;">#ADD</span></strong></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyForm</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Panel</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Panel</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">3</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TextCtrl</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">170</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">pos</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">5</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">10</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">style</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TE_PROCESS_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Mediator</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">IMediator</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">'MyFormMediator'</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Bind</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">EVT_TEXT_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">onSubmit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">listNotificationInterests</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">[]</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">handleNotification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">pass</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">onSubmit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">evt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">GetValue</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br /><span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span><span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"got (mediator)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">, </span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><br /><span style="text-decoration: line-through;"> <span style="color: #008000;"><span style="font-family: Lucida,Courier New;">self.viewComponent.inputFieldTxt.SetValue(mydata.upper())</span></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>sendNotification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_SUBMITTED</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mydata</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>viewComponent</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>)</strong></span></span>  <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br /><br /><span style="font-family: Lucida,Courier New;"><strong><span style="color: #c00000;">class</span> <span style="color: #000000;">DataSubmittedCommand</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span><span style="color: #0000c0;">.</span><span style="color: #000000;">SimpleCommand</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">ICommand</span><span style="color: #0000c0;">):</span> <span style="color: #008000;">#ADD CLASS</span></strong></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>def</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>execute</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>notification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>):</strong></span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>print</strong></span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>"execute (command)"</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>notification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>getBody</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mydata</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>notification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>getBody</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>viewComponent</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>notification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>getType</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>viewComponent</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>inputFieldTxt</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>SetValue</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mydata</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>upper</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>())</strong></span></span><br /><br /><strong><span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">class</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">puremvc</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">patterns</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">facade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Facade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span> <span style="color: #008000;"><span style="font-family: Lucida,Courier New;">#ADD CLASS</span></span></strong><br /><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_SUBMITTED</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>"DATA_SUBMITTED"</strong></span></span><br /><br />    <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>@</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>staticmethod</strong></span></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>def</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>getInstance</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>():</strong></span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>return</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>def</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>initializeController</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>):</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>super</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>).</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>initializeController</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>super</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>).</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>registerCommand</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_SUBMITTED</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DataSubmittedCommand</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>)</strong></span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFrame</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Frame</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mvcfacade</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>None</strong></span></span>  <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Frame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">title</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"Refactoring to PureMVC"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">200</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">100</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">))</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="text-decoration: line-through;"> <span style="color: #008000;"><span style="font-family: Lucida,Courier New;">self.mvcfacade = puremvc.patterns.facade.Facade.getInstance()</span></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mvcfacade</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>getInstance</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span>  <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">registerMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">))</span></span><br /><br /><span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">class</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">WxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">App</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">OnInit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Show</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">True</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">if</span> <span style="color: #000000;">__name__</span> <span style="color: #0000c0;">==</span> <span style="color: #004080;">'__main__'</span><span style="color: #0000c0;">:</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">WxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">redirect</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">False</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MainLoop</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span></pre>
    <p>Notice that we had to create our own concrete Facade class instead of merely creating an instance of the default Facade class that PureMVC provides. This is because we now want to start defining our own messages (e.g. DATA_SUBMITTED).</p>
    <p>Also notice (and this is the crux of this refactoring step) that the mediator no longer performs the business logic of converting the text to uppercase. Now instead it simply raises a notification DATA_SUBMITTED which the command class then picks up and acts upon.</p>
    <p>Again, as with any good refactoring step, the behaviour of the application is exactly the same as before except for our diagnostic message which now emits:</p>
    <p><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfuss_step3command.png" alt="" width="166" height="32" align="left" border="0" /></p>
    <p> </p>
    <p> </p>
    <p> </p>
    <hr />
    <p style="margin-top: 0.42cm;"> </p>
    <p style="margin-top: 0.42cm;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Step 4. Move the ability to access the GUI out of the Command class</span></span></p>
    <p><strong>Hey - isn't the command class doing too much now? </strong>Notice, in the previous refactoring step, that the command class is not only converting the text to upercase (our simple business logic), but is also getting a bit too big for its boots – it is also stuffing the result back into the gui itself – altogether bypassing the meditor. We are actually encouraging this because we pass both the gui textfield data and a reference to the textfield as part of the notification message. This gives the command class direct access to the gui. The command class should really simply raise a notification and let the mediator do what it was designed to do, and stuff the uppercase text into the appropriate part of the GUI. Let's now do this.</p>
    <p>Let's now have the command raise a notification message after it has done its work, and let the <em>mediator</em> look after putting the result back into the gui.</p>
    <p><strong>Steps:</strong></p>
    <ol>
    <li>
    <p style="margin-bottom: 0.1cm;">Create a new message type <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_CHANGED </strong></span></span>in the facade - don't register it against a command since it is simply a message that will be listened for by the existing meditor. In PureMVC, message notifications can be associated with the triggering of commands or simply be listened for by mediators.</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Add the message <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_CHANGED </strong></span></span>to the list of messages the mediator is interested in viz.<br /><span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><span style="font-size: x-small;">def</span></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><span style="font-size: x-small;">listNotificationInterests</span></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><span style="font-size: x-small;">(</span></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><span style="font-size: x-small;">self</span></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><span style="font-size: x-small;">):<br /></span></span></span><span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><span style="font-size: x-small;"><strong>return</strong></span></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><span style="font-size: x-small;"><strong>[</strong></span></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><span style="font-size: x-small;"><strong>AppFacade</strong></span></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><span style="font-size: x-small;"><strong>.</strong></span></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><span style="font-size: x-small;"><strong>DATA_CHANGED</strong></span></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><span style="font-size: x-small;"><strong>]</strong></span></span></span></p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Inside the mediator's handleNotification method, check for the message matching <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_CHANGED </strong></span></span>and move the logic that updates the gui in here.</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">We stop passing the meditor's view component as part of the message to the command – the command class doesn't need that reference to the gui anymore.</p>
    </li>
    </ol>
    <p style="margin-bottom: 0.1cm;"> </p>
    <p style="margin-bottom: 0.1cm;">Ironically the code that updates the GUI started in wxapp, then moved to the meditor, then into the command class, then end up now back in the meditor again! What sort of refactoring is this!?<br /><br />Well the point is that we have separated two aspects of that code - the uppercase logic is now correctly in the command class and the updating of the GUI correctly in the mediator class. The roles are being performed by the correct classes. The meditor is the only one that knows about the intricacies of the GUI. And its all notification message driven and nicely de-coupled – the command class is triggered in response to an abstract notification <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED </span></span>and sends the result back to the mediator using another abstract notification <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><span style="font-weight: normal;">DATA_CHANGED</span></span></span>. PureMVC is working as intended (though we don't have a proper model yet).</p>
    <p style="margin-bottom: 0.1cm;"> </p>
    <pre style="page-break-before: always;"><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">wx</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span></span><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span></span><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyForm</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Panel</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Panel</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">3</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TextCtrl</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">170</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">pos</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">5</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">10</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">style</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TE_PROCESS_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Mediator</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">IMediator</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">'MyFormMediator'</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Bind</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">EVT_TEXT_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">onSubmit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">listNotificationInterests</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>return</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>[</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_CHANGED</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>]</strong></span></span>   <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">handleNotification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>if</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>notification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>getName</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>==</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_CHANGED</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>:</strong></span></span>                       <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br />            <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>print</strong></span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>"handleNotification (mediator)"</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>notification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>getBody</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>() </strong></span></span>    <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br />            <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mydata</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>notification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>getBody</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span>                                        <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br />            <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>viewComponent</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>inputFieldTxt</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>SetValue</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mydata</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>)</strong></span></span>                      <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">onSubmit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">evt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">GetValue</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"got (mediator)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">sendNotification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">DataSubmittedCommand</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span><span style="color: #0000c0;">.</span><span style="color: #000000;">SimpleCommand</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">ICommand</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">execute</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"execute (command)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br /><span style="text-decoration: line-through;"> <span style="color: #008000;"><span style="font-family: Lucida,Courier New;">viewComponent = notification.getType()</span></span></span><br /><span style="text-decoration: line-through;"> <span style="color: #008000;"><span style="font-family: Lucida,Courier New;">viewComponent.inputFieldTxt.SetValue(mydata.upper())</span></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>sendNotification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_CHANGED</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mydata</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>upper</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>())</strong></span></span>   <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br /><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">facade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Facade</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"DATA_SUBMITTED"</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_CHANGED</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>"DATA_CHANGED"</strong></span></span>   <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br /><br />    <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">@</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">staticmethod</span></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getInstance</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">():</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">initializeController</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">initializeController</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">registerCommand</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DataSubmittedCommand</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFrame</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Frame</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Frame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">title</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"Refactoring to PureMVC"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">200</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">100</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">))</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getInstance</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">registerMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">))</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">WxApp</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">App</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">OnInit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Show</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">True</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">if</span> <span style="color: #000000;">__name__</span> <span style="color: #0000c0;">==</span> <span style="color: #004080;">'__main__'</span><span style="color: #0000c0;">:</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">WxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">redirect</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">False</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MainLoop</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span></pre>
    <p>Our diagnostic now shows how the flow of execution moves from the GUI to the mediator, to the command, and then back to the mediator again.</p>
    <p><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfuss_step4command.png" alt="" width="252" height="52" align="left" border="0" /></p>
    <p> </p>
    <p> </p>
    <hr />
    <p style="margin-top: 0.42cm; page-break-after: avoid;"> </p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Step 5. Add a Model</span></span></p>
    <p>You've been waiting for this step, I know. Let's add a proper model.</p>
    <p><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussUMLstep5model.png" alt="" width="650" height="233" align="left" border="0" /></p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p align="center"><em>Adding a model to our architecture. </em></p>
    <p>In the PureMVC framework's way of looking at things, the Model should be wrapped by a “Model Proxy” class. Just like the mediator wraps and looks after the GUI, the proxy wraps and looks after the model. In this refactoring step, we are going to add the Proxy class and use it as the model.</p>
    <p style="font-style: normal;" align="left">From the command class point of view, instead of putting the result of the business logic straight back into the GUI, the command class now writes the uppercase string to the model proxy. The model proxy then sends out a notification that the model data has changed - which the mediator picks up and acts on by updating the form inputfield control/widget. Basically we have a complete PureMVC architecture functioning now (see sequence diagram below).</p>
    <p>Steps:</p>
    <ol>
    <li>
    <p style="margin-bottom: 0.1cm;">Import the proxy namespace</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Define a class <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DataModelProxy </strong></span></span>which will hold the data (the string we are entering in and upper-casing). The proxy class sends a notification whenever the data changes, enabling e.g. the mediator to update the gui.</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Create and register the the Proxy class in the startup phase</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Change the command so that it looks up the model proxy and updates it with the uppercase string.</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Mediator is told about the data that changes by the model proxy raising a DATA_CHANGED message. In response, the meditor takes the data and puts it in the GUI.</p>
    </li>
    </ol>
    <p style="margin-bottom: 0.1cm;">When the mediator has been notified by the model - how does the mediator get access to the model proxy data? Well it can be given a reference to the data proxy so that it can get the data itself, or the notification message can contain the actual data (remember that notification messages have two additional parameters after the message name – getBody() and getType() and it is up to you what you put there. Finally, the Mediator is within its rights to look up the data proxy itself if it wants using the <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>facade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>retrieveProxy(...) </strong></span></span>lookup technique.</p>
    <p style="margin-bottom: 0.1cm;"> </p>
    <pre><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">wx</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span></span><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span></span><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span></span><br /><span style="font-family: Lucida,Courier New;"><strong><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">proxy</span> <span style="color: #008000;">#ADD</span></strong></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyForm</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Panel</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Panel</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">3</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TextCtrl</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">170</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">pos</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">5</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">10</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">style</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TE_PROCESS_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Mediator</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">IMediator</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">'MyFormMediator'</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Bind</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">EVT_TEXT_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">onSubmit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">listNotificationInterests</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">[</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_CHANGED</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">]</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">handleNotification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">if</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getName</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">==</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_CHANGED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">:</span></span><br />            <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"handleNotification (mediator)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />            <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />            <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">SetValue</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">onSubmit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">evt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">GetValue</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"got (mediator)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">sendNotification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">DataSubmittedCommand</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span><span style="color: #0000c0;">.</span><span style="color: #000000;">SimpleCommand</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">ICommand</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">execute</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"execute (command)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br /><span style="color: #008000;"><span style="text-decoration: line-through;"><span style="font-family: Lucida,Courier New;">self.sendNotification(AppFacade.DATA_CHANGED, mydata.upper())</span></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>datamodelProxy</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>facade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>retrieveProxy</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DataModelProxy</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>NAME</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>)</strong></span></span>  <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>datamodelProxy</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>setData</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mydata</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>upper</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>())</strong></span></span>                           <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br /><br /><br /><span style="font-family: Lucida,Courier New;"><strong><span style="color: #c00000;">class</span> <span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">proxy</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Proxy</span><span style="color: #0000c0;">):</span> <span style="color: #008000;">#ADD</span></strong></span><br /><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>NAME</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>"DataModelProxy"</strong></span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>def</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>__init__</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>):</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>super</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DataModelProxy</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>).</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>__init__</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DataModelProxy</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>NAME</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>[])</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>data</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>""</strong></span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>def</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>setData</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>data</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>):</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>data</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>data</strong></span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>print</strong></span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>"setData (model)"</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>data</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>sendNotification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_CHANGED</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>data</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>)</strong></span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">facade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Facade</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"DATA_SUBMITTED"</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_CHANGED</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"DATA_CHANGED"</span></span><br /><br />    <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">@</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">staticmethod</span></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getInstance</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">():</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">initializeController</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">initializeController</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">registerCommand</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DataSubmittedCommand</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFrame</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Frame</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Frame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">title</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"Refactoring to PureMVC"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">200</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">100</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">))</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getInstance</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">registerMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">))</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mvcfacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>registerProxy</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DataModelProxy</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>())</strong></span></span>   <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">WxApp</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">App</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">OnInit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Show</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">True</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">if</span> <span style="color: #000000;">__name__</span> <span style="color: #0000c0;">==</span> <span style="color: #004080;">'__main__'</span><span style="color: #0000c0;">:</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">WxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">redirect</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">False</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MainLoop</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span></pre>
    <p> </p>
    <p><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfuss_step5model.png" alt="" width="330" height="89" align="left" border="0" /></p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <p> </p>
    <hr />
    <p style="margin-top: 0.42cm; page-break-after: avoid;"> </p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Intermission – Taking Stock</span></span></p>
    <p style="font-style: normal;" align="left">At this stage the PureMVC architecture is fully operational.</p>
    <p style="font-style: normal;" align="left">Here is the class diagram:</p>
    <p align="center"><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussUMLstep5takestock.png" alt="" width="732" height="600" align="left" border="0" /></p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"><em>Class diagram of our application thus far.</em></p>
    <p style="font-style: normal;" align="left"> </p>
    <p style="font-style: normal;" align="left">Here is the sequence diagram:</p>
    <p style="font-style: normal;" align="left"> </p>
    <p align="center"><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussUMLstep5sequence.png" alt="" width="765" height="425" align="left" border="0" /></p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"><em>Sequence diagram of what happens after the user types in some text <br />and hits ENTER in the GUI.</em></p>
    <p><span style="font-style: normal;">Note that the proxy, mediator and command classes actually have a very convenient </span><span style="font-style: normal;"><strong>sendNotification</strong></span> <span style="font-style: normal;">method </span><em>on themselves </em><span style="font-style: normal;">(rather than having a reference to the facade's </span><span style="font-style: normal;"><strong>sendNotification </strong></span><span style="font-style: normal;"><span style="font-weight: normal;">method as illustrated in the above sequence diagram). In actuality, these self.</span></span><span style="font-style: normal;"><strong>sendNotification</strong></span> <span style="font-style: normal;"><span style="font-weight: normal;">methods ultimately get routed to the facade anyway, so the sequence diagram above is essentially correct.</span></span></p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;">“<span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Aha” moment – several roles have been distilled out of two hacky lines of code</span></span></p>
    <p style="page-break-before: always;">Its interesting that we have distilled three roles out of the original, two simple lines of code:</p>
    <pre style="page-break-before: always;">        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">GetValue</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">SetValue</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">upper</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">())</span></span></pre>
    <p>The above code gets some user input text, converts it to uppercase and stuffs it back into the GUI. After our PureMVC refactoring steps, those roles are now spread out across various classes and a major architectural revamp. The roles are:</p>
    <ul>
    <li>
    <p style="margin-bottom: 0.1cm;">Getting the data in and out of the GUI (mediator)</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Converting the text to uppercase (command)</p>
    </li>
    </ul>
    <p style="margin-bottom: 0.1cm;">And we have added in an additional role which the original code didn't do</p>
    <ul>
    <li>
    <p style="margin-bottom: 0.1cm;">Holding and storing an independent representation of the text being displayed (model proxy)</p>
    </li>
    </ul>
    <p style="margin-bottom: 0.1cm;">Sure, we've added complexity – boy have we ever. But now we have something amazingly scalable. We won't be scaling this application up in this tutorial, however there are a couple more refactoring steps to do in order to tidy up a few things.</p>
    <p style="margin-bottom: 0.1cm;"> </p>
    <hr />
    <p style="margin-top: 0.42cm; page-break-after: avoid;"> </p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Step 6. Add a real Model behind the Model Proxy and Initialise the Model</span></span></p>
    <p>Let's now add a proper model that the model proxy wraps. In our simple example so far, this step seems redundant as it may seem easier to keep the string stored in the model proxy. Why not make the model proxy be the model?</p>
    <p>In more complex projects, model proxies can become properly useful – possibly representing a number of model objects under the one model proxy, or even returning result sets due to the underlying data model being a database.</p>
    <p>Another reason to separate the ModelProxy from the Model is that the ModelProxy class is free to “play ball” with the PureMVC framework e.g. sending out various notification messages whenever data gets changed etc. whereas a Model class is typically oblivious to such things (and probably should remain so). In our example, the DataModelProxy sends out a <span style="font-family: Tahoma;"><span lang="zxx"><span style="font-family: Tahoma;"><span lang="zxx">ï»¿</span></span></span></span>DATA_CHANGED notification – both in the constructor, and also whenever setData() is called.</p>
    <p align="center"><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussUMLstep6.png" alt="" width="397" height="279" align="left" border="0" /></p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"><em>Adding a real model behind the model proxy.</em></p>
    <p><strong>Steps:</strong></p>
    <ol>
    <li>
    <p style="margin-bottom: 0.1cm;">Add a proper model class “Data” and have the DataModelProxy wrap it.</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Initialise the model with an initial string - and watch the default text appear in the GUI when the application starts up!</p>
    </li>
    </ol>
    <pre><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">wx</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span></span><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span></span><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span></span><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">proxy</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyForm</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Panel</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Panel</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">3</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TextCtrl</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">170</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">pos</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">5</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">10</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">style</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TE_PROCESS_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Mediator</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">IMediator</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">'MyFormMediator'</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Bind</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">EVT_TEXT_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">onSubmit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">listNotificationInterests</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">[</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_CHANGED</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">]</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">handleNotification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">if</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getName</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">==</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_CHANGED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">:</span></span><br />            <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"handleNotification (mediator)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />            <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />            <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">SetValue</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">onSubmit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">evt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">GetValue</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"got (mediator)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">sendNotification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">DataSubmittedCommand</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span><span style="color: #0000c0;">.</span><span style="color: #000000;">SimpleCommand</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">ICommand</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">execute</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"execute (command)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">datamodelProxy</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">facade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">retrieveProxy</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DataModelProxy</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">datamodelProxy</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">setData</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">upper</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">())</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">proxy</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Proxy</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"DataModelProxy"</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DataModelProxy</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DataModelProxy</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">[])</span></span><br />        <span style="color: #008000;"><span style="text-decoration: line-through;"><span style="font-family: Lucida,Courier New;">self.data = ""</span></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>realdata</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>Data</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span>   <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>sendNotification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_CHANGED</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>realdata</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>data</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>)</strong></span></span>   <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">setData</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">data</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #008000;"><span style="text-decoration: line-through;"><span style="font-family: Lucida,Courier New;">self.data = data</span></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>realdata</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>data</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>data</strong></span></span>   <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"setData (model)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">data</span></span><br />        <span style="color: #008000;"><span style="text-decoration: line-through;"><span style="font-family: Lucida,Courier New;">self.sendNotification(AppFacade.DATA_CHANGED, self.data)</span></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>sendNotification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DATA_CHANGED</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>realdata</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>data</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>)</strong></span></span>   <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br /><br /><span style="font-family: Lucida,Courier New;"><strong><span style="color: #c00000;">class</span> <span style="color: #000000;">Data</span><span style="color: #0000c0;">: </span><span style="color: #008000;">#ADD CLASS</span></strong></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>def</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>__init__</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>):</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>data</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>"Hello - hit enter"</strong></span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">facade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Facade</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"DATA_SUBMITTED"</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_CHANGED</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"DATA_CHANGED"</span></span><br /><br />    <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">@</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">staticmethod</span></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getInstance</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">():</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">initializeController</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">initializeController</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">registerCommand</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DataSubmittedCommand</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFrame</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Frame</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Frame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">title</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"Refactoring to PureMVC"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">200</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">100</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">))</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getInstance</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">registerMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">))</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">registerProxy</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DataModelProxy</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">())</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">WxApp</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">App</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">OnInit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Show</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">True</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">if</span> <span style="color: #000000;">__name__</span> <span style="color: #0000c0;">==</span> <span style="color: #004080;">'__main__'</span><span style="color: #0000c0;">:</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">WxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">redirect</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">False</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MainLoop</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span></pre>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">The Application Initialisation Sequence – Getting intitial Model data into the GUI</span></span></p>
    <p>A nice effect here is that the string <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>"Hello - hit enter" </strong></span></span>in the Data class magically appears in the GUI when the application starts up. How cool – some of this PureMVC architecture is starting to pay off. How does this happen? Well, notice that the DataModelProxy sends out a DATA_CHANGED notification in its constructor (when it is also creating the instance of the real model Data class). The mediator intercepts this notification and displays the string in the GUI form.</p>
    <p> </p>
    <p style="margin-bottom: 0cm; text-align: center;" align="center"><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfuss_step6refine.png" alt="" width="386" height="380" align="left" border="0" /></p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <p> </p>
    <p style="margin-bottom: 0cm;" align="center"><span style="font-family: Times New Roman,serif;"><em>Two screenshots of our PureMVC wxPython application, </em><em><br />showing how the model data magically appears in the GUI form on application startup.</em></span></p>
    <p style="margin-bottom: 0cm;" align="center"> </p>
    <hr />
    <p style="margin-top: 0.42cm; page-break-after: avoid;"> </p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Step 7. Move the startup code into a startup command class</span></span></p>
    <p>Personally I'm not convinced this step is really necessary - however this step follows the convention on how PureMVC applications are put together.</p>
    <p align="center"><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussUMLstep7startupcmd.png" alt="" width="625" height="344" align="left" border="0" /></p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"> </p>
    <p align="center"><em>The new startup command class.</em></p>
    <p> </p>
    <p>Moving most of the startup code into its own command class may have the benefit of organising your code a little more, at the cost of complexity – I mean, we already have a nice place for constructing classes etc in the constructor of the AppFrame class. Even if we move some startup code into its own startup command class, we still need to create the form and the facade in AppFrame, so why not keep all the startup code in the one place? On the other hand, by moving what we can into the startup command, we may be helping decouple the AppFrame startup code from the knowledge of all the other clases involved in your framework e.g. mediators, commands etc. Certainly in a Flex application where namespaces are tightly controlled, or even a more serious python application where namespaces are more of an issue, having a startup comand class is a good thing.</p>
    <ol>
    <li>
    <p style="margin-bottom: 0.1cm;">Move the startup code into a startup command class</p>
    </li>
    <li>
    <p style="margin-bottom: 0.1cm;">Change our initialisation to invoke the startup command via a notification message</p>
    </li>
    </ol>
    <p> </p>
    <pre style="page-break-before: always;"><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">wx</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span></span><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span></span><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span></span><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">proxy</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyForm</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Panel</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Panel</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">3</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TextCtrl</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">170</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">pos</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">5</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">10</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">),</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">style</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">TE_PROCESS_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Mediator</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">IMediator</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">'MyFormMediator'</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyFormMediator</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Bind</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">EVT_TEXT_ENTER</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">onSubmit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">listNotificationInterests</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">[</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_CHANGED</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">]</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">handleNotification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">if</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getName</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">==</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_CHANGED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">:</span></span><br />            <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"handleNotification (mediator)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />            <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />            <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">SetValue</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">onSubmit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">evt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">inputFieldTxt</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">GetValue</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"got (mediator)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">sendNotification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">viewComponent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">DataSubmittedCommand</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span><span style="color: #0000c0;">.</span><span style="color: #000000;">SimpleCommand</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">ICommand</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">execute</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"execute (command)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">notification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getBody</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">datamodelProxy</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">facade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">retrieveProxy</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DataModelProxy</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">datamodelProxy</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">setData</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mydata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">upper</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">())</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><strong><span style="color: #c00000;">class</span> <span style="color: #000000;">StartupCommand</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span><span style="color: #0000c0;">.</span><span style="color: #000000;">SimpleCommand</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">ICommand</span><span style="color: #0000c0;">):</span> <span style="color: #008000;">#ADD CLASS</span></strong></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>def</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>execute</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>notification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>):</strong></span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>print</strong></span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>"startup execute (command)"</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>notification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>getBody</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(),</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>notification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>getType</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>wxapp</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>notification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>getBody</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>()</strong></span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>facade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>registerMediator</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>MyFormMediator</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>wxapp</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>myForm</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>))</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>facade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>registerProxy</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>DataModelProxy</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>())</strong></span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">proxy</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Proxy</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"DataModelProxy"</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DataModelProxy</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DataModelProxy</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">NAME</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">[])</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">realdata</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Data</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">sendNotification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_CHANGED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">realdata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">data</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">setData</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">data</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">realdata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">data</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">data</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">print</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"setData (model)"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">data</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">sendNotification</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_CHANGED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">realdata</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">data</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">Data</span><span style="color: #0000c0;">:</span></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br /><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">data</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"Hello - hit enter"</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">facade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Facade</span><span style="color: #0000c0;">):</span></span><br /><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>STARTUP</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>=</strong></span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;"><strong>"STARTUP"</strong></span></span>   <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"DATA_SUBMITTED"</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_CHANGED</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"DATA_CHANGED"</span></span><br /><br />    <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">@</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">staticmethod</span></span><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getInstance</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">():</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">initializeController</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">initializeController</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>super</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>).</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>registerCommand</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>STARTUP</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>StartupCommand</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>)</strong></span></span>   <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">super</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">).</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">registerCommand</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DATA_SUBMITTED</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">DataSubmittedCommand</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;"><strong>def</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>startup</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>app</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>):</strong></span></span>   <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD METHOD</strong></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>sendNotification</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>AppFacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>STARTUP</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>,</strong></span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>app</strong></span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>)</strong></span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFrame</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Frame</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wx</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Frame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">__init__</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">parent</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">id</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=-</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">1</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">title</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #004080;"><span style="font-family: Lucida,Courier New;">"Refactoring to PureMVC"</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">size</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=(</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">200</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">,</span></span><span style="color: #0080c0;"><span style="font-family: Lucida,Courier New;">100</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">))</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">myForm</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MyForm</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br /><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">mvcfacade</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFacade</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">getInstance</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br /><span style="text-decoration: line-through;"> <span style="color: #008000;"><span style="font-family: Lucida,Courier New;">self.mvcfacade.registerMediator(MyFormMediator(self.myForm ))</span></span></span><br /><span style="text-decoration: line-through;"> <span style="color: #008000;"><span style="font-family: Lucida,Courier New;">self.mvcfacade.registerProxy(DataModelProxy())</span></span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>mvcfacade</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>.</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>startup</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>(</strong></span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;"><strong>self</strong></span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;"><strong>)</strong></span></span>   <span style="color: #008000;"><span style="font-family: Lucida,Courier New;"><strong>#ADD</strong></span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">WxApp</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">App</span><span style="color: #0000c0;">):</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">None</span></span><br /><br />    <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">def</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">OnInit</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">):</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">AppFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">self</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">appFrame</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">Show</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span><br />        <span style="color: #c00000;"><span style="font-family: Lucida,Courier New;">return</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">True</span></span><br /><br /><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">if</span> <span style="color: #000000;">__name__</span> <span style="color: #0000c0;">==</span> <span style="color: #004080;">'__main__'</span><span style="color: #0000c0;">:</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span> <span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span> <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">WxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">(</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">redirect</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">=</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">False</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">)</span></span><br />    <span style="color: #000000;"><span style="font-family: Lucida,Courier New;">wxApp</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">.</span></span><span style="color: #000000;"><span style="font-family: Lucida,Courier New;">MainLoop</span></span><span style="color: #0000c0;"><span style="font-family: Lucida,Courier New;">()</span></span></pre>
    <p><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfuss_step7startupcmd.png" alt="" width="594" height="87" align="left" border="0" /></p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"> </p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"> </p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"> </p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Conclusion</span></span></p>
    <p>Here is the final UML.</p>
    <p align="center"><img src="http://www.atug.com/images/PureMvcRefactorImages/puremvcfussUMLstep999.png" alt="" width="768" height="470" border="0" /></p>
    <p> </p>
    <p align="center"><em>Final UML of our example</em></p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;">You may notice that there are hardly any dependencies between classes. This is because classes communicate with each other via the PureMVC message notification system. This takes the form of a string message broadcast to the “world” e.g. e.g. <strong>facade.sendNotification(“DATA_CHANGED”, notificationMsg)</strong> - the sender doesn't really care who handles it. Or it can take the form of looking up model instances, again by string references e.g. <strong>facade.retreiveProxy(“datamodelproxy1”)</strong>. We end up with a very decoupled design. Nice.</p>
    <p style="margin-top: 0.42cm; page-break-after: avoid;"><span style="font-family: Albany,sans-serif;"><span style="font-size: medium;">Too much Complexity?</span></span></p>
    <p>This series of refactorings has shown how you can really complicate your application by utilising the PureMVC framework. :-)</p>
    <p>Seriously, on the positive side, you now have a scalable architecture where you can add more notification messages, more mediators, more commands – and everything will fit together. I think that a framework has value not just because of what it does, but rather because it guides you in how to structure your application – how to name your classes and where to put them, and how they play together.</p>
    <p>If your application is simple it may not be worthwhile incorporating PureMVC, however hopefully this tutorial has shown you that it is not that hard to start with the PureMVC approach. I may have inspired you to use PureMVC with even your simple apps!</p>
    <p>Finally, this tutorial has shown that you can hack something up in wxPython and then later, switch to PureMVC when you need to, in a step by step way.</p>
    <p>Source code for all the steps is available <a href="http://www.atug.com/downloads/puremvcrefactor_python.zip">here</a>.</p>
    <p>If you prefer a java example walkthrough, click <a title="Refactoring to PureMVC - Java version" href="http://www.andypatterns.com/index.php?cID=86">here</a>.</p>
    <p>-Andy Bulka<br />March 2009</p>
    <p>P.S. This blog posting was presented as a talk to the Melbourne Patterns Group on the 1<sup>st</sup> April, 2009.</p>
    <p> </p>
    <h1>Comments</h1>
    <p> </p>
    <p><strong>Posted by Arun George on Feb 15th, 2012<br /></strong>Great article <span>on </span>pureMVC <span>and </span>its applicalbility through a simple example. This <span>is </span>cool. A very simple example which explains the complexity :) .<br /><br /></p>
    <p><strong>Posted by Byron Harris on May 25th, 2012<br /></strong>Thanks <span>for </span>providing this example. It helps me <span>in </span>applying the concepts <span>in </span>the PureMVC documentation <span>to </span>Python <span>and </span>wxPython.<br /><br />A few minor points about the example code:<br /><br />- <span>In </span>the DataSubmittedCommand.execute()<span>, </span>it<span>'s not necessary to add attribute datamodelProxy since Command classes are meant to be stateless. Therefore you can just make datamodelProxy a method variable.<br /></span><span><br /></span><span>- In StartupCommand.execute(), the variable named wxapp is inappropriate named. It'</span>s actually an AppFrame instance that <span>is </span>passed.</p>
    <p><strong>Posted by T.Javed on Sep 25th, 2012<br /></strong>Thank You so much! <br /><br />I had <span>read all </span>the pureMVC documentation but was finding it hard <span>to </span>grasp it until I came across this nice little tutorial. It helped me a lot <span>to </span>clearly understand the pureMVC concept <span>and </span>implementation.<br /><br />cheers!</p>
    <p><strong>Posted by Demolishun on Oct 20th, 2012</strong></p>
    <p><strong><br /></strong>Putting logic <span>in </span>the controller does <span>not </span>make sense <span>to </span>me:</p>
    <p>http://weblog.jamisbuck.org/<span>2006</span>/<span>10</span>/<span>18</span>/skinny-controller-fat-model<br />http://stackoverflow.com/questions/<span>235233</span>/asp-net-mvc-should-business-logic-exist-<span>in</span>-controllers<br /><br />I am starting down the path <span>to using </span>pureMVC <span>in </span>my projects<span>, </span>but your example <span>is </span>confusing. It seems <span>to </span>me that the controller <span>is </span>supposed <span>to </span>be light weight <span>and </span>act <span>as </span>glue. What <span>is </span>the reasoning <span>for </span>putting the business logic <span>in </span>the controller <span>and not </span>the model?<br /><br /><span>When </span>I began <span>to </span>understand MVC it clicked <span>in </span>my head that the model would be independent <span>and </span>could be swapped out just <span>like </span>the <span>view</span>. I am also a little concerned about the AppFrame knowing about the Facade. This makes it harder <span>to </span>swap out the <span>view</span>. <span>Or </span>am I looking <span>at </span>this the wrong way?</p>
    

</body>

</html>