<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Untitled</title>
    <meta name="author" content="Andy Bulka">

    <!-- <link rel="stylesheet" href="css/styles.css?v=1.0"> -->

</head>

<body>
    <!-- <script src="js/scripts.js"></script> -->

    <h1>PureMVC - Minimal wxPython Example</h1>
<p>Understanding PureMVC can be hard, even though it is a relatively simple framework.  That's why a minimal example can help.  Here is one I created for wxPython and Python users.  This will run fine on windows, mac and linux.  Install the <a href="http://trac.puremvc.org/PureMVC_Python/">PureMVC python port</a> and <a href="http://www.wxpython.org/">wxPython</a> (which is already present on Mac 10.5) and you should be able to run it.</p>
<p>Incidentally there is a helpful <a href="http://www.as3dp.com/2007/12/27/minimalist-mvc-example-using-the-puremvc-framework/" target="_blank">minimal example for Actionscript users</a> too.  To actually run that example in Flex you need to create a Flex project, import the source, move the startup function found in main.as into the mxml, and trigger it via a onloadcomplete event in the mxml.  Leave the startup code exactly the way it is - passing in the stage as a parameter to the startup code is fine, even in Flex.</p>
<h2>A tip on understanding PureMVC</h2>
<p>A potential pitfall to understanding PureMVC is that you merrily visit the <a href="http://www.puremvc.org" target="_blank">puremvc.org</a> website and start to read about the wonderful architecture of the framework - the facade, the controller and its commands, the view with its mediators and the proxies with their references to your model.  You read about what notifies what, who points where - then you look in awe at the wonderful framework diagram:</p>
<p><img src="/index.php/download_file/view_inline/435/" alt="puremvc_conceptual_diagram.png" width="678" height="589" /></p>
<p>and wonder where to get started!  The trouble is, you don't need to understand the intricate details of how the framework itself works in order to use it (though you should eventually read all the PureMVC documentation and even read the PureMVC source code - its a suprisingly small amount of code).</p>
<p>In fact all you need to create in order to <em>use</em> the framework is a concrete <strong>facade</strong> class in order to define your notification messages, a <strong>mediator</strong> class for any gui that you have, a <strong>proxy</strong> class for you model class and finally one ore more <strong>command</strong> classes depending on what behaviour you want to have.</p>
<h2>Overview of the Python Minimal Example</h2>
<p>This demo illustrates the simplest way (that I could think of) to build a PureMVC application in python using wxPython as the GUI. A string in the model is displayed in the GUI in a textfield. Anything you type gets converted to uppercase and stored back in the model, courtesy of a command class triggered when you hit the ENTER key in the GUI.<br /><br />We are modelling and visualising a single string of a model class Data.  If you want to imagine a sequence diagram... On startup, the model's data is pushed to the GUI. When the user hits ENTER in the GUI, the mediator picks up on this wx event and broadcasts the pureMVC message DATA_SUBMITTED. A command class thus gets triggered which converts the text to uppercase (this is the business logic) and stuffs the info into the model. The model's setter broadcasts a DATA_CHANGED message, which the mediator intercepts, updating the GUI.<br /><br />Thus anything you type gets converted to uppercase and stored in the model.</p>
<h2>Code</h2>
<p>The single python file can be downloaded from <a href="http://www.atug.com/downloads/puremvcminimalwx0.py.zip">here</a>.</p>
<pre><span><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">wx</span><br /><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><br /><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">facade</span><br /><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span><br /><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span><br /><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">proxy</span><br /><br /><br /></span></span><span style="background-color: #ffcc99;"><span style="background-color: #ffcc99;">"</span>View</span><span style="background-color: #ffcc99;">"</span><br /><strong>MyForm is the GUI, built in wxpython. MyFormMediator is the mediator which knows<br />about and specifically looks after MyForm, intercepting wx events from the GUI<br />and broadcasting pureMVC notification messages. The mediator also listens for<br />pureMVC notification messages and stuffs data back into the GUI. The "View" in<br />pureMVC is the entire system comprised of class View (part of the pureMVC<br />framework) which holds references to one or more mediators, each of which looks<br />after a GUI form or part of a GUI.</strong><br /><br /><span><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">MyForm</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Panel</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">parent</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Panel</span><span style="color: #0000c0;">.</span><span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span><span style="color: #000000;">parent</span><span style="color: #0000c0;">,</span><span style="color: #000000;">id</span><span style="color: #0000c0;">=</span><span style="color: #0080c0;">3</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">inputFieldTxt</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">TextCtrl</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #0000c0;">-</span><span style="color: #0080c0;">1</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">size</span><span style="color: #0000c0;">=</span><span style="color: #0000c0;">(</span><span style="color: #0080c0;">170</span><span style="color: #0000c0;">,</span><span style="color: #0000c0;">-</span><span style="color: #0080c0;">1</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">pos</span><span style="color: #0000c0;">=</span><span style="color: #0000c0;">(</span><span style="color: #0080c0;">5</span><span style="color: #0000c0;">,</span> <span style="color: #0080c0;">10</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">style</span><span style="color: #0000c0;">=</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">TE_PROCESS_ENTER</span><span style="color: #0000c0;">)</span><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Mediator</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">IMediator</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">NAME</span> <span style="color: #0000c0;">=</span> <span style="color: #004080;">'MyFormMediator'</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">viewComponent</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">super</span><span style="color: #0000c0;">(</span><span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">.</span><span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">.</span><span style="color: #000000;">NAME</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">viewComponent</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">viewComponent</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Bind</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">EVT_TEXT_ENTER</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">onSubmit</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">viewComponent</span><span style="color: #0000c0;">.</span><span style="color: #000000;">inputFieldTxt</span><span style="color: #0000c0;">)</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">listNotificationInterests</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">return</span> <span style="color: #0000c0;">[</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">DATA_CHANGED</span> <span style="color: #0000c0;">]</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">handleNotification</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">if</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getName</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span> <span style="color: #0000c0;">==</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">DATA_CHANGED</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">print</span> <span style="color: #004080;">"handleNotification (mediator) got"</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getBody</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">mydata</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getBody</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">viewComponent</span><span style="color: #0000c0;">.</span><span style="color: #000000;">inputFieldTxt</span><span style="color: #0000c0;">.</span><span style="color: #000000;">SetValue</span><span style="color: #0000c0;">(</span><span style="color: #000000;">mydata</span><span style="color: #0000c0;">)</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">onSubmit</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">evt</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">mydata</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">viewComponent</span><span style="color: #0000c0;">.</span><span style="color: #000000;">inputFieldTxt</span><span style="color: #0000c0;">.</span><span style="color: #000000;">GetValue</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">sendNotification</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">DATA_SUBMITTED</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">mydata</span><span style="color: #0000c0;">)</span><br /><br /><br /></span></span><span style="background-color: #ffcc99;"><span style="background-color: #ffcc99;">"</span>Controller</span><span style="background-color: #ffcc99;">"</span><br /><strong>StartupCommand and DataSubmittedCommand are the command classes, triggered by<br />notification messages AppFacade.STARTUP and AppFacade.DATA_SUBMITTED<br />respectively. The "Controller" in pureMVC is the entire system comprised of<br />class Controller (part of the pureMVC framework) which holds references to one<br />or more commands.</strong><br /><br /><span><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">StartupCommand</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span><span style="color: #0000c0;">.</span><span style="color: #000000;">SimpleCommand</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">ICommand</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">execute</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">print</span> <span style="color: #004080;">"startup execute (command)"</span><br /> <span style="color: #000000;">wxapp</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getBody</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">facade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">registerMediator</span><span style="color: #0000c0;">(</span><span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wxapp</span><span style="color: #0000c0;">.</span><span style="color: #000000;">myForm</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">facade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">registerProxy</span><span style="color: #0000c0;">(</span><span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">)</span><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">DataSubmittedCommand</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span><span style="color: #0000c0;">.</span><span style="color: #000000;">SimpleCommand</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">ICommand</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">execute</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">print</span> <span style="color: #004080;">"submit execute (command)"</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getBody</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">mydata</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getBody</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">datamodelProxy</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">facade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">retrieveProxy</span><span style="color: #0000c0;">(</span><span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">.</span><span style="color: #000000;">NAME</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">datamodelProxy</span><span style="color: #0000c0;">.</span><span style="color: #000000;">setData</span><span style="color: #0000c0;">(</span><span style="color: #000000;">mydata</span><span style="color: #0000c0;">.</span><span style="color: #000000;">upper</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">)</span><br /><br /><br /></span></span><span style="background-color: #ffcc99;"><span style="background-color: #ffcc99;">"</span>Model</span><span style="background-color: #ffcc99;">"</span><br /><strong>DataModelProxy is the proxy for class Data. The "Model" in pureMVC is the entire<br />system comprised of class Model (part of the pureMVC framework) which holds<br />references to one or more proxies (e.g. DataModelProxy) each of which looks<br />after a model (e.g. Data). Note that a model class could be more complex and the<br />associated proxy could look after looping and pulling out larger chunks of<br />information.</strong><br /><br /><span><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">proxy</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Proxy</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">NAME</span> <span style="color: #0000c0;">=</span> <span style="color: #004080;">"DataModelProxy"</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">super</span><span style="color: #0000c0;">(</span><span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">.</span><span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">.</span><span style="color: #000000;">NAME</span><span style="color: #0000c0;">,</span> <span style="color: #0000c0;">[</span><span style="color: #0000c0;">]</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">realdata</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">Data</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">sendNotification</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">DATA_CHANGED</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">realdata</span><span style="color: #0000c0;">.</span><span style="color: #000000;">data</span><span style="color: #0000c0;">)</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">setData</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">data</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">realdata</span><span style="color: #0000c0;">.</span><span style="color: #000000;">data</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">data</span><br /> <span style="color: #c00000;">print</span> <span style="color: #004080;">"setData (model) to"</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">data</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">sendNotification</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">DATA_CHANGED</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">realdata</span><span style="color: #0000c0;">.</span><span style="color: #000000;">data</span><span style="color: #0000c0;">)</span><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">Data</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">data</span> <span style="color: #0000c0;">=</span> <span style="color: #004080;">"Hello - hit enter"</span><br /><br /></span></span><strong style="background-color: #ffffff;"></strong><span style="background-color: #ffffff;"><span style="background-color: #ffcc99;">"Facade</span></span><span style="background-color: #ffcc99;">"</span><br /><strong style="background-color: #ffffff;"><span style="background-color: #ffffff;">The </span>facade</strong><strong><span style="background-color: #ffffff;"> is a singleton and is where you define all messages types (all just</span><br style="background-color: #ffffff;" /><span style="background-color: #ffffff;">strings) and where you associate command classes with particular messages. There</span><br style="background-color: #ffffff;" /><span style="background-color: #ffffff;">can be messages NOT associated with commands, which are used for mediators to</span><br style="background-color: #ffffff;" /><span style="background-color: #ffffff;">listen to (e.g. model indirectly talking to mediators).</span></strong><br /><br /><span><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">facade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Facade</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">STARTUP</span> <span style="color: #0000c0;">=</span> <span style="color: #004080;">"STARTUP"</span><br /> <span style="color: #000000;">DATA_SUBMITTED</span> <span style="color: #0000c0;">=</span> <span style="color: #004080;">"DATA_SUBMITTED"</span><br /> <span style="color: #000000;">DATA_CHANGED</span> <span style="color: #0000c0;">=</span> <span style="color: #004080;">"DATA_CHANGED"</span><br /><br /> <span style="color: #0000c0;">@</span><span style="color: #000000;">staticmethod</span><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">getInstance</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">return</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">initializeController</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">super</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">.</span><span style="color: #000000;">initializeController</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /><br /> <span style="color: #000000;">super</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">.</span><span style="color: #000000;">registerCommand</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">STARTUP</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">StartupCommand</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">super</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">.</span><span style="color: #000000;">registerCommand</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">DATA_SUBMITTED</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">DataSubmittedCommand</span><span style="color: #0000c0;">)</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">startup</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">app</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">sendNotification</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">STARTUP</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">app</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">;</span><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFrame</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Frame</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">myForm</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">None</span><br /> <span style="color: #000000;">mvcfacade</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">None</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Frame</span><span style="color: #0000c0;">.</span><span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span><span style="color: #000000;">parent</span><span style="color: #0000c0;">=</span><span style="color: #000000;">None</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">id</span><span style="color: #0000c0;">=</span><span style="color: #0000c0;">-</span><span style="color: #0080c0;">1</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">title</span><span style="color: #0000c0;">=</span><span style="color: #004080;">"PureMVC Minimalist Demo"</span><span style="color: #0000c0;">,</span><span style="color: #000000;">size</span><span style="color: #0000c0;">=</span><span style="color: #0000c0;">(</span><span style="color: #0080c0;">200</span><span style="color: #0000c0;">,</span><span style="color: #0080c0;">100</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">myForm</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">MyForm</span><span style="color: #0000c0;">(</span><span style="color: #000000;">parent</span><span style="color: #0000c0;">=</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mvcfacade</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getInstance</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mvcfacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">startup</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">WxApp</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">App</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">appFrame</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">None</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">OnInit</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">appFrame</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">AppFrame</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">appFrame</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Show</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #c00000;">return</span> <span style="color: #000000;">True</span><br /><br /><span style="color: #c00000;">if</span> <span style="color: #000000;">__name__</span> <span style="color: #0000c0;">==</span> <span style="color: #004080;">'__main__'</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">wxApp</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">WxApp</span><span style="color: #0000c0;">(</span><span style="color: #000000;">redirect</span><span style="color: #0000c0;">=</span><span style="color: #000000;">False</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">wxApp</span><span style="color: #0000c0;">.</span><span style="color: #000000;">MainLoop</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span></span></span></pre>
<h2>Notes</h2>
<p>Pardon the pun but PureMVC often uses 'note' to refer to the notification message parameter, which I found confusing.  For example when a meditor receives a notification.  I use <strong>notification</strong> as the parameter name.</p>
<p>Notification messages have a .getName(), .getBody() and .getType().  Except for the name, you can pass any info you like in the second two parameters, its up to you. Typical parameters are references to forms, apps, data that has changed, reference to objects, other string messages of your own devising. You could use more than one parameter if say, you wanted to broadcast both the data that changed and an actual reference to the object whose data had changed.</p>
<h2>Alternative implementation - even simpler!</h2>
<p>Here is an even simpler implementation, essentially the same, however I have removed the startup command.  You can initialise the bits and pieces of the application, creating the mediator and model proxy etc. in regular code rather than going through all the fancy startup command stuff (see the bold code).  This helps reduce complexity and increases your chances of understanding what is going on with the PureMVC architectural pattern.  In practice, in a complex project, a startup command may very well be a good idea.</p>
<p>You can download this example <a href="http://www.atug.com/downloads/puremvcminimalwx0nostartupcmd.py.zip">here</a>.</p>
<pre><span><span style="font-family: Lucida,Courier New;"><span style="color: #c00000;">import</span> <span style="color: #000000;">wx</span><br /><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><br /><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">facade</span><br /><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span><br /><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span><br /><span style="color: #c00000;">import</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">proxy</span><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">MyForm</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Panel</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">parent</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Panel</span><span style="color: #0000c0;">.</span><span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span><span style="color: #000000;">parent</span><span style="color: #0000c0;">,</span><span style="color: #000000;">id</span><span style="color: #0000c0;">=</span><span style="color: #0080c0;">3</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">inputFieldTxt</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">TextCtrl</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #0000c0;">-</span><span style="color: #0080c0;">1</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">size</span><span style="color: #0000c0;">=</span><span style="color: #0000c0;">(</span><span style="color: #0080c0;">170</span><span style="color: #0000c0;">,</span><span style="color: #0000c0;">-</span><span style="color: #0080c0;">1</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">pos</span><span style="color: #0000c0;">=</span><span style="color: #0000c0;">(</span><span style="color: #0080c0;">5</span><span style="color: #0000c0;">,</span> <span style="color: #0080c0;">10</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">style</span><span style="color: #0000c0;">=</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">TE_PROCESS_ENTER</span><span style="color: #0000c0;">)</span><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mediator</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Mediator</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">IMediator</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">NAME</span> <span style="color: #0000c0;">=</span> <span style="color: #004080;">'MyFormMediator'</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">viewComponent</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">super</span><span style="color: #0000c0;">(</span><span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">.</span><span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">.</span><span style="color: #000000;">NAME</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">viewComponent</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">viewComponent</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Bind</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">EVT_TEXT_ENTER</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">onSubmit</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">viewComponent</span><span style="color: #0000c0;">.</span><span style="color: #000000;">inputFieldTxt</span><span style="color: #0000c0;">)</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">listNotificationInterests</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">return</span> <span style="color: #0000c0;">[</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">DATA_CHANGED</span> <span style="color: #0000c0;">]</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">handleNotification</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">if</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getName</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span> <span style="color: #0000c0;">==</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">DATA_CHANGED</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">print</span> <span style="color: #004080;">"handleNotification (mediator) got"</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getBody</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">mydata</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getBody</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">viewComponent</span><span style="color: #0000c0;">.</span><span style="color: #000000;">inputFieldTxt</span><span style="color: #0000c0;">.</span><span style="color: #000000;">SetValue</span><span style="color: #0000c0;">(</span><span style="color: #000000;">mydata</span><span style="color: #0000c0;">)</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">onSubmit</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">evt</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">mydata</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">viewComponent</span><span style="color: #0000c0;">.</span><span style="color: #000000;">inputFieldTxt</span><span style="color: #0000c0;">.</span><span style="color: #000000;">GetValue</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">sendNotification</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">DATA_SUBMITTED</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">mydata</span><span style="color: #0000c0;">)</span><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">DataSubmittedCommand</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">command</span><span style="color: #0000c0;">.</span><span style="color: #000000;">SimpleCommand</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">interfaces</span><span style="color: #0000c0;">.</span><span style="color: #000000;">ICommand</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">execute</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">print</span> <span style="color: #004080;">"submit execute (command)"</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getBody</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">mydata</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">notification</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getBody</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">datamodelProxy</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">facade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">retrieveProxy</span><span style="color: #0000c0;">(</span><span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">.</span><span style="color: #000000;">NAME</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">datamodelProxy</span><span style="color: #0000c0;">.</span><span style="color: #000000;">setData</span><span style="color: #0000c0;">(</span><span style="color: #000000;">mydata</span><span style="color: #0000c0;">.</span><span style="color: #000000;">upper</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">)</span><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">proxy</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Proxy</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">NAME</span> <span style="color: #0000c0;">=</span> <span style="color: #004080;">"DataModelProxy"</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">super</span><span style="color: #0000c0;">(</span><span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">.</span><span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">.</span><span style="color: #000000;">NAME</span><span style="color: #0000c0;">,</span> <span style="color: #0000c0;">[</span><span style="color: #0000c0;">]</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">realdata</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">Data</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">sendNotification</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">DATA_CHANGED</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">realdata</span><span style="color: #0000c0;">.</span><span style="color: #000000;">data</span><span style="color: #0000c0;">)</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">setData</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">data</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">realdata</span><span style="color: #0000c0;">.</span><span style="color: #000000;">data</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">data</span><br /> <span style="color: #c00000;">print</span> <span style="color: #004080;">"setData (model) to"</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">data</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">sendNotification</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">DATA_CHANGED</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">realdata</span><span style="color: #0000c0;">.</span><span style="color: #000000;">data</span><span style="color: #0000c0;">)</span><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">Data</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">data</span> <span style="color: #0000c0;">=</span> <span style="color: #004080;">"Hello - hit enter"</span><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">(</span><span style="color: #000000;">puremvc</span><span style="color: #0000c0;">.</span><span style="color: #000000;">patterns</span><span style="color: #0000c0;">.</span><span style="color: #000000;">facade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Facade</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">DATA_SUBMITTED</span> <span style="color: #0000c0;">=</span> <span style="color: #004080;">"DATA_SUBMITTED"</span><br /> <span style="color: #000000;">DATA_CHANGED</span> <span style="color: #0000c0;">=</span> <span style="color: #004080;">"DATA_CHANGED"</span><br /><br /> <span style="color: #0000c0;">@</span><span style="color: #000000;">staticmethod</span><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">getInstance</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #c00000;">return</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">initializeController</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">super</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">.</span><span style="color: #000000;">initializeController</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">super</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">.</span><span style="color: #000000;">registerCommand</span><span style="color: #0000c0;">(</span><span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">DATA_SUBMITTED</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">DataSubmittedCommand</span><span style="color: #0000c0;">)</span><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">AppFrame</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Frame</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">myForm</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">None</span><br /> <span style="color: #000000;">mvcfacade</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">None</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Frame</span><span style="color: #0000c0;">.</span><span style="color: #000000;">__init__</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">,</span><span style="color: #000000;">parent</span><span style="color: #0000c0;">=</span><span style="color: #000000;">None</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">id</span><span style="color: #0000c0;">=</span><span style="color: #0000c0;">-</span><span style="color: #0080c0;">1</span><span style="color: #0000c0;">,</span> <span style="color: #000000;">title</span><span style="color: #0000c0;">=</span><span style="color: #004080;">"PureMVC Minimalist Demo"</span><span style="color: #0000c0;">,</span><span style="color: #000000;">size</span><span style="color: #0000c0;">=</span><span style="color: #0000c0;">(</span><span style="color: #0080c0;">200</span><span style="color: #0000c0;">,</span><span style="color: #0080c0;">100</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">myForm</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">MyForm</span><span style="color: #0000c0;">(</span><span style="color: #000000;">parent</span><span style="color: #0000c0;">=</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mvcfacade</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">AppFacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">getInstance</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /><strong> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mvcfacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">registerMediator</span><span style="color: #0000c0;">(</span><span style="color: #000000;">MyFormMediator</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">myForm</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">mvcfacade</span><span style="color: #0000c0;">.</span><span style="color: #000000;">registerProxy</span><span style="color: #0000c0;">(</span><span style="color: #000000;">DataModelProxy</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">)</span></strong><br /><br /><span style="color: #c00000;">class</span> <span style="color: #000000;">WxApp</span><span style="color: #0000c0;">(</span><span style="color: #000000;">wx</span><span style="color: #0000c0;">.</span><span style="color: #000000;">App</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">appFrame</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">None</span><br /><br /> <span style="color: #c00000;">def</span> <span style="color: #000000;">OnInit</span><span style="color: #0000c0;">(</span><span style="color: #000000;">self</span><span style="color: #0000c0;">)</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">appFrame</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">AppFrame</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">self</span><span style="color: #0000c0;">.</span><span style="color: #000000;">appFrame</span><span style="color: #0000c0;">.</span><span style="color: #000000;">Show</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span><br /> <span style="color: #c00000;">return</span> <span style="color: #000000;">True</span><br /><br /><span style="color: #c00000;">if</span> <span style="color: #000000;">__name__</span> <span style="color: #0000c0;">==</span> <span style="color: #004080;">'__main__'</span><span style="color: #0000c0;">:</span><br /> <span style="color: #000000;">wxApp</span> <span style="color: #0000c0;">=</span> <span style="color: #000000;">WxApp</span><span style="color: #0000c0;">(</span><span style="color: #000000;">redirect</span><span style="color: #0000c0;">=</span><span style="color: #000000;">False</span><span style="color: #0000c0;">)</span><br /> <span style="color: #000000;">wxApp</span><span style="color: #0000c0;">.</span><span style="color: #000000;">MainLoop</span><span style="color: #0000c0;">(</span><span style="color: #0000c0;">)</span></span></span></pre>
<h2>Conclusion</h2>
<p>I hope this minimalist example helps you understand PureMVC.  Of course read the pdf <a href="http://puremvc.org/content/view/98/189/">documentation</a> on PureMVC by Cliff.  For a step by step guide to buildng a PureMVC based application in wxPython - or any other language for that matter, see my blog entry <a title="Refactoring to PureMVC" href="http://www.andypatterns.com/index.php?cID=84">Refactoring to PureMVC</a>.</p>
<p>-Andy</p>
<p> </p>
<h1>Comments:</h1>
<p> </p>
<p><strong>Posted by Toby de Havilland on Mar 4th, 2009</strong><br />Excellent example Andy, great stuff.</p>
<p><strong>Posted by diamondtearz on Dec 10th, 2009</strong><br />Wow! Thanks for putting this out there. I've recently jumped on the Python boat and have used PureMVC in Actionscript. I was looking for a good example to get me going and this fits the bill perfectly.</p>
<p><strong>Posted by Fabio on Jan 18th, 2014</strong><br />Dear Andy,<br />I hope you're still around after all this time. Sorry but I found your wonderful blog just now! Your example is very nice, but, unfortunately, I don't get it to work. There is a very strange Traceback here that I cannot really get rid of. I'm running python 2.7.3 on Windows (8...)<br />I cannot really understand why this strange error. self.realdata is absolutely well defined!</p>
<pre>C:\NewPython27\Scripts\python.exe C:/Users/Fabio/Documents/python/puremvcminimalwx0.py/fromSite.py<br />startup execute (command)<br />Traceback (most recent call last):<br />File "C:/Users/Fabio/Documents/python/puremvcminimalwx0.py/fromSite.py", line 156, in <br />wxApp = WxApp(redirect=False)<br />File "C:\NewPython27\lib\site-packages\wx\_core.py", line 7978, in __init__<br />self._BootstrapApp()<br />File "C:\NewPython27\lib\site-packages\wx\_core.py", line 7552, in _BootstrapApp<br />return _core_.PyApp__BootstrapApp(*args, **kwargs)<br />File "C:/Users/Fabio/Documents/python/puremvcminimalwx0.py/fromSite.py", line 151, in OnInit<br />self.appFrame = AppFrame()<br />File "C:/Users/Fabio/Documents/python/puremvcminimalwx0.py/fromSite.py", line 145, in __init__<br />self.mvcfacade.startup(self)<br />File "C:/Users/Fabio/Documents/python/puremvcminimalwx0.py/fromSite.py", line 135, in startup<br />self.sendNotification(AppFacade.STARTUP, app);<br />File "C:\NewPython27\lib\site-packages\puremvc\patterns\facade.py", line 265, in sendNotification<br />notificationName, body, noteType<br />File "C:\NewPython27\lib\site-packages\puremvc\patterns\facade.py", line 284, in notifyObservers<br />self.view.notifyObservers(notification)<br />File "C:\NewPython27\lib\site-packages\puremvc\core.py", line 306, in notifyObservers<br />obsvr.notifyObserver(notification)<br />File "C:\NewPython27\lib\site-packages\puremvc\patterns\observer.py", line 88, in notifyObserver<br />self.getNotifyMethod()(notification)<br />File "C:\NewPython27\lib\site-packages\puremvc\core.py", line 91, in executeCommand<br />commandInstance.execute(note)<br />File "C:/Users/Fabio/Documents/python/puremvcminimalwx0.py/fromSite.py", line 93, in execute<br />self.facade.registerProxy(DataModelProxy())<br />File "C:/Users/Fabio/Documents/python/puremvcminimalwx0.py/fromSite.py", line 106, in __init__<br />super(DataModelProxy, self).__init__(DataModelProxy.NAME, [])<br />File "C:\NewPython27\lib\site-packages\puremvc\patterns\proxy.py", line 46, in __init__<br />self.setData(data)<br />File "C:/Users/Fabio/Documents/python/puremvcminimalwx0.py/fromSite.py", line 111, in setData<br />self.realdata.data = data<br />AttributeError: 'DataModelProxy' object has no attribute 'realdata'</pre>

</body>

</html>